"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[551],{4551:(G,f,o)=>{o.r(f),o.d(f,{HistoryModule:()=>B,MY_FORMATS:()=>y});var A=o(4521),g=o(7423),p=o(4834),v=o(5245),T=o(2181),D=o(5899),b=o(4847),Y=o(4999),C=o(1244),H=o(4466),S=o(7579),h=o(2722),s=o(3075),F=o(5439),l=o.n(F),t=o(5e3),N=o(9122),M=o(4880),J=o(1816),I=o(2340),U=o(520),j=o(8951);let E=(()=>{class n{constructor(e,i){this._httpClient=e,this._authService=i}getHistoryInfo(e,i){const a=(0,J.Z)(this._authService.user);return this._httpClient.post(`${I.N.API_URL}/Transacciones_App/sel_comercio`,{nu_id_comercio:a.nu_id_comercio,nu_id_comercio_app:a.nu_id_comercio_app,dt_fec_inicio:e,dt_fec_final:i})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(U.eN),t.LFG(j.e))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var u=o(7322),m=o(6856),d=o(9808);function L(n,r){if(1&n&&(t.TgZ(0,"div",28),t.TgZ(1,"div",29),t.TgZ(2,"div",30),t.TgZ(3,"span",31),t._uU(4),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"div",32),t.TgZ(8,"span"),t._uU(9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",33),t.TgZ(11,"div"),t.TgZ(12,"span",34),t._uU(13,"Comisi\xf3n:"),t.qZA(),t.TgZ(14,"span",35),t._uU(15),t.ALo(16,"number"),t.qZA(),t.qZA(),t.TgZ(17,"span",36),t._uU(18),t.ALo(19,"number"),t.qZA(),t.qZA(),t._UZ(20,"mat-divider"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(4),t.hij(" N\xb0 Operaci\xf3n: ",e.nu_id_trx_app," "),t.xp6(2),t.hij(" ",e.vc_desc_grupo_producto," "),t.xp6(3),t.Oqu(e.dt_fecha),t.xp6(6),t.hij(" S/ ",t.xi3(16,5,e.nu_valor_comision,".2-2")," "),t.xp6(3),t.hij(" S/ ",t.xi3(19,8,e.nu_precio,".2-2")," ")}}function O(n,r){if(1&n&&(t.TgZ(0,"div",26),t.YNc(1,L,21,11,"div",27),t.qZA()),2&n){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngIf",e.length>0)}}function q(n,r){1&n&&(t.TgZ(0,"div",37),t.TgZ(1,"span",38),t._uU(2," No se encontraron registros para la fecha indicada "),t.qZA(),t.qZA())}function R(n,r){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,O,2,1,"div",24),t.YNc(2,q,3,0,"div",25),t.qZA()),2&n){const e=r.ngIf;t.xp6(1),t.Q6J("ngForOf",e),t.xp6(1),t.Q6J("ngIf",e.length<1)}}const w=[{path:"",component:(()=>{class n{constructor(e,i,a){this._fuseNavigationService=e,this._fuseMediaWatcherService=i,this.historyService=a,this.range=new s.cw({trxStartDate:new s.NI,trxEndDate:new s.NI}),this._unsubscribeAll=new S.x,this.myFilter=c=>(c||l()())<l()()}ngOnInit(){this._fuseMediaWatcherService.onMediaChange$.pipe((0,h.R)(this._unsubscribeAll)).subscribe(({matchingAliases:e})=>{this.isScreenSmall=!e.includes("md")}),this.changeDates(0)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}trackByFn(e,i){return i.id||e}toggleNavigation(e){const i=this._fuseNavigationService.getComponent(e);i&&this.isScreenSmall&&i.toggle()}getTransactions(){this.range.get("trxEndDate").value&&(this.transactions=this.historyService.getHistoryInfo(this.formatDate(this.range.get("trxStartDate").value),this.formatDate(this.range.get("trxEndDate").value)).pipe((0,h.R)(this._unsubscribeAll)))}selectFirstDate(e){const i=l()(e).add(7,"days");this.maxDate=i}selectEndDate(){this.range.get("trxEndDate").value&&this.getTransactions()}formatDate(e){return l()(e).format("YYYY-MM-DD")}changeDates(e){this.range.get("trxStartDate").setValue(l()().subtract(e,"days")),this.range.get("trxEndDate").setValue(l()()),this.maxDate=l()(new Date),this.getTransactions()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(N.Jf),t.Y36(M.T),t.Y36(E))},n.\u0275cmp=t.Xpm({type:n,selectors:[["history"]],decls:33,vars:9,consts:[[1,"flex","flex-col","flex-auto","w-full",2,"background-color","#7c66f7"],[1,"flex-col","flex-auto","bg-card","relative","p-5","md:p-10",2,"border-top-left-radius","3rem !important","border-bottom-left-radius","3rem !important"],[1,"p-5","md:p-0"],["mat-icon-button","",1,"absolute","md:hidden","top-8","left-8",3,"click"],[3,"svgIcon"],[1,"ml-10","-mt-1.5","md:ml-0","md:mt-0","text-3xl","font-bold"],[1,"grid","grid-cols-1","md:grid-cols-2","my-4"],[1,"min-h-40"],[1,"mb-4","flex","justify-between"],["mat-raised-button","","color","primary",1,"w-full","sm:w-60","sm:ml-4","md:w-60","md:mx-1",3,"click"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-bold","mr-1"],[1,"flex","items-center","border-2","border-[#7c66f7]","p-1","w-full","sm:w-80","md:w-full","lg:w-80"],[1,"custom","w-full"],[3,"formGroup","rangePicker","dateFilter","max"],["matStartDate","","formControlName","trxStartDate","placeholder","Fecha Inicio",3,"dateChange"],["matEndDate","","formControlName","trxEndDate","placeholder","Fecha Final",3,"dateChange"],["matSuffix","",3,"for"],["maxRange","7"],["picker",""],[1,"mb-4","flex","justify-center"],["mat-raised-button","","color","primary",1,"mt-2","w-full","sm:w-60","sm:ml-4","md:w-60","md:ml-0",3,"click"],[1,"border-2","rounded-lg","p-2.5","sm:p-5"],[4,"ngIf"],["class","my-4",4,"ngFor","ngForOf"],["class","flex justify-center",4,"ngIf"],[1,"my-4"],["class","mb-4",4,"ngIf"],[1,"mb-4"],[1,"flex","justify-between","mb-1"],[1,"flex","flex-col"],[1,"font-semibold","text-[#7c66f7]"],[1,"text-sm"],[1,"flex","justify-between","mb-4"],[1,"mr-1"],[1,"font-semibold"],[1,"font-semibold","text-xl"],[1,"flex","justify-center"],[1,"font-semibold","text-lg"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"button",3),t.NdJ("click",function(){return i.toggleNavigation("mainNavigation")}),t._UZ(4,"mat-icon",4),t.qZA(),t.TgZ(5,"div",5),t._uU(6," Historial "),t.qZA(),t.TgZ(7,"div",6),t.TgZ(8,"div",7),t.TgZ(9,"div",8),t.TgZ(10,"button",9),t.NdJ("click",function(){return i.changeDates(7)}),t._uU(11," \xdaltima semana "),t.qZA(),t.TgZ(12,"button",9),t.NdJ("click",function(){return i.changeDates(3)}),t._uU(13," \xdaltimos 3 d\xedas "),t.qZA(),t.TgZ(14,"button",9),t.NdJ("click",function(){return i.changeDates(0)}),t._uU(15," Hoy "),t.qZA(),t.qZA(),t.TgZ(16,"div",10),t.TgZ(17,"span",11),t._uU(18,"Operaciones de mis clientes"),t.qZA(),t.TgZ(19,"div",12),t.TgZ(20,"mat-form-field",13),t.TgZ(21,"mat-date-range-input",14),t.TgZ(22,"input",15),t.NdJ("dateChange",function(c){return i.selectFirstDate(c.value)}),t.qZA(),t.TgZ(23,"input",16),t.NdJ("dateChange",function(){return i.selectEndDate()}),t.qZA(),t.qZA(),t._UZ(24,"mat-datepicker-toggle",17),t._UZ(25,"mat-date-range-picker",18,19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",20),t.TgZ(28,"button",21),t.NdJ("click",function(){return i.changeDates(0)}),t._uU(29," Reiniciar Fechas "),t.qZA(),t.qZA(),t.TgZ(30,"div",22),t.YNc(31,R,3,2,"div",23),t.ALo(32,"async"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const a=t.MAs(26);t.xp6(4),t.Q6J("svgIcon","heroicons_outline:menu"),t.xp6(17),t.Q6J("formGroup",i.range)("rangePicker",a)("dateFilter",i.myFilter)("max",i.maxDate),t.xp6(3),t.Q6J("for",a),t.xp6(7),t.Q6J("ngIf",t.lcZ(32,7,i.transactions))}},directives:[g.lW,v.Hw,u.KE,m.wx,s.JL,s.sg,m.zY,s.Fj,s.JJ,s.u,m.By,m.nW,u.R9,m._g,d.O5,d.sg,p.d],pipes:[d.Ov,d.JJ],styles:[".custom.mat-form-field.mat-form-field-appearance-fill .mat-form-field-wrapper{margin-bottom:0!important}.custom.mat-form-field.mat-form-field-appearance-fill .mat-form-field-wrapper .mat-form-field-flex{background-color:#fcfbff!important;border-width:0!important}\n"],encapsulation:2,changeDetection:0}),n})()}];var Q=o(3170),Z=o(508);const y={parse:{dateInput:"DD/MM/YYYY"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"MMMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MM YYYY"}};let B=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[{provide:Z.sG,useValue:y},{provide:Z.Ad,useValue:"es-ES"}],imports:[[A.Bz.forChild(w),H.m,g.ot,p.t,v.Ps,T.Tx,D.Cv,b.JX,Y.p0,C.X,u.lN,m.FA,Q.Yd]]}),n})()}}]);