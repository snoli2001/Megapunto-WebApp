var tt=Object.defineProperty,nt=Object.defineProperties,it=Object.getOwnPropertyDescriptors,Qe=Object.getOwnPropertySymbols,rt=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable,qe=(oe,M,K)=>M in oe?tt(oe,M,{enumerable:!0,configurable:!0,writable:!0,value:K}):oe[M]=K,Xe=(oe,M)=>{for(var K in M||(M={}))rt.call(M,K)&&qe(oe,K,M[K]);if(Qe)for(var K of Qe(M))st.call(M,K)&&qe(oe,K,M[K]);return oe},$e=(oe,M)=>nt(oe,it(M)),je=(oe,M,K)=>(qe(oe,"symbol"!=typeof M?M+"":M,K),K),Ye=(oe,M,K)=>{if(!M.has(oe))throw TypeError("Cannot "+K)},ue=(oe,M,K)=>(Ye(oe,M,"read from private field"),K?K.call(oe):M.get(oe)),ye=(oe,M,K)=>{if(M.has(oe))throw TypeError("Cannot add the same private member more than once");M instanceof WeakSet?M.add(oe):M.set(oe,K)},Pe=(oe,M,K,_)=>(Ye(oe,M,"write to private field"),_?_.call(oe,K):M.set(oe,K),K),xe=(oe,M,K)=>(Ye(oe,M,"access private method"),K);(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[394],{7394:(oe,M,K)=>{"use strict";K.r(M),K.d(M,{BalanceModule:()=>X});var _=K(4603),ae=K(8966),ne=K(4521),re=K(7423),te=K(9832),T=K(4834),e=K(5245),c=K(2181),r=K(5899),l=K(4847),f=K(4999),E=K(7238),u=K(1244),s=K(4466),h=K(5e3),F=K(2313);let P=(()=>{class W{constructor(N){this._sanitizer=N}transform(N,Q){switch(Q){case"html":default:return this._sanitizer.bypassSecurityTrustHtml(N);case"style":return this._sanitizer.bypassSecurityTrustStyle(N);case"script":return this._sanitizer.bypassSecurityTrustScript(N);case"url":return this._sanitizer.bypassSecurityTrustUrl(N);case"resourceUrl":return this._sanitizer.bypassSecurityTrustResourceUrl(N)}}}return W.\u0275fac=function(N){return new(N||W)(h.Y36(F.H7,16))},W.\u0275pipe=h.Yjl({name:"safe",type:W,pure:!0}),W})(),m=(()=>{class W{constructor(N,Q){this.data=N,this.matDialogRef=Q,this.iframeSrc=N}ngOnInit(){}close(){this.matDialogRef.close()}}return W.\u0275fac=function(N){return new(N||W)(h.Y36(ae.WI),h.Y36(ae.so))},W.\u0275cmp=h.Xpm({type:W,selectors:[["app-bank-guide-pdf-pop-up"]],decls:6,vars:4,consts:[[1,"m-10","flex","justify-center",2,"height","80%"],["width","900px","type","application/pdf",3,"data"],[1,"flex","justify-center","w-full","my-5"],["mat-raised-button","",1,"text-white","bg-gray-500",3,"click"]],template:function(N,Q){1&N&&(h.TgZ(0,"div",0),h._UZ(1,"object",1),h.ALo(2,"safe"),h.qZA(),h.TgZ(3,"div",2),h.TgZ(4,"button",3),h.NdJ("click",function(){return Q.close()}),h._uU(5," Cerrar "),h.qZA(),h.qZA()),2&N&&(h.xp6(1),h.Q6J("data",h.xi3(2,1,Q.data,"resourceUrl"),h.uOi))},directives:[re.lW],pipes:[P],styles:[""]}),W})();var t=K(3075),i=K(2722),v=K(4004),b=K(7579),A=K(9122),D=K(4880),k=K(9568),V=K(9808);const U=function(W){return{"background-color":W}};function I(W,q){if(1&W){const N=h.EpF();h.TgZ(0,"button",22),h.NdJ("click",function(){const le=h.CHM(N).$implicit;return h.oxw().openGuide(le.vc_url_flyer_web_megapunto)}),h._uU(1),h.qZA()}if(2&W){const N=q.$implicit;h.Akn(h.VKq(3,U,N.vc_hex_color)),h.xp6(1),h.hij(" ",N.vc_desc_corta_banco," ")}}const G=[{path:"",component:(()=>{class W{constructor(N,Q,ee,le,d){this.fb=N,this._fuseNavigationService=Q,this._fuseMediaWatcherService=ee,this._balanceService=le,this._matDialog=d,this._unsubscribeAll=new b.x}ngOnInit(){this._fuseMediaWatcherService.onMediaChange$.pipe((0,i.R)(this._unsubscribeAll)).subscribe(({matchingAliases:N})=>{this.isScreenSmall=!N.includes("md")}),this.getBanks(),this.initData(),this.getLastDepositDate(),this.initBalanceForm()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}initData(){this.balance$=this._balanceService.getBalance().pipe((0,v.U)(N=>N.nu_saldo))}getBanks(){this.banks$=this._balanceService.getBanks()}getLastDepositDate(){this.lastDepositDate$=this._balanceService.getLastDepositDate().pipe((0,v.U)(N=>N.dt_fec_operacion))}trackByFn(N,Q){return Q.id||N}toggleNavigation(N){const Q=this._fuseNavigationService.getComponent(N);Q&&Q.toggle()}openGuide(N){this._matDialog.open(m,{data:N,width:"90%",height:"90%"})}initBalanceForm(){this.balanceForm=this.fb.group({nu_id_comercio:["",t.kI.required],nu_id_tipo_moneda:["1",t.kI.required],nu_id_cta_cte:["",t.kI.required],ch_destino:["MX",t.kI.required],vc_nro_operacion:["",t.kI.required],nu_importe:["",t.kI.required],dt_fec_operacion:["",t.kI.required],vc_cadena_imagen:["",t.kI.required]})}}return W.\u0275fac=function(N){return new(N||W)(h.Y36(t.qu),h.Y36(A.Jf),h.Y36(D.T),h.Y36(k.m),h.Y36(ae.uw))},W.\u0275cmp=h.Xpm({type:W,selectors:[["balance"]],decls:41,vars:16,consts:[[1,"flex","flex-col","flex-auto","w-full",2,"background-color","#7c66f7"],[1,"flex-col","flex-auto","bg-card","relative","p-5","md:p-10",2,"border-top-left-radius","3rem !important","border-bottom-left-radius","3rem !important"],[1,"p-5","md:p-0"],["mat-icon-button","",1,"absolute","md:hidden","top-8","left-8",3,"click"],[3,"svgIcon"],[1,"ml-10","-mt-1.5","md:ml-0","md:mt-0","text-3xl","font-bold"],[1,"flex","flex-col","my-4","w-full","md:w-3/4"],[1,"min-h-40"],[1,"flex","items-center","mb-4"],[1,"text-lg","font-bold"],[1,"grid","grid-cols-1","sm:grid-cols-2","border-2","rounded-lg","p-2.5","sm:p-5"],[1,"flex","justify-center","items-center","px-3","py-1","border-2","shadow-sm","rounded-lg","w-full","sm:min-w-24","sm:max-w-60"],[1,"text-[#7c66f7]","font-bold","text-xl"],[1,"my-2","sm:mx-2"],[1,"block","font-semibold"],[1,"text-base","border-2","rounded-lg","min-h-40","mt-4","p-2.5","sm:p-5"],[1,"font-semibold","uppercase","tracking-wide"],[1,"w-1/6","border-[#7c66f7]","border-b-2","my-1"],[1,"mt-2","mb-4"],[1,"font-semibold"],[1,"grid","grid-cols-2","sm:grid-cols-4","lg:grid-cols-8","gap-2","lg:gap-1","mt-5","w-full"],["class","px-8 py-1 text-white rounded font-semibold w-28 mr-2",3,"style","click",4,"ngFor","ngForOf"],[1,"px-8","py-1","text-white","rounded","font-semibold","w-28","mr-2",3,"click"]],template:function(N,Q){1&N&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"div",2),h.TgZ(3,"button",3),h.NdJ("click",function(){return Q.toggleNavigation("mainNavigation")}),h._UZ(4,"mat-icon",4),h.qZA(),h.TgZ(5,"div",5),h._uU(6," Saldo "),h.qZA(),h.TgZ(7,"div",6),h.TgZ(8,"div",7),h.TgZ(9,"div",8),h.TgZ(10,"span",9),h._uU(11,"Tu saldo actual"),h.qZA(),h.qZA(),h.TgZ(12,"div",10),h.TgZ(13,"div",11),h.TgZ(14,"span",12),h._uU(15),h.ALo(16,"number"),h.ALo(17,"async"),h.qZA(),h.qZA(),h.TgZ(18,"div",13),h.TgZ(19,"span",14),h._uU(20,"\xdaltima fecha de tu recarga:"),h.qZA(),h.TgZ(21,"span"),h._uU(22),h.ALo(23,"date"),h.ALo(24,"async"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(25,"div",7),h.TgZ(26,"span",9),h._uU(27,"Informaci\xf3n de recargas"),h.qZA(),h.TgZ(28,"div",15),h.TgZ(29,"div",16),h._uU(30," \xbfQu\xe9 necesito para recargar mi saldo? "),h._UZ(31,"div",17),h.qZA(),h.TgZ(32,"div",18),h._uU(33," Tienes que depositar el monto que necesites a una de nuestra cuentas bancarias "),h.qZA(),h.TgZ(34,"div",19),h._uU(35," Nuestras cuentas bancarias "),h.qZA(),h.TgZ(36,"div"),h._uU(37," Puede realizar el dep\xf3sito en la cuenta que elijas: "),h.qZA(),h.TgZ(38,"div",20),h.YNc(39,I,2,5,"button",21),h.ALo(40,"async"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&N&&(h.xp6(4),h.Q6J("svgIcon","heroicons_outline:menu"),h.xp6(11),h.hij("S/ ",h.xi3(16,4,h.lcZ(17,7,Q.balance$),""),""),h.xp6(7),h.Oqu(h.xi3(23,9,h.lcZ(24,12,Q.lastDepositDate$),"dd/MM/yyyy")),h.xp6(17),h.Q6J("ngForOf",h.lcZ(40,14,Q.banks$)))},directives:[re.lW,e.Hw,V.sg],pipes:[V.JJ,V.Ov,V.uU],encapsulation:2,changeDetection:0}),W})()}];var L=K(7322),H=K(4107),y=K(7531),o=K(6036),a=K.t(o,2);K(2813),"undefined"==typeof window||(a.verbosity=o.VerbosityLevel.INFOS);let j=(()=>{class W{}return W.\u0275fac=function(N){return new(N||W)},W.\u0275mod=h.oAB({type:W}),W.\u0275inj=h.cJS({}),W})(),X=(()=>{class W{}return W.\u0275fac=function(N){return new(N||W)},W.\u0275mod=h.oAB({type:W}),W.\u0275inj=h.cJS({imports:[[ne.Bz.forChild(G),re.ot,te.vV,T.t,e.Ps,c.Tx,r.Cv,l.JX,f.p0,E.AV,u.X,s.m,L.lN,H.LD,y.c,ae.Is,_.A,j]]}),W})()},6036:function(module,__unused_webpack_exports,__webpack_require__){var _asyncToGenerator=__webpack_require__(8926).default,K;K=function(){return(()=>{"use strict";var __webpack_modules__=[,(oe,M,K)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.VerbosityLevel=M.Util=M.UnknownErrorException=M.UnexpectedResponseException=M.UNSUPPORTED_FEATURES=M.TextRenderingMode=M.StreamType=M.RenderingIntentFlag=M.PermissionFlag=M.PasswordResponses=M.PasswordException=M.PageActionEventType=M.OPS=M.MissingPDFException=M.IsLittleEndianCached=M.IsEvalSupportedCached=M.InvalidPDFException=M.ImageKind=M.IDENTITY_MATRIX=M.FormatError=M.FontType=M.FONT_IDENTITY_MATRIX=M.DocumentActionEventType=M.CMapCompressionType=M.BaseException=M.AnnotationType=M.AnnotationStateModelType=M.AnnotationReviewState=M.AnnotationReplyType=M.AnnotationMode=M.AnnotationMarkedState=M.AnnotationFlag=M.AnnotationFieldFlag=M.AnnotationBorderStyleType=M.AnnotationActionEventType=M.AbortException=void 0,M.arrayByteLength=q,M.arraysToBytes=function(ie){const Y=ie.length;if(1===Y&&ie[0]instanceof Uint8Array)return ie[0];let J=0;for(let be=0;be<Y;be++)J+=q(ie[be]);let de=0;const fe=new Uint8Array(J);for(let be=0;be<Y;be++){let Ae=ie[be];Ae instanceof Uint8Array||(Ae="string"==typeof Ae?W(Ae):new Uint8Array(Ae));const Le=Ae.byteLength;fe.set(Ae,de),de+=Le}return fe},M.assert=function(ie,Y){ie||L(Y)},M.bytesToString=function(ie){("object"!=typeof ie||null===ie||void 0===ie.length)&&L("Invalid argument for bytesToString");const Y=ie.length,J=8192;if(Y<J)return String.fromCharCode.apply(null,ie);const de=[];for(let fe=0;fe<Y;fe+=J){const be=Math.min(fe+J,Y),Ae=ie.subarray(fe,be);de.push(String.fromCharCode.apply(null,Ae))}return de.join("")},M.createPromiseCapability=function(){const ie=Object.create(null);let Y=!1;return Object.defineProperty(ie,"settled",{get:()=>Y}),ie.promise=new Promise(function(J,de){ie.resolve=function(fe){Y=!0,J(fe)},ie.reject=function(fe){Y=!0,de(fe)}}),ie},M.createValidAbsoluteUrl=function(ie,Y=null,J=null){if(!ie)return null;try{if(J&&"string"==typeof ie){if(J.addDefaultProtocol&&ie.startsWith("www.")){const fe=ie.match(/\./g);fe&&fe.length>=2&&(ie=`http://${ie}`)}if(J.tryConvertEncoding)try{ie=ve(ie)}catch(fe){}}const de=Y?new URL(ie,Y):new URL(ie);if(function(ie){if(!ie)return!1;switch(ie.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(de))return de}catch(de){}return null},M.escapeString=function(ie){return ie.replace(/([()\\\n\r])/g,Y=>"\n"===Y?"\\n":"\r"===Y?"\\r":`\\${Y}`)},M.getModificationDate=function(ie=new Date){return[ie.getUTCFullYear().toString(),(ie.getUTCMonth()+1).toString().padStart(2,"0"),ie.getUTCDate().toString().padStart(2,"0"),ie.getUTCHours().toString().padStart(2,"0"),ie.getUTCMinutes().toString().padStart(2,"0"),ie.getUTCSeconds().toString().padStart(2,"0")].join("")},M.getVerbosityLevel=function(){return V},M.info=function(ie){V>=v.INFOS&&console.log(`Info: ${ie}`)},M.isArrayBuffer=function(ie){return"object"==typeof ie&&null!==ie&&void 0!==ie.byteLength},M.isArrayEqual=function(ie,Y){if(ie.length!==Y.length)return!1;for(let J=0,de=ie.length;J<de;J++)if(ie[J]!==Y[J])return!1;return!0},M.isAscii=function(ie){return/^[\x00-\x7F]*$/.test(ie)},M.isSameOrigin=function(ie,Y){let J;try{if(J=new URL(ie),!J.origin||"null"===J.origin)return!1}catch(fe){return!1}const de=new URL(Y,J);return J.origin===de.origin},M.objectFromMap=function(ie){const Y=Object.create(null);for(const[J,de]of ie)Y[J]=de;return Y},M.objectSize=function(ie){return Object.keys(ie).length},M.setVerbosityLevel=function(ie){Number.isInteger(ie)&&(V=ie)},M.shadow=S,M.string32=function(ie){return String.fromCharCode(ie>>24&255,ie>>16&255,ie>>8&255,255&ie)},M.stringToBytes=W,M.stringToPDFString=function(ie){if(ie[0]>="\xef"){let J;if("\xfe"===ie[0]&&"\xff"===ie[1]?J="utf-16be":"\xff"===ie[0]&&"\xfe"===ie[1]?J="utf-16le":"\xef"===ie[0]&&"\xbb"===ie[1]&&"\xbf"===ie[2]&&(J="utf-8"),J)try{const de=new TextDecoder(J,{fatal:!0}),fe=W(ie);return de.decode(fe)}catch(de){G(`stringToPDFString: "${de}".`)}}const Y=[];for(let J=0,de=ie.length;J<de;J++){const fe=he[ie.charCodeAt(J)];Y.push(fe?String.fromCharCode(fe):ie.charAt(J))}return Y.join("")},M.stringToUTF16BEString=function(ie){const Y=["\xfe\xff"];for(let J=0,de=ie.length;J<de;J++){const fe=ie.charCodeAt(J);Y.push(String.fromCharCode(fe>>8&255),String.fromCharCode(255&fe))}return Y.join("")},M.stringToUTF8String=ve,M.unreachable=L,M.utf8StringToString=function(ie){return unescape(encodeURIComponent(ie))},M.warn=G,K(2),M.IDENTITY_MATRIX=[1,0,0,1,0,0],M.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],M.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},M.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},M.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},M.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},M.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},M.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},M.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},M.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},M.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},M.AnnotationReplyType={GROUP:"Group",REPLY:"R"},M.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},M.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},M.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},M.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},M.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},M.PageActionEventType={O:"PageOpen",C:"PageClose"},M.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},M.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const v={ERRORS:0,WARNINGS:1,INFOS:5};M.VerbosityLevel=v,M.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},M.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},M.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},M.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let V=v.WARNINGS;function G(ie){V>=v.WARNINGS&&console.log(`Warning: ${ie}`)}function L(ie){throw new Error(ie)}function S(ie,Y,J){return Object.defineProperty(ie,Y,{value:J,enumerable:!0,configurable:!0,writable:!1}),J}const g=function(){function Y(J,de){this.constructor===Y&&L("Cannot initialize BaseException."),this.message=J,this.name=de}return Y.prototype=new Error,Y.constructor=Y,Y}();function W(ie){"string"!=typeof ie&&L("Invalid argument for stringToBytes");const Y=ie.length,J=new Uint8Array(Y);for(let de=0;de<Y;++de)J[de]=255&ie.charCodeAt(de);return J}function q(ie){return void 0!==ie.length?ie.length:void 0!==ie.byteLength?ie.byteLength:void L("Invalid argument for arrayByteLength")}M.BaseException=g,M.PasswordException=class extends g{constructor(Y,J){super(Y,"PasswordException"),this.code=J}},M.UnknownErrorException=class extends g{constructor(Y,J){super(Y,"UnknownErrorException"),this.details=J}},M.InvalidPDFException=class extends g{constructor(Y){super(Y,"InvalidPDFException")}},M.MissingPDFException=class extends g{constructor(Y){super(Y,"MissingPDFException")}},M.UnexpectedResponseException=class extends g{constructor(Y,J){super(Y,"UnexpectedResponseException"),this.status=J}},M.FormatError=class extends g{constructor(Y){super(Y,"FormatError")}},M.AbortException=class extends g{constructor(Y){super(Y,"AbortException")}},M.IsLittleEndianCached={get value(){return S(this,"value",function(){const ie=new Uint8Array(4);return ie[0]=1,1===new Uint32Array(ie.buffer,0,1)[0]}())}},M.IsEvalSupportedCached={get value(){return S(this,"value",function(){try{return new Function(""),!0}catch(ie){return!1}}())}};const $=[...Array(256).keys()].map(ie=>ie.toString(16).padStart(2,"0"));class se{static makeHexColor(Y,J,de){return`#${$[Y]}${$[J]}${$[de]}`}static transform(Y,J){return[Y[0]*J[0]+Y[2]*J[1],Y[1]*J[0]+Y[3]*J[1],Y[0]*J[2]+Y[2]*J[3],Y[1]*J[2]+Y[3]*J[3],Y[0]*J[4]+Y[2]*J[5]+Y[4],Y[1]*J[4]+Y[3]*J[5]+Y[5]]}static applyTransform(Y,J){return[Y[0]*J[0]+Y[1]*J[2]+J[4],Y[0]*J[1]+Y[1]*J[3]+J[5]]}static applyInverseTransform(Y,J){const de=J[0]*J[3]-J[1]*J[2];return[(Y[0]*J[3]-Y[1]*J[2]+J[2]*J[5]-J[4]*J[3])/de,(-Y[0]*J[1]+Y[1]*J[0]+J[4]*J[1]-J[5]*J[0])/de]}static getAxialAlignedBoundingBox(Y,J){const de=se.applyTransform(Y,J),fe=se.applyTransform(Y.slice(2,4),J),be=se.applyTransform([Y[0],Y[3]],J),Ae=se.applyTransform([Y[2],Y[1]],J);return[Math.min(de[0],fe[0],be[0],Ae[0]),Math.min(de[1],fe[1],be[1],Ae[1]),Math.max(de[0],fe[0],be[0],Ae[0]),Math.max(de[1],fe[1],be[1],Ae[1])]}static inverseTransform(Y){const J=Y[0]*Y[3]-Y[1]*Y[2];return[Y[3]/J,-Y[1]/J,-Y[2]/J,Y[0]/J,(Y[2]*Y[5]-Y[4]*Y[3])/J,(Y[4]*Y[1]-Y[5]*Y[0])/J]}static apply3dTransform(Y,J){return[Y[0]*J[0]+Y[1]*J[1]+Y[2]*J[2],Y[3]*J[0]+Y[4]*J[1]+Y[5]*J[2],Y[6]*J[0]+Y[7]*J[1]+Y[8]*J[2]]}static singularValueDecompose2dScale(Y){const J=[Y[0],Y[2],Y[1],Y[3]],de=Y[0]*J[0]+Y[1]*J[2],Ae=Y[2]*J[1]+Y[3]*J[3],Le=(de+Ae)/2,Fe=Math.sqrt((de+Ae)**2-4*(de*Ae-(Y[2]*J[0]+Y[3]*J[2])*(Y[0]*J[1]+Y[1]*J[3])))/2,Te=Le-Fe||1;return[Math.sqrt(Le+Fe||1),Math.sqrt(Te)]}static normalizeRect(Y){const J=Y.slice(0);return Y[0]>Y[2]&&(J[0]=Y[2],J[2]=Y[0]),Y[1]>Y[3]&&(J[1]=Y[3],J[3]=Y[1]),J}static intersect(Y,J){function de(Le,Fe){return Le-Fe}const fe=[Y[0],Y[2],J[0],J[2]].sort(de),be=[Y[1],Y[3],J[1],J[3]].sort(de),Ae=[];return Y=se.normalizeRect(Y),J=se.normalizeRect(J),fe[0]===Y[0]&&fe[1]===J[0]||fe[0]===J[0]&&fe[1]===Y[0]?(Ae[0]=fe[1],Ae[2]=fe[2],be[0]===Y[1]&&be[1]===J[1]||be[0]===J[1]&&be[1]===Y[1]?(Ae[1]=be[1],Ae[3]=be[2],Ae):null):null}static bezierBoundingBox(Y,J,de,fe,be,Ae,Le,Fe){const Re=[],Te=[[],[]];let De,Oe,Ie,we,Ve,Ue,He,Ge;for(let ze=0;ze<2;++ze)if(0===ze?(Oe=6*Y-12*de+6*be,De=-3*Y+9*de-9*be+3*Le,Ie=3*de-3*Y):(Oe=6*J-12*fe+6*Ae,De=-3*J+9*fe-9*Ae+3*Fe,Ie=3*fe-3*J),Math.abs(De)<1e-12){if(Math.abs(Oe)<1e-12)continue;we=-Ie/Oe,0<we&&we<1&&Re.push(we)}else He=Oe*Oe-4*Ie*De,Ge=Math.sqrt(He),!(He<0)&&(Ve=(-Oe+Ge)/(2*De),0<Ve&&Ve<1&&Re.push(Ve),Ue=(-Oe-Ge)/(2*De),0<Ue&&Ue<1&&Re.push(Ue));let ke,Ne=Re.length;const Be=Ne;for(;Ne--;)we=Re[Ne],ke=1-we,Te[0][Ne]=ke*ke*ke*Y+3*ke*ke*we*de+3*ke*we*we*be+we*we*we*Le,Te[1][Ne]=ke*ke*ke*J+3*ke*ke*we*fe+3*ke*we*we*Ae+we*we*we*Fe;return Te[0][Be]=Y,Te[1][Be]=J,Te[0][Be+1]=Le,Te[1][Be+1]=Fe,Te[0].length=Te[1].length=Be+2,[Math.min(...Te[0]),Math.min(...Te[1]),Math.max(...Te[0]),Math.max(...Te[1])]}}M.Util=se;const he=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ve(ie){return decodeURIComponent(escape(ie))}},(oe,M,K)=>{K(3)},(oe,M)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.isNodeJS=void 0;const K=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);M.isNodeJS=K},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var oe,M,K,_,ae,ne,re,Ke;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_node_utils=__w_pdfjs_require__(8),_annotation_storage=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(12),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(13),_metadata=__w_pdfjs_require__(14),_optional_content_config=__w_pdfjs_require__(15),_transport_stream=__w_pdfjs_require__(16),_xfa_text=__w_pdfjs_require__(17);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultStandardFontDataFactory=_is_node.isNodeJS?_node_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;let createPDFNetworkStream;function setPDFNetworkStreamFactory(T){createPDFNetworkStream=T}function getDocument(T){const e=new PDFDocumentLoadingTask;let c;if("string"==typeof T||T instanceof URL)c={url:T};else if((0,_util.isArrayBuffer)(T))c={data:T};else if(T instanceof PDFDataRangeTransport)c={range:T};else{if("object"!=typeof T)throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!T.url&&!T.data&&!T.range)throw new Error("Invalid parameter object: need either .data, .range or .url");c=T}const r=Object.create(null);let l=null,f=null;for(const u in c){const s=c[u];switch(u){case"url":if("undefined"!=typeof window)try{r[u]=new URL(s,window.location).href;continue}catch(h){(0,_util.warn)(`Cannot create valid URL: "${h}".`)}else if("string"==typeof s||s instanceof URL){r[u]=s.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":l=s;continue;case"worker":f=s;continue;case"data":if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&s instanceof Buffer)r[u]=new Uint8Array(s);else{if(s instanceof Uint8Array)break;if("string"==typeof s)r[u]=(0,_util.stringToBytes)(s);else if("object"!=typeof s||null===s||isNaN(s.length)){if(!(0,_util.isArrayBuffer)(s))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");r[u]=new Uint8Array(s)}else r[u]=new Uint8Array(s)}continue}r[u]=s}if(r.rangeChunkSize=r.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,r.CMapReaderFactory=r.CMapReaderFactory||DefaultCMapReaderFactory,r.StandardFontDataFactory=r.StandardFontDataFactory||DefaultStandardFontDataFactory,r.ignoreErrors=!0!==r.stopAtErrors,r.fontExtraProperties=!0===r.fontExtraProperties,r.pdfBug=!0===r.pdfBug,r.enableXfa=!0===r.enableXfa,("string"!=typeof r.docBaseUrl||(0,_display_utils.isDataScheme)(r.docBaseUrl))&&(r.docBaseUrl=null),Number.isInteger(r.maxImageSize)||(r.maxImageSize=-1),"boolean"!=typeof r.useWorkerFetch&&(r.useWorkerFetch=r.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&r.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof r.isEvalSupported&&(r.isEvalSupported=!0),"boolean"!=typeof r.disableFontFace&&(r.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof r.useSystemFonts&&(r.useSystemFonts=!_is_node.isNodeJS&&!r.disableFontFace),void 0===r.ownerDocument&&(r.ownerDocument=globalThis.document),"boolean"!=typeof r.disableRange&&(r.disableRange=!1),"boolean"!=typeof r.disableStream&&(r.disableStream=!1),"boolean"!=typeof r.disableAutoFetch&&(r.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(r.verbosity),!f){const u={verbosity:r.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};f=u.port?PDFWorker.fromPort(u):new PDFWorker(u),e._worker=f}const E=e.docId;return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const u=_fetchDocument(f,r,l,E),s=new Promise(function(h){let F;l?F=new _transport_stream.PDFDataTransportStream({length:r.length,initialData:r.initialData,progressiveDone:r.progressiveDone,contentDispositionFilename:r.contentDispositionFilename,disableRange:r.disableRange,disableStream:r.disableStream},l):r.data||(F=createPDFNetworkStream({url:r.url,length:r.length,httpHeaders:r.httpHeaders,withCredentials:r.withCredentials,rangeChunkSize:r.rangeChunkSize,disableRange:r.disableRange,disableStream:r.disableStream})),h(F)});return Promise.all([u,s]).then(function([h,F]){if(e.destroyed)throw new Error("Loading aborted");const P=new _message_handler.MessageHandler(E,h,f.port),m=new WorkerTransport(P,e,F,r);e._transport=m,P.send("Ready",null)})}).catch(e._capability.reject),e}function _fetchDocument(T,e,c,r){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(T,e,c,r){if(T.destroyed)throw new Error("Worker was destroyed");c&&(e.length=c.length,e.initialData=c.initialData,e.progressiveDone=c.progressiveDone,e.contentDispositionFilename=c.contentDispositionFilename);const l=yield T.messageHandler.sendWithPromise("GetDocRequest",{docId:r,apiVersion:"2.13.216",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,docBaseUrl:e.docBaseUrl,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties,enableXfa:e.enableXfa,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null});if(T.destroyed)throw new Error("Worker was destroyed");return l})).apply(this,arguments)}exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;class PDFDocumentLoadingTask{static get idCounters(){return(0,_util.shadow)(this,"idCounters",{doc:0})}constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+PDFDocumentLoadingTask.idCounters.doc++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){var e=this;return _asyncToGenerator(function*(){var c;e.destroyed=!0,yield null==(c=e._transport)?void 0:c.destroy(),e._transport=null,e._worker&&(e._worker.destroy(),e._worker=null)})()}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,c,r=!1,l=null){this.length=e,this.initialData=c,this.progressiveDone=r,this.contentDispositionFilename=l,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,c){for(const r of this._rangeListeners)r(e,c)}onDataProgress(e,c){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(e,c)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const c of this._progressiveReadListeners)c(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,c){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,c){var l,r=this;this._pdfInfo=e,this._transport=c,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:(l=_asyncToGenerator(function*(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),r.stats||{streamTypes:{},fontTypes:{}}}),function(){return l.apply(this,arguments)})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,c,r,l,f=!1){this._pageIndex=e,this._pageInfo=c,this._ownerDocument=l,this._transport=r,this._stats=f?new _display_utils.StatTimer:null,this._pdfBug=f,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:c=this.rotate,offsetX:r=0,offsetY:l=0,dontFlip:f=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:c,offsetX:r,offsetY:l,dontFlip:f})}getAnnotations({intent:e="display"}={}){const c=this._transport.getRenderingIntent(e);let r=this._annotationPromises.get(c.cacheKey);return r||(r=this._transport.getAnnotations(this._pageIndex,c.renderingIntent),this._annotationPromises.set(c.cacheKey,r),r=r.then(l=>{for(const f of l)void 0!==f.titleObj&&Object.defineProperty(f,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),f.titleObj.str)}),void 0!==f.contentsObj&&Object.defineProperty(f,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),f.contentsObj.str)});return l})),r}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}getXfa(){var e=this;return _asyncToGenerator(function*(){var c;return(null==(c=e._transport._htmlForXfa)?void 0:c.children[e._pageIndex])||null})()}render({canvasContext:e,viewport:c,intent:r="display",annotationMode:l=_util.AnnotationMode.ENABLE,transform:f=null,imageLayer:E=null,canvasFactory:u=null,background:s=null,optionalContentConfigPromise:h=null,annotationCanvasMap:F=null}){var D,k;void 0!==(null==(D=arguments[0])?void 0:D.renderInteractiveForms)&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&l===_util.AnnotationMode.ENABLE&&(l=_util.AnnotationMode.ENABLE_FORMS)),void 0!==(null==(k=arguments[0])?void 0:k.includeAnnotationStorage)&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&l===_util.AnnotationMode.ENABLE&&(l=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const P=this._transport.getRenderingIntent(r,l);this.pendingCleanup=!1,h||(h=this._transport.getOptionalContentConfig());let m=this._intentStates.get(P.cacheKey);m||(m=Object.create(null),this._intentStates.set(P.cacheKey,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const t=u||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),i=!!(P.renderingIntent&_util.RenderingIntentFlag.PRINT);m.displayReadyCapability||(m.displayReadyCapability=(0,_util.createPromiseCapability)(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(P));const v=V=>{m.renderTasks.delete(b),(this.cleanupAfterRender||i)&&(this.pendingCleanup=!0),this._tryCleanup(),V?(b.capability.reject(V),this._abortOperatorList({intentState:m,reason:V instanceof Error?V:new Error(V)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},b=new InternalRenderTask({callback:v,params:{canvasContext:e,viewport:c,transform:f,imageLayer:E,background:s},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:F,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:t,useRequestAnimationFrame:!i,pdfBug:this._pdfBug});(m.renderTasks||(m.renderTasks=new Set)).add(b);const A=b.task;return Promise.all([m.displayReadyCapability.promise,h]).then(([V,U])=>{this.pendingCleanup?v():(this._stats&&this._stats.time("Rendering"),b.initializeGraphics({transparency:V,optionalContentConfig:U}),b.operatorListChanged())}).catch(v),A}getOperatorList({intent:e="display",annotationMode:c=_util.AnnotationMode.ENABLE}={}){const l=this._transport.getRenderingIntent(e,c,!0);let E,f=this._intentStates.get(l.cacheKey);return f||(f=Object.create(null),this._intentStates.set(l.cacheKey,f)),f.opListReadCapability||(E=Object.create(null),E.operatorListChanged=function(){f.operatorList.lastChunk&&(f.opListReadCapability.resolve(f.operatorList),f.renderTasks.delete(E))},f.opListReadCapability=(0,_util.createPromiseCapability)(),(f.renderTasks||(f.renderTasks=new Set)).add(E),f.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(l)),f.opListReadCapability.promise}streamTextContent({disableCombineTextItems:e=!1,includeMarkedContent:c=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==e,includeMarkedContent:!0===c},{highWaterMark:100,size:l=>l.items.length})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>_xfa_text.XfaText.textContent(r));const c=this.streamTextContent(e);return new Promise(function(r,l){const E=c.getReader(),u={items:[],styles:Object.create(null)};!function f(){E.read().then(function({value:s,done:h}){h?r(u):(Object.assign(u.styles,s.styles),u.items.push(...s.items),f())},l)}()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const e=[];for(const c of this._intentStates.values())if(this._abortOperatorList({intentState:c,reason:new Error("Page was destroyed."),force:!0}),!c.opListReadCapability)for(const r of c.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(e)}cleanup(e=!1){return this.pendingCleanup=!0,this._tryCleanup(e)}_tryCleanup(e=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:c,operatorList:r}of this._intentStates.values())if(c.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,e&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(e,c){const r=this._intentStates.get(c);!r||(this._stats&&this._stats.timeEnd("Page Request"),r.displayReadyCapability&&r.displayReadyCapability.resolve(e))}_renderPageChunk(e,c){for(let r=0,l=e.length;r<l;r++)c.operatorList.fnArray.push(e.fnArray[r]),c.operatorList.argsArray.push(e.argsArray[r]);c.operatorList.lastChunk=e.lastChunk;for(const r of c.renderTasks)r.operatorListChanged();e.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:e,cacheKey:c}){const l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:c,annotationStorage:e&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),f=this._intentStates.get(c);f.streamReader=l;const E=()=>{l.read().then(({value:u,done:s})=>{s?f.streamReader=null:this._transport.destroyed||(this._renderPageChunk(u,f),E())},u=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const s of f.renderTasks)s.operatorListChanged();this._tryCleanup()}if(f.displayReadyCapability)f.displayReadyCapability.reject(u);else{if(!f.opListReadCapability)throw u;f.opListReadCapability.reject(u)}}})};E()}_abortOperatorList({intentState:e,reason:c,force:r=!1}){if(e.streamReader){if(!r){if(e.renderTasks.size>0)return;if(c instanceof _display_utils.RenderingCancelledException)return void(e.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:e,reason:c,force:!0}),e.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(e.streamReader.cancel(new _util.AbortException(c.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[l,f]of this._intentStates)if(f===e){this._intentStates.delete(l);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(e,c){const r={data:structuredClone(e,c)};this._deferred.then(()=>{for(const l of this._listeners)l.call(this,r)})}addEventListener(e,c){this._listeners.push(c)}removeEventListener(e,c){const r=this._listeners.indexOf(c);this._listeners.splice(r,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const T=null==(oe=null==document?void 0:document.currentScript)?void 0:oe.src;T&&(PDFWorkerUtil.fallbackWorkerSrc=T.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.createCDNWrapper=function(T){return URL.createObjectURL(new Blob([`importScripts("${T}");`]))};class PDFWorker{static get _workerPorts(){return(0,_util.shadow)(this,"_workerPorts",new WeakMap)}constructor({name:T=null,port:e=null,verbosity:c=(0,_util.getVerbosityLevel)()}={}){if(e&&PDFWorker._workerPorts.has(e))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=T,this.destroyed=!1,this.verbosity=c,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e)return PDFWorker._workerPorts.set(e,this),void this._initializeFromPort(e);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(T){this._port=T,this._messageHandler=new _message_handler.MessageHandler("main","worker",T),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if("undefined"!=typeof Worker&&!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let T=PDFWorker.workerSrc;try{(0,_util.isSameOrigin)(window.location.href,T)||(T=PDFWorkerUtil.createCDNWrapper(new URL(T,window.location).href));const e=new Worker(T),c=new _message_handler.MessageHandler("main","worker",e),r=()=>{e.removeEventListener("error",l),c.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},l=()=>{this._webWorker||r()};e.addEventListener("error",l),c.on("test",E=>{e.removeEventListener("error",l),this.destroyed?r():E?(this._messageHandler=c,this._port=e,this._webWorker=e,this._readyCapability.resolve(),c.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),c.destroy(),e.terminate())}),c.on("ready",E=>{if(e.removeEventListener("error",l),this.destroyed)r();else try{f()}catch(u){this._setupFakeWorker()}});const f=()=>{const E=new Uint8Array([255]);try{c.send("test",E,[E.buffer])}catch(u){(0,_util.warn)("Cannot use postMessage transfers."),E[0]=0,c.send("test",E)}};return void f()}catch(e){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(T=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const e=new LoopbackPort;this._port=e;const c="fake"+PDFWorkerUtil.fakeWorkerId++,r=new _message_handler.MessageHandler(c+"_worker",c,e);T.setup(r,e);const l=new _message_handler.MessageHandler(c,c+"_worker",e);this._messageHandler=l,this._readyCapability.resolve(),l.send("configure",{verbosity:this.verbosity})}).catch(T=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${T.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker._workerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(T){if(!(null==T?void 0:T.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return this._workerPorts.has(T.port)?this._workerPorts.get(T.port):new PDFWorker(T)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var T;try{return(null==(T=globalThis.pdfjsWorker)?void 0:T.WorkerMessageHandler)||null}catch(e){return null}}static get _setupFakeWorkerGlobal(){var _this4=this;const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this4._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this4.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this4.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function(){return _ref2.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(e,c,r,l){ye(this,M,null),ye(this,K,new Map),ye(this,_,new Map),ye(this,ae,null),this.messageHandler=e,this.loadingTask=c,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:c.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:l.ownerDocument,styleElement:l.styleElement}),this._params=l,l.useWorkerFetch||(this.CMapReaderFactory=new l.CMapReaderFactory({baseUrl:l.cMapUrl,isCompressed:l.cMapPacked}),this.StandardFontDataFactory=new l.StandardFontDataFactory({baseUrl:l.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return ue(this,M)}getRenderingIntent(e,c=_util.AnnotationMode.ENABLE,r=!1){let l=_util.RenderingIntentFlag.DISPLAY,f="";switch(e){case"any":l=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":l=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(c){case _util.AnnotationMode.DISABLE:l+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:l+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:l+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,f=this.annotationStorage.lastModified;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${c}`)}return r&&(l+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:l,cacheKey:`${l}_${f}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of ue(this,K).values())e.push(r._destroy());ue(this,K).clear(),ue(this,_).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const c=this.messageHandler.sendWithPromise("Terminate",null);return e.push(c),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),Pe(this,ae,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:c}=this;e.on("GetReader",(r,l)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=f=>{this._lastProgress={loaded:f.loaded,total:f.total}},l.onPull=()=>{this._fullReader.read().then(function({value:f,done:E}){E?l.close():((0,_util.assert)((0,_util.isArrayBuffer)(f),"GetReader - expected an ArrayBuffer."),l.enqueue(new Uint8Array(f),1,[f]))}).catch(f=>{l.error(f)})},l.onCancel=f=>{this._fullReader.cancel(f),l.ready.catch(E=>{if(!this.destroyed)throw E})}}),e.on("ReaderHeadersReady",r=>{const l=(0,_util.createPromiseCapability)(),f=this._fullReader;return f.headersReady.then(()=>{var E;(!f.isStreamingSupported||!f.isRangeSupported)&&(this._lastProgress&&(null==(E=c.onProgress)||E.call(c,this._lastProgress)),f.onProgress=u=>{var s;null==(s=c.onProgress)||s.call(c,{loaded:u.loaded,total:u.total})}),l.resolve({isStreamingSupported:f.isStreamingSupported,isRangeSupported:f.isRangeSupported,contentLength:f.contentLength})},l.reject),l.promise}),e.on("GetRangeReader",(r,l)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const f=this._networkStream.getRangeReader(r.begin,r.end);f?(l.onPull=()=>{f.read().then(function({value:E,done:u}){u?l.close():((0,_util.assert)((0,_util.isArrayBuffer)(E),"GetRangeReader - expected an ArrayBuffer."),l.enqueue(new Uint8Array(E),1,[E]))}).catch(E=>{l.error(E)})},l.onCancel=E=>{f.cancel(E),l.ready.catch(u=>{if(!this.destroyed)throw u})}):l.close()}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,c._capability.resolve(new PDFDocumentProxy(r,this))}),e.on("DocException",function(r){let l;switch(r.name){case"PasswordException":l=new _util.PasswordException(r.message,r.code);break;case"InvalidPDFException":l=new _util.InvalidPDFException(r.message);break;case"MissingPDFException":l=new _util.MissingPDFException(r.message);break;case"UnexpectedResponseException":l=new _util.UnexpectedResponseException(r.message,r.status);break;case"UnknownErrorException":l=new _util.UnknownErrorException(r.message,r.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}c._capability.reject(l)}),e.on("PasswordRequest",r=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),c.onPassword){const l=f=>{f instanceof Error?this._passwordCapability.reject(f):this._passwordCapability.resolve({password:f})};try{c.onPassword(l,r.code)}catch(f){this._passwordCapability.reject(f)}}else this._passwordCapability.reject(new _util.PasswordException(r.message,r.code));return this._passwordCapability.promise}),e.on("DataLoaded",r=>{var l;null==(l=c.onProgress)||l.call(c,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{this.destroyed||ue(this,K).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,l,f])=>{var E;if(!this.destroyed&&!this.commonObjs.has(r))switch(l){case"Font":const u=this._params;if("error"in f){const F=f.error;(0,_util.warn)(`Error during font loading: ${F}`),this.commonObjs.resolve(r,F);break}let s=null;u.pdfBug&&(null==(E=globalThis.FontInspector)?void 0:E.enabled)&&(s={registerFont(F,P){globalThis.FontInspector.fontAdded(F,P)}});const h=new _font_loader.FontFaceObject(f,{isEvalSupported:u.isEvalSupported,disableFontFace:u.disableFontFace,ignoreErrors:u.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:s});this.fontLoader.bind(h).catch(F=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!u.fontExtraProperties&&h.data&&(h.data=null),this.commonObjs.resolve(r,h)});break;case"FontPath":case"Image":this.commonObjs.resolve(r,f);break;default:throw new Error(`Got unknown common object type ${l}`)}}),e.on("obj",([r,l,f,E])=>{var s;if(this.destroyed)return;const u=ue(this,K).get(l);if(!u.objs.has(r))switch(f){case"Image":u.objs.resolve(r,E),(null==(s=null==E?void 0:E.data)?void 0:s.length)>8e6&&(u.cleanupAfterRender=!0);break;case"Pattern":u.objs.resolve(r,E);break;default:throw new Error(`Got unknown object type ${f}`)}}),e.on("DocProgress",r=>{var l;this.destroyed||null==(l=c.onProgress)||l.call(c,{loaded:r.loaded,total:r.total})}),e.on("DocStats",r=>{this.destroyed||Pe(this,M,Object.freeze({streamTypes:Object.freeze(r.streamTypes),fontTypes:Object.freeze(r.fontTypes)}))}),e.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),e.on("FetchBuiltInCMap",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:e}){var c,r;this.destroyed||null==(r=(c=this.loadingTask).onUnsupportedFeature)||r.call(c,e)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const c=e-1,r=ue(this,_).get(c);if(r)return r;const l=this.messageHandler.sendWithPromise("GetPage",{pageIndex:c}).then(f=>{if(this.destroyed)throw new Error("Transport destroyed");const E=new PDFPageProxy(c,f,this,this._params.ownerDocument,this._params.pdfBug);return ue(this,K).set(c,E),E});return ue(this,_).set(c,l),l}getPageIndex(e){return"object"!=typeof e||null===e||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,c){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:c})}saveDocument(){var e,c;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:null!=(c=null==(e=this._fullReader)?void 0:e.filename)?c:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return ue(this,ae)||Pe(this,ae,this.messageHandler.sendWithPromise("GetMetadata",null).then(e=>{var c,r,l,f;return{info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:null!=(r=null==(c=this._fullReader)?void 0:c.filename)?r:null,contentLength:null!=(f=null==(l=this._fullReader)?void 0:l.contentLength)?f:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(e=!1){var c=this;return _asyncToGenerator(function*(){if(yield c.messageHandler.sendWithPromise("Cleanup",null),!c.destroyed){for(const r of ue(c,K).values())if(!r.cleanup())throw new Error(`startCleanup: Page ${r.pageNumber} is currently rendering.`);c.commonObjs.clear(),e||c.fontLoader.clear(),Pe(c,ae,null),c._getFieldObjectsPromise=null,c._hasJSActionsPromise=null}})()}get loadingParams(){const e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,enableXfa:e.enableXfa})}}M=new WeakMap,K=new WeakMap,_=new WeakMap,ae=new WeakMap;class PDFObjects{constructor(){ye(this,re),ye(this,ne,Object.create(null))}get(e,c=null){if(c){const l=xe(this,re,Ke).call(this,e);return l.capability.promise.then(()=>c(l.data)),null}const r=ue(this,ne)[e];if(!(null==r?void 0:r.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const c=ue(this,ne)[e];return(null==c?void 0:c.capability.settled)||!1}resolve(e,c=null){const r=xe(this,re,Ke).call(this,e);r.data=c,r.capability.resolve()}clear(){Pe(this,ne,Object.create(null))}}ne=new WeakMap,re=new WeakSet,Ke=function(e){return ue(this,ne)[e]||(ue(this,ne)[e]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(e){this._internalRenderTask=e,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;class InternalRenderTask{static get canvasInUse(){return(0,_util.shadow)(this,"canvasInUse",new WeakSet)}constructor({callback:e,params:c,objs:r,commonObjs:l,annotationCanvasMap:f,operatorList:E,pageIndex:u,canvasFactory:s,useRequestAnimationFrame:h=!1,pdfBug:F=!1}){this.callback=e,this.params=c,this.objs=r,this.commonObjs=l,this.annotationCanvasMap=f,this.operatorListIdx=null,this.operatorList=E,this._pageIndex=u,this.canvasFactory=s,this._pdfBug=F,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===h&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=c.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:c}){var s;if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.canvasInUse.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.canvasInUse.add(this._canvas)}this._pdfBug&&(null==(s=globalThis.StepperManager)?void 0:s.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:l,transform:f,imageLayer:E,background:u}=this.params;this.gfx=new _canvas.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,E,c,this.annotationCanvasMap),this.gfx.beginDrawing({transform:f,viewport:l,transparency:e,background:u}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(e=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&InternalRenderTask.canvasInUse.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var e=this;return _asyncToGenerator(function*(){e.cancelled||(e.operatorListIdx=e.gfx.executeOperatorList(e.operatorList,e.operatorListIdx,e._continueBound,e.stepper),e.operatorListIdx===e.operatorList.argsArray.length&&(e.running=!1,e.operatorList.lastChunk&&(e.gfx.endDrawing(),e._canvas&&InternalRenderTask.canvasInUse.delete(e._canvas),e.callback())))})()}}const version="2.13.216";exports.version=version;const build="399a0ec60";exports.build=build},(oe,M,K)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.StatTimer=M.RenderingCancelledException=M.PixelsPerInch=M.PageViewport=M.PDFDateString=M.DOMStandardFontDataFactory=M.DOMSVGFactory=M.DOMCanvasFactory=M.DOMCMapReaderFactory=void 0,M.deprecated=function(k){console.log("Deprecated API usage: "+k)},M.getFilenameFromUrl=function(k){const V=k.indexOf("#"),U=k.indexOf("?"),I=Math.min(V>0?V:k.length,U>0?U:k.length);return k.substring(k.lastIndexOf("/",I)+1,I)},M.getPdfFilenameFromUrl=function(k,V="document.pdf"){if("string"!=typeof k)return V;if(u(k))return(0,ae.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),V;const I=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,O=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(k);let G=I.exec(O[1])||I.exec(O[2])||I.exec(O[3]);if(G&&(G=G[0],G.includes("%")))try{G=I.exec(decodeURIComponent(G))[0]}catch(L){}return G||V},M.getXfaPageViewport=function(k,{scale:V=1,rotation:U=0}){const{width:I,height:O}=k.attributes.style,G=[0,0,parseInt(I),parseInt(O)];return new f({viewBox:G,scale:V,rotation:U})},M.isDataScheme=u,M.isPdfFile=function(k){return"string"==typeof k&&/\.pdf$/i.test(k)},M.isValidFetchUrl=m,M.loadScript=function(k,V=!1){return new Promise((U,I)=>{const O=document.createElement("script");O.src=k,O.onload=function(G){V&&O.remove(),U(G)},O.onerror=function(){I(new Error(`Cannot load script at: ${O.src}`))},(document.head||document.documentElement).appendChild(O)})};var _=K(6),ae=K(1);const D=class{};let v,re=D;function T(k){return e.apply(this,arguments)}function e(){return(e=_asyncToGenerator(function*(k,V=!1){if(m(k,document.baseURI)){const U=yield fetch(k);if(!U.ok)throw new Error(U.statusText);return V?new Uint8Array(yield U.arrayBuffer()):(0,ae.stringToBytes)(yield U.text())}return new Promise((U,I)=>{const O=new XMLHttpRequest;O.open("GET",k,!0),V&&(O.responseType="arraybuffer"),O.onreadystatechange=()=>{if(O.readyState===XMLHttpRequest.DONE){if(200===O.status||0===O.status){let G;if(V&&O.response?G=new Uint8Array(O.response):!V&&O.responseText&&(G=(0,ae.stringToBytes)(O.responseText)),G)return void U(G)}I(new Error(O.statusText))}},O.send(null)})})).apply(this,arguments)}je(re,"CSS",96),je(re,"PDF",72),je(re,"PDF_TO_CSS_UNITS",D.CSS/D.PDF),M.PixelsPerInch=re,M.DOMCanvasFactory=class extends _.BaseCanvasFactory{constructor({ownerDocument:V=globalThis.document}={}){super(),this._document=V}_createCanvas(V,U){const I=this._document.createElement("canvas");return I.width=V,I.height=U,I}},M.DOMCMapReaderFactory=class extends _.BaseCMapReaderFactory{_fetchData(V,U){return T(V,this.isCompressed).then(I=>({cMapData:I,compressionType:U}))}},M.DOMStandardFontDataFactory=class extends _.BaseStandardFontDataFactory{_fetchData(V){return T(V,!0)}},M.DOMSVGFactory=class extends _.BaseSVGFactory{_createSVG(V){return document.createElementNS("http://www.w3.org/2000/svg",V)}};class f{constructor({viewBox:V,scale:U,rotation:I,offsetX:O=0,offsetY:G=0,dontFlip:L=!1}){this.viewBox=V,this.scale=U,this.rotation=I,this.offsetX=O,this.offsetY=G;const H=(V[2]+V[0])/2,y=(V[3]+V[1])/2;let o,a,S,g,x,n,C,w;switch((I%=360)<0&&(I+=360),I){case 180:o=-1,a=0,S=0,g=1;break;case 90:o=0,a=1,S=1,g=0;break;case 270:o=0,a=-1,S=-1,g=0;break;case 0:o=1,a=0,S=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}L&&(S=-S,g=-g),0===o?(x=Math.abs(y-V[1])*U+O,n=Math.abs(H-V[0])*U+G,C=Math.abs(V[3]-V[1])*U,w=Math.abs(V[2]-V[0])*U):(x=Math.abs(H-V[0])*U+O,n=Math.abs(y-V[1])*U+G,C=Math.abs(V[2]-V[0])*U,w=Math.abs(V[3]-V[1])*U),this.transform=[o*U,a*U,S*U,g*U,x-o*U*H-S*U*y,n-a*U*H-g*U*y],this.width=C,this.height=w}clone({scale:V=this.scale,rotation:U=this.rotation,offsetX:I=this.offsetX,offsetY:O=this.offsetY,dontFlip:G=!1}={}){return new f({viewBox:this.viewBox.slice(),scale:V,rotation:U,offsetX:I,offsetY:O,dontFlip:G})}convertToViewportPoint(V,U){return ae.Util.applyTransform([V,U],this.transform)}convertToViewportRectangle(V){const U=ae.Util.applyTransform([V[0],V[1]],this.transform),I=ae.Util.applyTransform([V[2],V[3]],this.transform);return[U[0],U[1],I[0],I[1]]}convertToPdfPoint(V,U){return ae.Util.applyInverseTransform([V,U],this.transform)}}function u(k){const V=k.length;let U=0;for(;U<V&&""===k[U].trim();)U++;return"data:"===k.substring(U,U+5).toLowerCase()}function m(k,V){try{const{protocol:U}=V?new URL(k,V):new URL(k);return"http:"===U||"https:"===U}catch(U){return!1}}M.PageViewport=f,M.RenderingCancelledException=class extends ae.BaseException{constructor(V,U){super(V,"RenderingCancelledException"),this.type=U}},M.StatTimer=class{constructor(){this.started=Object.create(null),this.times=[]}time(V){V in this.started&&(0,ae.warn)(`Timer is already running for ${V}`),this.started[V]=Date.now()}timeEnd(V){V in this.started||(0,ae.warn)(`Timer has not been started for ${V}`),this.times.push({name:V,start:this.started[V],end:Date.now()}),delete this.started[V]}toString(){const V=[];let U=0;for(const I of this.times){const O=I.name;O.length>U&&(U=O.length)}for(const I of this.times){const O=I.end-I.start;V.push(`${I.name.padEnd(U)} ${O}ms\n`)}return V.join("")}},M.PDFDateString=class{static toDateObject(V){if(!V||"string"!=typeof V)return null;v||(v=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const U=v.exec(V);if(!U)return null;const I=parseInt(U[1],10);let O=parseInt(U[2],10);O=O>=1&&O<=12?O-1:0;let G=parseInt(U[3],10);G=G>=1&&G<=31?G:1;let L=parseInt(U[4],10);L=L>=0&&L<=23?L:0;let H=parseInt(U[5],10);H=H>=0&&H<=59?H:0;let y=parseInt(U[6],10);y=y>=0&&y<=59?y:0;const o=U[7]||"Z";let a=parseInt(U[8],10);a=a>=0&&a<=23?a:0;let S=parseInt(U[9],10)||0;return S=S>=0&&S<=59?S:0,"-"===o?(L+=a,H+=S):"+"===o&&(L-=a,H-=S),new Date(Date.UTC(I,O,G,L,H,y))}}},(oe,M,K)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.BaseStandardFontDataFactory=M.BaseSVGFactory=M.BaseCanvasFactory=M.BaseCMapReaderFactory=void 0;var _=K(1);class ae{constructor(){this.constructor===ae&&(0,_.unreachable)("Cannot initialize BaseCanvasFactory.")}create(e,c){if(e<=0||c<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,c);return{canvas:r,context:r.getContext("2d")}}reset(e,c,r){if(!e.canvas)throw new Error("Canvas is not specified");if(c<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=c,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,c){(0,_.unreachable)("Abstract method `_createCanvas` called.")}}M.BaseCanvasFactory=ae;class ne{constructor({baseUrl:e=null,isCompressed:c=!1}){this.constructor===ne&&(0,_.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=c}fetch({name:e}){var c=this;return _asyncToGenerator(function*(){if(!c.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const r=c.baseUrl+e+(c.isCompressed?".bcmap":"");return c._fetchData(r,c.isCompressed?_.CMapCompressionType.BINARY:_.CMapCompressionType.NONE).catch(f=>{throw new Error(`Unable to load ${c.isCompressed?"binary ":""}CMap at: ${r}`)})})()}_fetchData(e,c){(0,_.unreachable)("Abstract method `_fetchData` called.")}}M.BaseCMapReaderFactory=ne;class re{constructor({baseUrl:e=null}){this.constructor===re&&(0,_.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}fetch({filename:e}){var c=this;return _asyncToGenerator(function*(){if(!c.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const r=`${c.baseUrl}${e}`;return c._fetchData(r).catch(l=>{throw new Error(`Unable to load font data at: ${r}`)})})()}_fetchData(e){(0,_.unreachable)("Abstract method `_fetchData` called.")}}M.BaseStandardFontDataFactory=re;class te{constructor(){this.constructor===te&&(0,_.unreachable)("Cannot initialize BaseSVGFactory.")}create(e,c){if(e<=0||c<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),r.setAttribute("width",`${e}px`),r.setAttribute("height",`${c}px`),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${c}`),r}createElement(e){if("string"!=typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){(0,_.unreachable)("Abstract method `_createSVG` called.")}}M.BaseSVGFactory=te},(oe,M,K)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.FontLoader=M.FontFaceObject=void 0;var _=K(1);class ae{constructor({docId:T,onUnsupportedFeature:e,ownerDocument:c=globalThis.document,styleElement:r=null}){this.constructor===ae&&(0,_.unreachable)("Cannot initialize BaseFontLoader."),this.docId=T,this._onUnsupportedFeature=e,this._document=c,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(T){this.nativeFontFaces.push(T),this._document.fonts.add(T)}insertRule(T){let e=this.styleElement;e||(e=this.styleElement=this._document.createElement("style"),e.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(e));const c=e.sheet;c.insertRule(T,c.cssRules.length)}clear(){for(const T of this.nativeFontFaces)this._document.fonts.delete(T);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(T){var e=this;return _asyncToGenerator(function*(){if(T.attached||T.missingFile)return;if(T.attached=!0,e.isFontLoadingAPISupported){const r=T.createNativeFontFace();if(r){e.addNativeFontFace(r);try{yield r.loaded}catch(l){throw e._onUnsupportedFeature({featureId:_.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,_.warn)(`Failed to load font '${r.family}': '${l}'.`),T.disableFontFace=!0,l}}return}const c=T.createFontFaceRule();if(c){if(e.insertRule(c),e.isSyncFontLoadingSupported)return;yield new Promise(r=>{const l=e._queueLoadingCallback(r);e._prepareFontLoadEvent([c],[T],l)})}})()}_queueLoadingCallback(T){(0,_.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var e;const T=!!(null==(e=this._document)?void 0:e.fonts);return(0,_.shadow)(this,"isFontLoadingAPISupported",T)}get isSyncFontLoadingSupported(){(0,_.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,_.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(T,e,c){(0,_.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let ne;M.FontLoader=ne,M.FontLoader=ne=class extends ae{constructor(T){super(T),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let T=!1;if("undefined"==typeof navigator)T=!0;else{const e=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(null==e?void 0:e[1])>=14&&(T=!0)}return(0,_.shadow)(this,"isSyncFontLoadingSupported",T)}_queueLoadingCallback(T){const c=this.loadingContext,r={id:"pdfjs-font-loading-"+c.nextRequestId++,done:!1,complete:function(){for((0,_.assert)(!r.done,"completeRequest() cannot be called twice."),r.done=!0;c.requests.length>0&&c.requests[0].done;){const l=c.requests.shift();setTimeout(l.callback,0)}},callback:T};return c.requests.push(r),r}get _loadTestFont(){return(0,_.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(T,e,c){function r(U,I){return U.charCodeAt(I)<<24|U.charCodeAt(I+1)<<16|U.charCodeAt(I+2)<<8|255&U.charCodeAt(I+3)}function l(U,I,O,G){return U.substring(0,I)+G+U.substring(I+O)}let f,E;const u=this._document.createElement("canvas");u.width=1,u.height=1;const s=u.getContext("2d");let h=0;const P=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=l(m,976,P.length,P);const v=1482184792;let b=r(m,16);for(f=0,E=P.length-3;f<E;f+=4)b=b-v+r(P,f)|0;f<P.length&&(b=b-v+r(P+"XXX",f)|0),m=l(m,16,4,(0,_.string32)(b));const A=`url(data:font/opentype;base64,${btoa(m)});`;this.insertRule(`@font-face {font-family:"${P}";src:${A}}`);const k=[];for(const U of e)k.push(U.loadedName);k.push(P);const V=this._document.createElement("div");V.style.visibility="hidden",V.style.width=V.style.height="10px",V.style.position="absolute",V.style.top=V.style.left="0px";for(const U of k){const I=this._document.createElement("span");I.textContent="Hi",I.style.fontFamily=U,V.appendChild(I)}this._document.body.appendChild(V),function F(U,I){if(h++,h>30)return(0,_.warn)("Load test font never loaded."),void I();s.font="30px "+U,s.fillText(".",0,20),s.getImageData(0,0,1,1).data[3]>0?I():setTimeout(F.bind(null,U,I))}(P,()=>{V.remove(),c.complete()})}},M.FontFaceObject=class{constructor(T,{isEvalSupported:e=!0,disableFontFace:c=!1,ignoreErrors:r=!1,onUnsupportedFeature:l,fontRegistry:f=null}){this.compiledGlyphs=Object.create(null);for(const E in T)this[E]=T[E];this.isEvalSupported=!1!==e,this.disableFontFace=!0===c,this.ignoreErrors=!0===r,this._onUnsupportedFeature=l,this.fontRegistry=f}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let T;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),T=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else T=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),T}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const T=(0,_.bytesToString)(this.data),e=`url(data:${this.mimetype};base64,${btoa(T)});`;let c;if(this.cssFontInfo){let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),c=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}else c=`@font-face {font-family:"${this.loadedName}";src:${e}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,e),c}getPathGenerator(T,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];let c;try{c=T.get(this.loadedName+"_path_"+e)}catch(r){if(!this.ignoreErrors)throw r;return this._onUnsupportedFeature({featureId:_.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,_.warn)(`getPathGenerator - ignoring character: "${r}".`),this.compiledGlyphs[e]=function(l,f){}}if(this.isEvalSupported&&_.IsEvalSupportedCached.value){const r=[];for(const l of c){const f=void 0!==l.args?l.args.join(","):"";r.push("c.",l.cmd,"(",f,");\n")}return this.compiledGlyphs[e]=new Function("c","size",r.join(""))}return this.compiledGlyphs[e]=function(r,l){for(const f of c)"scale"===f.cmd&&(f.args=[l,-l]),r[f.cmd].apply(r,f.args)}}}},(oe,M,K)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.NodeStandardFontDataFactory=M.NodeCanvasFactory=M.NodeCMapReaderFactory=void 0;var _=K(6),ae=K(3),ne=K(1);let re=class{constructor(){(0,ne.unreachable)("Not implemented: NodeCanvasFactory")}};M.NodeCanvasFactory=re;let te=class{constructor(){(0,ne.unreachable)("Not implemented: NodeCMapReaderFactory")}};M.NodeCMapReaderFactory=te;let T=class{constructor(){(0,ne.unreachable)("Not implemented: NodeStandardFontDataFactory")}};if(M.NodeStandardFontDataFactory=T,ae.isNodeJS){const e=function(c){return new Promise((r,l)=>{__webpack_require__(172).readFile(c,(E,u)=>{!E&&u?r(new Uint8Array(u)):l(new Error(E))})})};M.NodeCanvasFactory=re=class extends _.BaseCanvasFactory{_createCanvas(c,r){return __webpack_require__(3414).createCanvas(c,r)}},M.NodeCMapReaderFactory=te=class extends _.BaseCMapReaderFactory{_fetchData(c,r){return e(c).then(l=>({cMapData:l,compressionType:r}))}},M.NodeStandardFontDataFactory=T=class extends _.BaseStandardFontDataFactory{_fetchData(c){return e(c)}}}},(oe,M,K)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.AnnotationStorage=void 0;var _=K(1);M.AnnotationStorage=class{constructor(){this._storage=new Map,this._timeStamp=Date.now(),this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(re,te){const T=this._storage.get(re);return void 0===T?te:Object.assign(te,T)}setValue(re,te){const T=this._storage.get(re);let e=!1;if(void 0!==T)for(const[c,r]of Object.entries(te))T[c]!==r&&(e=!0,T[c]=r);else e=!0,this._storage.set(re,te);e&&(this._timeStamp=Date.now(),this._setModified())}getAll(){return this._storage.size>0?(0,_.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get lastModified(){return this._timeStamp.toString()}}},(oe,M,K)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.CanvasGraphics=void 0;var _=K(1),ae=K(11),ne=K(5);const T=4096,f=16;function s(y){if(y._transformStack&&(y._transformStack=[]),!y.mozCurrentTransform){y._originalSave=y.save,y._originalRestore=y.restore,y._originalRotate=y.rotate,y._originalScale=y.scale,y._originalTranslate=y.translate,y._originalTransform=y.transform,y._originalSetTransform=y.setTransform,y._originalResetTransform=y.resetTransform,y._transformMatrix=y._transformMatrix||[1,0,0,1,0,0],y._transformStack=[];try{const o=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(y),"lineWidth");y._setLineWidth=o.set,y._getLineWidth=o.get,Object.defineProperty(y,"lineWidth",{set:function(S){this._setLineWidth(1.000001*S)},get:function(){return this._getLineWidth()}})}catch(o){}Object.defineProperty(y,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(y,"mozCurrentTransformInverse",{get:function(){const[a,S,g,x,n,C]=this._transformMatrix,w=a*x-S*g,B=S*g-a*x;return[x/w,S/B,g/B,a/w,(x*n-g*C)/B,(S*n-a*C)/w]}}),y.save=function(){const a=this._transformMatrix;this._transformStack.push(a),this._transformMatrix=a.slice(0,6),this._originalSave()},y.restore=function(){0===this._transformStack.length&&(0,_.warn)("Tried to restore a ctx when the stack was already empty.");const a=this._transformStack.pop();a&&(this._transformMatrix=a,this._originalRestore())},y.translate=function(a,S){const g=this._transformMatrix;g[4]=g[0]*a+g[2]*S+g[4],g[5]=g[1]*a+g[3]*S+g[5],this._originalTranslate(a,S)},y.scale=function(a,S){const g=this._transformMatrix;g[0]*=a,g[1]*=a,g[2]*=S,g[3]*=S,this._originalScale(a,S)},y.transform=function(a,S,g,x,n,C){const w=this._transformMatrix;this._transformMatrix=[w[0]*a+w[2]*S,w[1]*a+w[3]*S,w[0]*g+w[2]*x,w[1]*g+w[3]*x,w[0]*n+w[2]*C+w[4],w[1]*n+w[3]*C+w[5]],y._originalTransform(a,S,g,x,n,C)},y.setTransform=function(a,S,g,x,n,C){this._transformMatrix=[a,S,g,x,n,C],y._originalSetTransform(a,S,g,x,n,C)},y.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],y._originalResetTransform()},y.rotate=function(a){const S=Math.cos(a),g=Math.sin(a),x=this._transformMatrix;this._transformMatrix=[x[0]*S+x[2]*g,x[1]*S+x[3]*g,x[0]*-g+x[2]*S,x[1]*-g+x[3]*S,x[4],x[5]],this._originalRotate(a)}}}class h{constructor(o){this.canvasFactory=o,this.cache=Object.create(null)}getCanvas(o,a,S,g){let x;return void 0!==this.cache[o]?(x=this.cache[o],this.canvasFactory.reset(x,a,S),x.context.setTransform(1,0,0,1,0,0)):(x=this.canvasFactory.create(a,S),this.cache[o]=x),g&&s(x.context),x}clear(){for(const o in this.cache)this.canvasFactory.destroy(this.cache[o]),delete this.cache[o]}}class P{constructor(o,a){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=_.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=_.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=_.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,o,a])}clone(){const o=Object.create(this);return o.clipBox=this.clipBox.slice(),o}setCurrentPoint(o,a){this.x=o,this.y=a}updatePathMinMax(o,a,S){[a,S]=_.Util.applyTransform([a,S],o),this.minX=Math.min(this.minX,a),this.minY=Math.min(this.minY,S),this.maxX=Math.max(this.maxX,a),this.maxY=Math.max(this.maxY,S)}updateCurvePathMinMax(o,a,S,g,x,n,C,w,B){const p=_.Util.bezierBoundingBox(a,S,g,x,n,C,w,B);this.updatePathMinMax(o,p[0],p[1]),this.updatePathMinMax(o,p[2],p[3])}getPathBoundingBox(o=ae.PathType.FILL,a=null){const S=[this.minX,this.minY,this.maxX,this.maxY];if(o===ae.PathType.STROKE){a||(0,_.unreachable)("Stroke bounding box must include transform.");const g=_.Util.singularValueDecompose2dScale(a),x=g[0]*this.lineWidth/2,n=g[1]*this.lineWidth/2;S[0]-=x,S[1]-=n,S[2]+=x,S[3]+=n}return S}updateClipFromPath(){const o=_.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(o||[0,0,0,0])}startNewPathAndClipBox(o){this.clipBox=o,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(o=ae.PathType.FILL,a=null){return _.Util.intersect(this.clipBox,this.getPathBoundingBox(o,a))}}function m(y,o,a=null){if("undefined"!=typeof ImageData&&o instanceof ImageData)return void y.putImageData(o,0,0);const S=o.height,g=o.width,x=S%f,n=(S-x)/f,C=0===x?n:n+1,w=y.createImageData(g,f);let p,B=0;const j=o.data,X=w.data;let W,q,N,Q,ee,le,d,R;if(a)switch(a.length){case 1:ee=a[0],le=a[0],d=a[0],R=a[0];break;case 4:ee=a[0],le=a[1],d=a[2],R=a[3]}if(o.kind===_.ImageKind.GRAYSCALE_1BPP){const Z=j.byteLength,z=new Uint32Array(X.buffer,0,X.byteLength>>2),$=z.length,se=g+7>>3;let he=4294967295,ce=_.IsLittleEndianCached.value?4278190080:255;for(R&&255===R[0]&&0===R[255]&&([he,ce]=[ce,he]),W=0;W<C;W++){for(N=W<n?f:x,p=0,q=0;q<N;q++){const pe=Z-B;let ge=0;const _e=pe>se?g:8*pe-7,ve=-8&_e;let Ce=0,me=0;for(;ge<ve;ge+=8)me=j[B++],z[p++]=128&me?he:ce,z[p++]=64&me?he:ce,z[p++]=32&me?he:ce,z[p++]=16&me?he:ce,z[p++]=8&me?he:ce,z[p++]=4&me?he:ce,z[p++]=2&me?he:ce,z[p++]=1&me?he:ce;for(;ge<_e;ge++)0===Ce&&(me=j[B++],Ce=128),z[p++]=me&Ce?he:ce,Ce>>=1}for(;p<$;)z[p++]=0;y.putImageData(w,0,W*f)}}else if(o.kind===_.ImageKind.RGBA_32BPP){const Z=!!(ee||le||d);for(q=0,Q=g*f*4,W=0;W<n;W++){if(X.set(j.subarray(B,B+Q)),B+=Q,Z)for(let z=0;z<Q;z+=4)ee&&(X[z+0]=ee[X[z+0]]),le&&(X[z+1]=le[X[z+1]]),d&&(X[z+2]=d[X[z+2]]);y.putImageData(w,0,q),q+=f}if(W<C){if(Q=g*x*4,X.set(j.subarray(B,B+Q)),Z)for(let z=0;z<Q;z+=4)ee&&(X[z+0]=ee[X[z+0]]),le&&(X[z+1]=le[X[z+1]]),d&&(X[z+2]=d[X[z+2]]);y.putImageData(w,0,q)}}else{if(o.kind!==_.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${o.kind}`);{const Z=!!(ee||le||d);for(N=f,Q=g*N,W=0;W<C;W++){for(W>=n&&(N=x,Q=g*N),p=0,q=Q;q--;)X[p++]=j[B++],X[p++]=j[B++],X[p++]=j[B++],X[p++]=255;if(Z)for(let z=0;z<p;z+=4)ee&&(X[z+0]=ee[X[z+0]]),le&&(X[z+1]=le[X[z+1]]),d&&(X[z+2]=d[X[z+2]]);y.putImageData(w,0,W*f)}}}}function t(y,o){const a=o.height,S=o.width,g=a%f,x=(a-g)/f,n=0===g?x:x+1,C=y.createImageData(S,f);let w=0;const B=o.data,p=C.data;for(let j=0;j<n;j++){const X=j<x?f:g;let W=3;for(let q=0;q<X;q++){let N,Q=0;for(let ee=0;ee<S;ee++)Q||(N=B[w++],Q=128),p[W]=N&Q?0:255,W+=4,Q>>=1}y.putImageData(C,0,j*f)}}function i(y,o){const a=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let S=0,g=a.length;S<g;S++){const x=a[S];void 0!==y[x]&&(o[x]=y[x])}void 0!==y.setLineDash&&(o.setLineDash(y.getLineDash()),o.lineDashOffset=y.lineDashOffset)}function v(y){y.strokeStyle="#000000",y.fillStyle="#000000",y.fillRule="nonzero",y.globalAlpha=1,y.lineWidth=1,y.lineCap="butt",y.lineJoin="miter",y.miterLimit=10,y.globalCompositeOperation="source-over",y.font="10px sans-serif",void 0!==y.setLineDash&&(y.setLineDash([]),y.lineDashOffset=0)}function b(y,o,a,S){const g=y.length;for(let x=3;x<g;x+=4){const n=y[x];if(0===n)y[x-3]=o,y[x-2]=a,y[x-1]=S;else if(n<255){const C=255-n;y[x-3]=y[x-3]*n+o*C>>8,y[x-2]=y[x-2]*n+a*C>>8,y[x-1]=y[x-1]*n+S*C>>8}}}function A(y,o,a){const S=y.length;for(let x=3;x<S;x+=4)o[x]=o[x]*(a?a[y[x]]:y[x])*.00392156862745098|0}function D(y,o,a){const S=y.length;for(let g=3;g<S;g+=4){const x=77*y[g-3]+152*y[g-2]+28*y[g-1];o[g]=a?o[g]*a[x>>8]>>8:o[g]*x>>16}}function U(y,o){const a=_.Util.singularValueDecompose2dScale(y);a[0]=Math.fround(a[0]),a[1]=Math.fround(a[1]);const S=Math.fround((globalThis.devicePixelRatio||1)*ne.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==o?o:a[0]<=S||a[1]<=S}const I=["butt","round","square"],O=["miter","round","bevel"],G={},L={};class H{constructor(o,a,S,g,x,n,C){this.ctx=o,this.current=new P(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=a,this.objs=S,this.canvasFactory=g,this.imageLayer=x,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=n,this.cachedCanvases=new h(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=C,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,o&&s(o),this._cachedGetSinglePixelWidth=null}beginDrawing({transform:o,viewport:a,transparency:S=!1,background:g=null}){const x=this.ctx.canvas.width,n=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=g||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,x,n),this.ctx.restore(),S){const C=this.cachedCanvases.getCanvas("transparent",x,n,!0);this.compositeCtx=this.ctx,this.transparentCanvas=C.canvas,this.ctx=C.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),v(this.ctx),o&&(this.ctx.transform.apply(this.ctx,o),this.outputScaleX=o[0],this.outputScaleY=o[0]),this.ctx.transform.apply(this.ctx,a.transform),this.viewportScale=a.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this._combinedScaleFactor=Math.hypot(this.baseTransform[0],this.baseTransform[2]),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(o,a,S,g){const x=o.argsArray,n=o.fnArray;let C=a||0;const w=x.length;if(w===C)return C;const B=w-C>10&&"function"==typeof S,p=B?Date.now()+15:0;let j=0;const X=this.commonObjs,W=this.objs;let q;for(;;){if(void 0!==g&&C===g.nextBreakPoint)return g.breakIt(C,S),C;if(q=n[C],q!==_.OPS.dependency)this[q].apply(this,x[C]);else for(const N of x[C]){const Q=N.startsWith("g_")?X:W;if(!Q.has(N))return Q.get(N,S),C}if(C++,C===w)return C;if(B&&++j>10){if(Date.now()>p)return S(),C;j=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(o,a){const S=o.width,g=o.height;let p,j,x=Math.max(Math.hypot(a[0],a[1]),1),n=Math.max(Math.hypot(a[2],a[3]),1),C=S,w=g,B="prescale1";for(;x>2&&C>1||n>2&&w>1;){let X=C,W=w;x>2&&C>1&&(X=Math.ceil(C/2),x/=C/X),n>2&&w>1&&(W=Math.ceil(w/2),n/=w/W),p=this.cachedCanvases.getCanvas(B,X,W),j=p.context,j.clearRect(0,0,X,W),j.drawImage(o,0,0,C,w,0,0,X,W),o=p.canvas,C=X,w=W,B="prescale1"===B?"prescale2":"prescale1"}return{img:o,paintWidth:C,paintHeight:w}}_createMaskCanvas(o){const a=this.ctx,S=o.width,g=o.height,x=this.current.fillColor,n=this.current.patternFill,C=this.cachedCanvases.getCanvas("maskCanvas",S,g);t(C.context,o);let p=_.Util.transform(a.mozCurrentTransform,[1/S,0,0,-1/g,0,0]);p=_.Util.transform(p,[1,0,0,1,0,-g]);const j=_.Util.applyTransform([0,0],p),X=_.Util.applyTransform([S,g],p),W=_.Util.normalizeRect([j[0],j[1],X[0],X[1]]),q=Math.ceil(W[2]-W[0]),N=Math.ceil(W[3]-W[1]),Q=this.cachedCanvases.getCanvas("fillCanvas",q,N,!0),ee=Q.context,le=Math.min(j[0],X[0]),d=Math.min(j[1],X[1]);ee.translate(-le,-d),ee.transform.apply(ee,p);const R=this._scaleImage(C.canvas,ee.mozCurrentTransformInverse);ee.imageSmoothingEnabled=U(ee.mozCurrentTransform,o.interpolate),ee.drawImage(R.img,0,0,R.img.width,R.img.height,0,0,S,g),ee.globalCompositeOperation="source-in";const Z=_.Util.transform(ee.mozCurrentTransformInverse,[1,0,0,1,-le,-d]);return ee.fillStyle=n?x.getPattern(a,this,Z,ae.PathType.FILL):x,ee.fillRect(0,0,S,g),{canvas:Q.canvas,offsetX:Math.round(le),offsetY:Math.round(d)}}setLineWidth(o){this.current.lineWidth=o,this.ctx.lineWidth=o}setLineCap(o){this.ctx.lineCap=I[o]}setLineJoin(o){this.ctx.lineJoin=O[o]}setMiterLimit(o){this.ctx.miterLimit=o}setDash(o,a){const S=this.ctx;void 0!==S.setLineDash&&(S.setLineDash(o),S.lineDashOffset=a)}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(let a=0,S=o.length;a<S;a++){const g=o[a],n=g[1];switch(g[0]){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=g[1];break;case"ca":this.current.fillAlpha=g[1],this.ctx.globalAlpha=g[1];break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=n}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const o=this.inSMaskMode;this.current.activeSMask&&!o?this.beginSMaskMode():!this.current.activeSMask&&o&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const g=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height,!0);this.suspendedCtx=this.ctx,this.ctx=g.context;const x=this.ctx;x.setTransform.apply(x,this.suspendedCtx.mozCurrentTransform),i(this.suspendedCtx,x),function(y,o){if(y._removeMirroring)throw new Error("Context is already forwarding operations.");y.__originalSave=y.save,y.__originalRestore=y.restore,y.__originalRotate=y.rotate,y.__originalScale=y.scale,y.__originalTranslate=y.translate,y.__originalTransform=y.transform,y.__originalSetTransform=y.setTransform,y.__originalResetTransform=y.resetTransform,y.__originalClip=y.clip,y.__originalMoveTo=y.moveTo,y.__originalLineTo=y.lineTo,y.__originalBezierCurveTo=y.bezierCurveTo,y.__originalRect=y.rect,y.__originalClosePath=y.closePath,y.__originalBeginPath=y.beginPath,y._removeMirroring=()=>{y.save=y.__originalSave,y.restore=y.__originalRestore,y.rotate=y.__originalRotate,y.scale=y.__originalScale,y.translate=y.__originalTranslate,y.transform=y.__originalTransform,y.setTransform=y.__originalSetTransform,y.resetTransform=y.__originalResetTransform,y.clip=y.__originalClip,y.moveTo=y.__originalMoveTo,y.lineTo=y.__originalLineTo,y.bezierCurveTo=y.__originalBezierCurveTo,y.rect=y.__originalRect,y.closePath=y.__originalClosePath,y.beginPath=y.__originalBeginPath,delete y._removeMirroring},y.save=function(){o.save(),this.__originalSave()},y.restore=function(){o.restore(),this.__originalRestore()},y.translate=function(S,g){o.translate(S,g),this.__originalTranslate(S,g)},y.scale=function(S,g){o.scale(S,g),this.__originalScale(S,g)},y.transform=function(S,g,x,n,C,w){o.transform(S,g,x,n,C,w),this.__originalTransform(S,g,x,n,C,w)},y.setTransform=function(S,g,x,n,C,w){o.setTransform(S,g,x,n,C,w),this.__originalSetTransform(S,g,x,n,C,w)},y.resetTransform=function(){o.resetTransform(),this.__originalResetTransform()},y.rotate=function(S){o.rotate(S),this.__originalRotate(S)},y.clip=function(S){o.clip(S),this.__originalClip(S)},y.moveTo=function(a,S){o.moveTo(a,S),this.__originalMoveTo(a,S)},y.lineTo=function(a,S){o.lineTo(a,S),this.__originalLineTo(a,S)},y.bezierCurveTo=function(a,S,g,x,n,C){o.bezierCurveTo(a,S,g,x,n,C),this.__originalBezierCurveTo(a,S,g,x,n,C)},y.rect=function(a,S,g,x){o.rect(a,S,g,x),this.__originalRect(a,S,g,x)},y.closePath=function(){o.closePath(),this.__originalClosePath()},y.beginPath=function(){o.beginPath(),this.__originalBeginPath()}}(x,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),i(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(o){this.current.activeSMask&&(o?(o[0]=Math.floor(o[0]),o[1]=Math.floor(o[1]),o[2]=Math.ceil(o[2]),o[3]=Math.ceil(o[3])):o=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function(y,o,a,S){const g=S[0],x=S[1],n=S[2]-g,C=S[3]-x;0===n||0===C||(function(y,o,a,S,g,x,n,C,w,B,p){const j=!!x,X=j?x[0]:0,W=j?x[1]:0,q=j?x[2]:0;let N;N="Luminosity"===g?D:A;const ee=Math.min(S,Math.ceil(1048576/a));for(let le=0;le<S;le+=ee){const d=Math.min(ee,S-le),R=y.getImageData(C-B,le+(w-p),a,d),Z=o.getImageData(C,le+w,a,d);j&&b(R.data,X,W,q),N(R.data,Z.data,n),o.putImageData(Z,C,le+w)}}(o.context,a,n,C,o.subtype,o.backdrop,o.transferMap,g,x,o.offsetX,o.offsetY),y.save(),y.globalAlpha=1,y.globalCompositeOperation="source-over",y.setTransform(1,0,0,1,0,0),y.drawImage(a.canvas,0,0),y.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,o),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(i(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const o=this.current;this.stateStack.push(o),this.current=o.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),i(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)}transform(o,a,S,g,x,n){this.ctx.transform(o,a,S,g,x,n),this._cachedGetSinglePixelWidth=null}constructPath(o,a){const S=this.ctx,g=this.current;let C,w,x=g.x,n=g.y;for(let B=0,p=0,j=o.length;B<j;B++)switch(0|o[B]){case _.OPS.rectangle:x=a[p++],n=a[p++];const X=a[p++],W=a[p++],q=x+X,N=n+W;S.moveTo(x,n),0===X||0===W?S.lineTo(q,N):(S.lineTo(q,n),S.lineTo(q,N),S.lineTo(x,N)),g.updatePathMinMax(S.mozCurrentTransform,x,n),g.updatePathMinMax(S.mozCurrentTransform,q,N),S.closePath();break;case _.OPS.moveTo:x=a[p++],n=a[p++],S.moveTo(x,n),g.updatePathMinMax(S.mozCurrentTransform,x,n);break;case _.OPS.lineTo:x=a[p++],n=a[p++],S.lineTo(x,n),g.updatePathMinMax(S.mozCurrentTransform,x,n);break;case _.OPS.curveTo:C=x,w=n,x=a[p+4],n=a[p+5],S.bezierCurveTo(a[p],a[p+1],a[p+2],a[p+3],x,n),g.updateCurvePathMinMax(S.mozCurrentTransform,C,w,a[p],a[p+1],a[p+2],a[p+3],x,n),p+=6;break;case _.OPS.curveTo2:C=x,w=n,S.bezierCurveTo(x,n,a[p],a[p+1],a[p+2],a[p+3]),g.updateCurvePathMinMax(S.mozCurrentTransform,C,w,x,n,a[p],a[p+1],a[p+2],a[p+3]),x=a[p+2],n=a[p+3],p+=4;break;case _.OPS.curveTo3:C=x,w=n,x=a[p+2],n=a[p+3],S.bezierCurveTo(a[p],a[p+1],x,n,x,n),g.updateCurvePathMinMax(S.mozCurrentTransform,C,w,a[p],a[p+1],x,n,x,n),p+=4;break;case _.OPS.closePath:S.closePath()}g.setCurrentPoint(x,n)}closePath(){this.ctx.closePath()}stroke(o){o=void 0===o||o;const a=this.ctx,S=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"==typeof S&&(null==S?void 0:S.getPattern)){const g=this.getSinglePixelWidth();a.save(),a.strokeStyle=S.getPattern(a,this,a.mozCurrentTransformInverse,ae.PathType.STROKE),a.lineWidth=Math.max(g,this.current.lineWidth),a.stroke(),a.restore()}else{const g=this.getSinglePixelWidth();g<0&&-g>=this.current.lineWidth?(a.save(),a.resetTransform(),a.lineWidth=Math.floor(this._combinedScaleFactor),a.stroke(),a.restore()):(a.lineWidth=Math.max(g,this.current.lineWidth),a.stroke())}o&&this.consumePath(this.current.getClippedPathBoundingBox()),a.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(o){o=void 0===o||o;const a=this.ctx,S=this.current.fillColor;let x=!1;this.current.patternFill&&(a.save(),a.fillStyle=S.getPattern(a,this,a.mozCurrentTransformInverse,ae.PathType.FILL),x=!0);const n=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==n&&(this.pendingEOFill?(a.fill("evenodd"),this.pendingEOFill=!1):a.fill()),x&&a.restore(),o&&this.consumePath(n)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=G}eoClip(){this.pendingClip=L}beginText(){this.current.textMatrix=_.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const o=this.pendingTextPaths,a=this.ctx;if(void 0!==o){a.save(),a.beginPath();for(let S=0;S<o.length;S++){const g=o[S];a.setTransform.apply(a,g.transform),a.translate(g.x,g.y),g.addToPath(a,g.fontSize)}a.restore(),a.clip(),a.beginPath(),delete this.pendingTextPaths}else a.beginPath()}setCharSpacing(o){this.current.charSpacing=o}setWordSpacing(o){this.current.wordSpacing=o}setHScale(o){this.current.textHScale=o/100}setLeading(o){this.current.leading=-o}setFont(o,a){const S=this.commonObjs.get(o),g=this.current;if(!S)throw new Error(`Can't find font for ${o}`);if(g.fontMatrix=S.fontMatrix||_.FONT_IDENTITY_MATRIX,(0===g.fontMatrix[0]||0===g.fontMatrix[3])&&(0,_.warn)("Invalid font matrix for font "+o),a<0?(a=-a,g.fontDirection=-1):g.fontDirection=1,this.current.font=S,this.current.fontSize=a,S.isType3Font)return;let n="normal";S.black?n="900":S.bold&&(n="bold");const C=S.italic?"italic":"normal",w=`"${S.loadedName||"sans-serif"}", ${S.fallbackName}`;let B=a;a<16?B=16:a>100&&(B=100),this.current.fontSizeScale=a/B,this.ctx.font=`${C} ${n} ${B}px ${w}`}setTextRenderingMode(o){this.current.textRenderingMode=o}setTextRise(o){this.current.textRise=o}moveText(o,a){this.current.x=this.current.lineX+=o,this.current.y=this.current.lineY+=a}setLeadingMoveText(o,a){this.setLeading(-a),this.moveText(o,a)}setTextMatrix(o,a,S,g,x,n){this.current.textMatrix=[o,a,S,g,x,n],this.current.textMatrixScale=Math.hypot(o,a),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(o,a,S,g,x){const n=this.ctx,C=this.current,w=C.font,B=C.textRenderingMode,p=C.fontSize/C.fontSizeScale,j=B&_.TextRenderingMode.FILL_STROKE_MASK,X=!!(B&_.TextRenderingMode.ADD_TO_PATH_FLAG),W=C.patternFill&&!w.missingFile;let q;(w.disableFontFace||X||W)&&(q=w.getPathGenerator(this.commonObjs,o)),w.disableFontFace||W?(n.save(),n.translate(a,S),n.beginPath(),q(n,p),g&&n.setTransform.apply(n,g),(j===_.TextRenderingMode.FILL||j===_.TextRenderingMode.FILL_STROKE)&&n.fill(),(j===_.TextRenderingMode.STROKE||j===_.TextRenderingMode.FILL_STROKE)&&(x&&(n.resetTransform(),n.lineWidth=Math.floor(this._combinedScaleFactor)),n.stroke()),n.restore()):((j===_.TextRenderingMode.FILL||j===_.TextRenderingMode.FILL_STROKE)&&n.fillText(o,a,S),(j===_.TextRenderingMode.STROKE||j===_.TextRenderingMode.FILL_STROKE)&&(x?(n.save(),n.moveTo(a,S),n.resetTransform(),n.lineWidth=Math.floor(this._combinedScaleFactor),n.strokeText(o,0,0),n.restore()):n.strokeText(o,a,S))),X&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:n.mozCurrentTransform,x:a,y:S,fontSize:p,addToPath:q})}get isFontSubpixelAAEnabled(){const{context:o}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);o.scale(1.5,1),o.fillText("I",0,10);const a=o.getImageData(0,0,10,10).data;let S=!1;for(let g=3;g<a.length;g+=4)if(a[g]>0&&a[g]<255){S=!0;break}return(0,_.shadow)(this,"isFontSubpixelAAEnabled",S)}showText(o){const a=this.current,S=a.font;if(S.isType3Font)return this.showType3Text(o);const g=a.fontSize;if(0===g)return;const x=this.ctx,n=a.fontSizeScale,C=a.charSpacing,w=a.wordSpacing,B=a.fontDirection,p=a.textHScale*B,j=o.length,X=S.vertical,W=X?1:-1,q=S.defaultVMetrics,N=g*a.fontMatrix[0],Q=a.textRenderingMode===_.TextRenderingMode.FILL&&!S.disableFontFace&&!a.patternFill;let ee;if(x.save(),x.transform.apply(x,a.textMatrix),x.translate(a.x,a.y+a.textRise),x.scale(p,B>0?-1:1),a.patternFill){x.save();const $=a.fillColor.getPattern(x,this,x.mozCurrentTransformInverse,ae.PathType.FILL);ee=x.mozCurrentTransform,x.restore(),x.fillStyle=$}let le=a.lineWidth,d=!1;const R=a.textMatrixScale;if(0===R||0===le){const $=a.textRenderingMode&_.TextRenderingMode.FILL_STROKE_MASK;($===_.TextRenderingMode.STROKE||$===_.TextRenderingMode.FILL_STROKE)&&(this._cachedGetSinglePixelWidth=null,le=this.getSinglePixelWidth(),d=le<0)}else le/=R;1!==n&&(x.scale(n,n),le/=n),x.lineWidth=le;let z,Z=0;for(z=0;z<j;++z){const $=o[z];if("number"==typeof $){Z+=W*$*g/1e3;continue}let se=!1;const he=($.isSpace?w:0)+C,ce=$.fontChar,pe=$.accent;let ge,_e,Ce,ve=$.width;if(X){const me=$.vmetric||q,Se=-($.vmetric?me[1]:.5*ve)*N;ve=me?-me[0]:ve,ge=Se/n,_e=(Z+me[2]*N)/n}else ge=Z/n,_e=0;if(S.remeasure&&ve>0){const me=1e3*x.measureText(ce).width/g*n;if(ve<me&&this.isFontSubpixelAAEnabled){const Se=ve/me;se=!0,x.save(),x.scale(Se,1),ge/=Se}else ve!==me&&(ge+=(ve-me)/2e3*g/n)}this.contentVisible&&($.isInFont||S.missingFile)&&(Q&&!pe?x.fillText(ce,ge,_e):(this.paintChar(ce,ge,_e,ee,d),pe&&this.paintChar(pe.fontChar,ge+g*pe.offset.x/n,_e-g*pe.offset.y/n,ee,d))),Ce=X?ve*N-he*B:ve*N+he*B,Z+=Ce,se&&x.restore()}X?a.y-=Z:a.x+=Z*p,x.restore(),this.compose()}showType3Text(o){const a=this.ctx,S=this.current,g=S.font,x=S.fontSize,n=S.fontDirection,C=g.vertical?1:-1,w=S.charSpacing,B=S.wordSpacing,p=S.textHScale*n,j=S.fontMatrix||_.FONT_IDENTITY_MATRIX,X=o.length;let q,N,Q,ee;if(S.textRenderingMode!==_.TextRenderingMode.INVISIBLE&&0!==x){for(this._cachedGetSinglePixelWidth=null,a.save(),a.transform.apply(a,S.textMatrix),a.translate(S.x,S.y),a.scale(p,n),q=0;q<X;++q){if(N=o[q],"number"==typeof N){ee=C*N*x/1e3,this.ctx.translate(ee,0),S.x+=ee*p;continue}const le=(N.isSpace?B:0)+w,d=g.charProcOperatorList[N.operatorListId];d?(this.contentVisible&&(this.processingType3=N,this.save(),a.scale(x,x),a.transform.apply(a,j),this.executeOperatorList(d),this.restore()),Q=_.Util.applyTransform([N.width,0],j)[0]*x+le,a.translate(Q,0),S.x+=Q*p):(0,_.warn)(`Type3 character "${N.operatorListId}" is not available.`)}a.restore(),this.processingType3=null}}setCharWidth(o,a){}setCharWidthAndBounds(o,a,S,g,x,n){this.ctx.rect(S,g,x-S,n-g),this.clip(),this.endPath()}getColorN_Pattern(o){let a;if("TilingPattern"===o[0]){const S=o[1],g=this.baseTransform||this.ctx.mozCurrentTransform.slice();a=new ae.TilingPattern(o,S,this.ctx,{createCanvasGraphics:n=>new H(n,this.commonObjs,this.objs,this.canvasFactory)},g)}else a=this._getPattern(o[1],o[2]);return a}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(o,a,S){const g=_.Util.makeHexColor(o,a,S);this.ctx.strokeStyle=g,this.current.strokeColor=g}setFillRGBColor(o,a,S){const g=_.Util.makeHexColor(o,a,S);this.ctx.fillStyle=g,this.current.fillColor=g,this.current.patternFill=!1}_getPattern(o,a=null){let S;return this.cachedPatterns.has(o)?S=this.cachedPatterns.get(o):(S=(0,ae.getShadingPattern)(this.objs.get(o)),this.cachedPatterns.set(o,S)),a&&(S.matrix=a),S}shadingFill(o){if(!this.contentVisible)return;const a=this.ctx;this.save();const S=this._getPattern(o);a.fillStyle=S.getPattern(a,this,a.mozCurrentTransformInverse,ae.PathType.SHADING);const g=a.mozCurrentTransformInverse;if(g){const x=a.canvas,n=x.width,C=x.height,w=_.Util.applyTransform([0,0],g),B=_.Util.applyTransform([0,C],g),p=_.Util.applyTransform([n,0],g),j=_.Util.applyTransform([n,C],g),X=Math.min(w[0],B[0],p[0],j[0]),W=Math.min(w[1],B[1],p[1],j[1]),q=Math.max(w[0],B[0],p[0],j[0]),N=Math.max(w[1],B[1],p[1],j[1]);this.ctx.fillRect(X,W,q-X,N-W)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,_.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,_.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(o,a){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(o)&&6===o.length&&this.transform.apply(this,o),this.baseTransform=this.ctx.mozCurrentTransform,a)&&(this.ctx.rect(a[0],a[1],a[2]-a[0],a[3]-a[1]),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,a[0],a[1]),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,a[2],a[3]),this.clip(),this.endPath())}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(o){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const a=this.ctx;o.isolated||(0,_.info)("TODO: Support non-isolated groups."),o.knockout&&(0,_.warn)("Knockout groups not supported.");const S=a.mozCurrentTransform;if(o.matrix&&a.transform.apply(a,o.matrix),!o.bbox)throw new Error("Bounding box is required.");let g=_.Util.getAxialAlignedBoundingBox(o.bbox,a.mozCurrentTransform);g=_.Util.intersect(g,[0,0,a.canvas.width,a.canvas.height])||[0,0,0,0];const n=Math.floor(g[0]),C=Math.floor(g[1]);let w=Math.max(Math.ceil(g[2])-n,1),B=Math.max(Math.ceil(g[3])-C,1),p=1,j=1;w>T&&(p=w/T,w=T),B>T&&(j=B/T,B=T),this.current.startNewPathAndClipBox([0,0,w,B]);let X="groupAt"+this.groupLevel;o.smask&&(X+="_smask_"+this.smaskCounter++%2);const W=this.cachedCanvases.getCanvas(X,w,B,!0),q=W.context;q.scale(1/p,1/j),q.translate(-n,-C),q.transform.apply(q,S),o.smask?this.smaskStack.push({canvas:W.canvas,context:q,offsetX:n,offsetY:C,scaleX:p,scaleY:j,subtype:o.smask.subtype,backdrop:o.smask.backdrop,transferMap:o.smask.transferMap||null,startTransformInverse:null}):(a.setTransform(1,0,0,1,0,0),a.translate(n,C),a.scale(p,j),a.save()),i(a,q),this.ctx=q,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(a),this.groupLevel++}endGroup(o){if(!this.contentVisible)return;this.groupLevel--;const a=this.ctx,S=this.groupStack.pop();if(this.ctx=S,this.ctx.imageSmoothingEnabled=!1,o.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const g=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,g);const x=_.Util.getAxialAlignedBoundingBox([0,0,a.canvas.width,a.canvas.height],g);this.ctx.drawImage(a.canvas,0,0),this.ctx.restore(),this.compose(x)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(o,a,S,g,x){if(this.save(),Array.isArray(a)&&4===a.length){const n=a[2]-a[0],C=a[3]-a[1];if(x&&this.annotationCanvasMap){(S=S.slice())[4]-=a[0],S[5]-=a[1],(a=a.slice())[0]=a[1]=0,a[2]=n,a[3]=C;const[w,B]=_.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:p}=this,j=Math.ceil(n*this.outputScaleX*p),X=Math.ceil(C*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(j,X);const{canvas:W,context:q}=this.annotationCanvas;W.style.width=`calc(${n}px * var(--viewport-scale-factor))`,W.style.height=`calc(${C}px * var(--viewport-scale-factor))`,this.annotationCanvasMap.set(o,W),this.annotationCanvas.savedCtx=this.ctx,this.ctx=q,this.ctx.setTransform(w,0,0,-B,0,C*B),s(this.ctx),v(this.ctx)}else v(this.ctx),this.ctx.rect(a[0],a[1],n,C),this.clip(),this.endPath()}this.current=new P(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,S),this.transform.apply(this,g)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(o){if(!this.contentVisible)return;const a=this.ctx,S=o.width,g=o.height,x=this.processingType3;if(x&&void 0===x.compiled&&(x.compiled=S<=1e3&&g<=1e3?function(y){const a=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),S=y.width,g=y.height,x=S+1;let n,C,w,B;const p=new Uint8Array(x*(g+1)),j=S+7&-8,X=y.data,W=new Uint8Array(j*g);let q=0;for(n=0,C=X.length;n<C;n++){const d=X[n];let R=128;for(;R>0;)W[q++]=d&R?0:255,R>>=1}let N=0;for(q=0,0!==W[q]&&(p[0]=1,++N),w=1;w<S;w++)W[q]!==W[q+1]&&(p[w]=W[q]?2:1,++N),q++;for(0!==W[q]&&(p[w]=2,++N),n=1;n<g;n++){q=n*j,B=n*x,W[q-j]!==W[q]&&(p[B]=W[q]?1:8,++N);let d=(W[q]?4:0)+(W[q-j]?8:0);for(w=1;w<S;w++)d=(d>>2)+(W[q+1]?4:0)+(W[q-j+1]?8:0),a[d]&&(p[B+w]=a[d],++N),q++;if(W[q-j]!==W[q]&&(p[B+w]=W[q]?2:4,++N),N>1e3)return null}for(q=j*(g-1),B=n*x,0!==W[q]&&(p[B]=8,++N),w=1;w<S;w++)W[q]!==W[q+1]&&(p[B+w]=W[q]?4:8,++N),q++;if(0!==W[q]&&(p[B+w]=4,++N),N>1e3)return null;const Q=new Int32Array([0,x,-1,0,-x,0,0,0,1]),ee=[];for(n=0;N&&n<=g;n++){let d=n*x;const R=d+S;for(;d<R&&!p[d];)d++;if(d===R)continue;const Z=[d%x,n],z=d;let $=p[d];do{const se=Q[$];do{d+=se}while(!p[d]);const he=p[d];5!==he&&10!==he?($=he,p[d]=0):($=he&51*$>>4,p[d]&=$>>2|$<<2),Z.push(d%x,d/x|0),p[d]||--N}while(z!==d);ee.push(Z),--n}return function(d){d.save(),d.scale(1/S,-1/g),d.translate(0,-g),d.beginPath();for(let R=0,Z=ee.length;R<Z;R++){const z=ee[R];d.moveTo(z[0],z[1]);for(let $=2,se=z.length;$<se;$+=2)d.lineTo(z[$],z[$+1])}d.fill(),d.beginPath(),d.restore()}}({data:o.data,width:S,height:g}):null),null==x?void 0:x.compiled)return void x.compiled(a);const n=this._createMaskCanvas(o),C=n.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(C,n.offsetX,n.offsetY),a.restore(),this.compose()}paintImageMaskXObjectRepeat(o,a,S=0,g=0,x,n){if(!this.contentVisible)return;const C=this.ctx;C.save();const w=C.mozCurrentTransform;C.transform(a,S,g,x,0,0);const B=this._createMaskCanvas(o);C.setTransform(1,0,0,1,0,0);for(let p=0,j=n.length;p<j;p+=2){const X=_.Util.transform(w,[a,S,g,x,n[p],n[p+1]]),[W,q]=_.Util.applyTransform([0,0],X);C.drawImage(B.canvas,W,q)}C.restore(),this.compose()}paintImageMaskXObjectGroup(o){if(!this.contentVisible)return;const a=this.ctx,S=this.current.fillColor,g=this.current.patternFill;for(let x=0,n=o.length;x<n;x++){const C=o[x],w=C.width,B=C.height,p=this.cachedCanvases.getCanvas("maskCanvas",w,B),j=p.context;j.save(),t(j,C),j.globalCompositeOperation="source-in",j.fillStyle=g?S.getPattern(j,this,a.mozCurrentTransformInverse,ae.PathType.FILL):S,j.fillRect(0,0,w,B),j.restore(),a.save(),a.transform.apply(a,C.transform),a.scale(1,-1),a.drawImage(p.canvas,0,0,w,B,0,-1,1,1),a.restore()}this.compose()}paintImageXObject(o){if(!this.contentVisible)return;const a=o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o);a?this.paintInlineImageXObject(a):(0,_.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(o,a,S,g){if(!this.contentVisible)return;const x=o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o);if(!x)return void(0,_.warn)("Dependent image isn't ready yet");const n=x.width,C=x.height,w=[];for(let B=0,p=g.length;B<p;B+=2)w.push({transform:[a,0,0,S,g[B],g[B+1]],x:0,y:0,w:n,h:C});this.paintInlineImageXObjectGroup(x,w)}paintInlineImageXObject(o){if(!this.contentVisible)return;const a=o.width,S=o.height,g=this.ctx;let x;if(this.save(),g.scale(1/a,-1/S),"function"==typeof HTMLElement&&o instanceof HTMLElement||!o.data)x=o;else{const C=this.cachedCanvases.getCanvas("inlineImage",a,S);m(C.context,o,this.current.transferMaps),x=C.canvas}const n=this._scaleImage(x,g.mozCurrentTransformInverse);if(g.imageSmoothingEnabled=U(g.mozCurrentTransform,o.interpolate),g.drawImage(n.img,0,0,n.paintWidth,n.paintHeight,0,-S,a,S),this.imageLayer){const C=this.getCanvasPosition(0,-S);this.imageLayer.appendImage({imgData:o,left:C[0],top:C[1],width:a/g.mozCurrentTransformInverse[0],height:S/g.mozCurrentTransformInverse[3]})}this.compose(),this.restore()}paintInlineImageXObjectGroup(o,a){if(!this.contentVisible)return;const S=this.ctx,g=o.width,x=o.height,n=this.cachedCanvases.getCanvas("inlineImage",g,x);m(n.context,o,this.current.transferMaps);for(let w=0,B=a.length;w<B;w++){const p=a[w];if(S.save(),S.transform.apply(S,p.transform),S.scale(1,-1),S.drawImage(n.canvas,p.x,p.y,p.w,p.h,0,-1,1,1),this.imageLayer){const j=this.getCanvasPosition(p.x,p.y);this.imageLayer.appendImage({imgData:o,left:j[0],top:j[1],width:g,height:x})}S.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(o){}markPointProps(o,a){}beginMarkedContent(o){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(o,a){this.markedContentStack.push("OC"===o?{visible:this.optionalContentConfig.isVisible(a)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(o){this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(o);const a=this.ctx;this.pendingClip&&(this.pendingClip===L?a.clip("evenodd"):a.clip(),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),a.beginPath()}getSinglePixelWidth(){if(null===this._cachedGetSinglePixelWidth){const o=this.ctx.mozCurrentTransform,a=Math.abs(o[0]*o[3]-o[2]*o[1]),S=o[0]**2+o[2]**2,g=o[1]**2+o[3]**2,x=Math.sqrt(Math.max(S,g))/a;this._cachedGetSinglePixelWidth=S!==g&&this._combinedScaleFactor*x>1?-this._combinedScaleFactor*x:a>Number.EPSILON?x:1}return this._cachedGetSinglePixelWidth}getCanvasPosition(o,a){const S=this.ctx.mozCurrentTransform;return[S[0]*o+S[2]*a+S[4],S[1]*o+S[3]*a+S[5]]}isContentVisible(){for(let o=this.markedContentStack.length-1;o>=0;o--)if(!this.markedContentStack[o].visible)return!1;return!0}}M.CanvasGraphics=H;for(const y in _.OPS)void 0!==H.prototype[y]&&(H.prototype[_.OPS[y]]=H.prototype[y])},(oe,M,K)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.TilingPattern=M.PathType=void 0,M.getShadingPattern=function(u){switch(u[0]){case"RadialAxial":return new te(u);case"Mesh":return new c(u);case"Dummy":return new r}throw new Error(`Unknown IR type: ${u[0]}`)};var _=K(1);const ae={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function ne(u,s){if(!s||"undefined"==typeof Path2D)return;const h=s[2]-s[0],F=s[3]-s[1],P=new Path2D;P.rect(s[0],s[1],h,F),u.clip(P)}M.PathType=ae;class re{constructor(){this.constructor===re&&(0,_.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,_.unreachable)("Abstract method `getPattern` called.")}}class te extends re{constructor(s){super(),this._type=s[1],this._bbox=s[2],this._colorStops=s[3],this._p0=s[4],this._p1=s[5],this._r0=s[6],this._r1=s[7],this.matrix=null}_createGradient(s){let h;"axial"===this._type?h=s.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(h=s.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const F of this._colorStops)h.addColorStop(F[0],F[1]);return h}getPattern(s,h,F,P){let m;if(P===ae.STROKE||P===ae.FILL){const t=h.current.getClippedPathBoundingBox(P,s.mozCurrentTransform)||[0,0,0,0],i=Math.ceil(t[2]-t[0])||1,v=Math.ceil(t[3]-t[1])||1,b=h.cachedCanvases.getCanvas("pattern",i,v,!0),A=b.context;A.clearRect(0,0,A.canvas.width,A.canvas.height),A.beginPath(),A.rect(0,0,A.canvas.width,A.canvas.height),A.translate(-t[0],-t[1]),F=_.Util.transform(F,[1,0,0,1,t[0],t[1]]),A.transform.apply(A,h.baseTransform),this.matrix&&A.transform.apply(A,this.matrix),ne(A,this._bbox),A.fillStyle=this._createGradient(A),A.fill(),m=s.createPattern(b.canvas,"no-repeat");const D=new DOMMatrix(F);try{m.setTransform(D)}catch(k){(0,_.warn)(`RadialAxialShadingPattern.getPattern: "${null==k?void 0:k.message}".`)}}else ne(s,this._bbox),m=this._createGradient(s);return m}}function T(u,s,h,F,P,m,t,i){const v=s.coords,b=s.colors,A=u.data,D=4*u.width;let k;v[h+1]>v[F+1]&&(k=h,h=F,F=k,k=m,m=t,t=k),v[F+1]>v[P+1]&&(k=F,F=P,P=k,k=t,t=i,i=k),v[h+1]>v[F+1]&&(k=h,h=F,F=k,k=m,m=t,t=k);const V=(v[h]+s.offsetX)*s.scaleX,U=(v[h+1]+s.offsetY)*s.scaleY,I=(v[F]+s.offsetX)*s.scaleX,O=(v[F+1]+s.offsetY)*s.scaleY,G=(v[P]+s.offsetX)*s.scaleX,L=(v[P+1]+s.offsetY)*s.scaleY;if(U>=L)return;const H=b[m],y=b[m+1],o=b[m+2],a=b[t],S=b[t+1],g=b[t+2],x=b[i],n=b[i+1],C=b[i+2],w=Math.round(U),B=Math.round(L);let p,j,X,W,q,N,Q,ee;for(let le=w;le<=B;le++){if(le<O){let $;$=le<U?0:(U-le)/(U-O),p=V-(V-I)*$,j=H-(H-a)*$,X=y-(y-S)*$,W=o-(o-g)*$}else{let $;$=le>L?1:O===L?0:(O-le)/(O-L),p=I-(I-G)*$,j=a-(a-x)*$,X=S-(S-n)*$,W=g-(g-C)*$}let d;d=le<U?0:le>L?1:(U-le)/(U-L),q=V-(V-G)*d,N=H-(H-x)*d,Q=y-(y-n)*d,ee=o-(o-C)*d;const R=Math.round(Math.min(p,q)),Z=Math.round(Math.max(p,q));let z=D*le+4*R;for(let $=R;$<=Z;$++)d=(p-$)/(p-q),d<0?d=0:d>1&&(d=1),A[z++]=j-(j-N)*d|0,A[z++]=X-(X-Q)*d|0,A[z++]=W-(W-ee)*d|0,A[z++]=255}}function e(u,s,h){const F=s.coords,P=s.colors;let m,t;switch(s.type){case"lattice":const i=s.verticesPerRow,v=Math.floor(F.length/i)-1,b=i-1;for(m=0;m<v;m++){let A=m*i;for(let D=0;D<b;D++,A++)T(u,h,F[A],F[A+1],F[A+i],P[A],P[A+1],P[A+i]),T(u,h,F[A+i+1],F[A+1],F[A+i],P[A+i+1],P[A+1],P[A+i])}break;case"triangles":for(m=0,t=F.length;m<t;m+=3)T(u,h,F[m],F[m+1],F[m+2],P[m],P[m+1],P[m+2]);break;default:throw new Error("illegal figure")}}class c extends re{constructor(s){super(),this._coords=s[2],this._colors=s[3],this._figures=s[4],this._bounds=s[5],this._bbox=s[7],this._background=s[8],this.matrix=null}_createMeshCanvas(s,h,F){const i=Math.floor(this._bounds[0]),v=Math.floor(this._bounds[1]),b=Math.ceil(this._bounds[2])-i,A=Math.ceil(this._bounds[3])-v,D=Math.min(Math.ceil(Math.abs(b*s[0]*1.1)),3e3),k=Math.min(Math.ceil(Math.abs(A*s[1]*1.1)),3e3),V=b/D,U=A/k,I={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-v,scaleX:1/V,scaleY:1/U},L=F.getCanvas("mesh",D+4,k+4,!1),H=L.context,y=H.createImageData(D,k);if(h){const a=y.data;for(let S=0,g=a.length;S<g;S+=4)a[S]=h[0],a[S+1]=h[1],a[S+2]=h[2],a[S+3]=255}for(const a of this._figures)e(y,a,I);return H.putImageData(y,2,2),{canvas:L.canvas,offsetX:i-2*V,offsetY:v-2*U,scaleX:V,scaleY:U}}getPattern(s,h,F,P){let m;if(ne(s,this._bbox),P===ae.SHADING)m=_.Util.singularValueDecompose2dScale(s.mozCurrentTransform);else if(m=_.Util.singularValueDecompose2dScale(h.baseTransform),this.matrix){const i=_.Util.singularValueDecompose2dScale(this.matrix);m=[m[0]*i[0],m[1]*i[1]]}const t=this._createMeshCanvas(m,P===ae.SHADING?null:this._background,h.cachedCanvases);return P!==ae.SHADING&&(s.setTransform.apply(s,h.baseTransform),this.matrix&&s.transform.apply(s,this.matrix)),s.translate(t.offsetX,t.offsetY),s.scale(t.scaleX,t.scaleY),s.createPattern(t.canvas,"no-repeat")}}class r extends re{getPattern(){return"hotpink"}}class E{static get MAX_PATTERN_SIZE(){return(0,_.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(s,h,F,P,m){this.operatorList=s[2],this.matrix=s[3]||[1,0,0,1,0,0],this.bbox=s[4],this.xstep=s[5],this.ystep=s[6],this.paintType=s[7],this.tilingType=s[8],this.color=h,this.ctx=F,this.canvasGraphicsFactory=P,this.baseTransform=m}createPatternCanvas(s){const h=this.operatorList,F=this.bbox,P=this.xstep,m=this.ystep,t=this.paintType,v=this.color,b=this.canvasGraphicsFactory;(0,_.info)("TilingType: "+this.tilingType);const A=F[0],D=F[1],k=F[2],V=F[3],U=_.Util.singularValueDecompose2dScale(this.matrix),I=_.Util.singularValueDecompose2dScale(this.baseTransform),O=[U[0]*I[0],U[1]*I[1]],G=this.getSizeAndScale(P,this.ctx.canvas.width,O[0]),L=this.getSizeAndScale(m,this.ctx.canvas.height,O[1]),H=s.cachedCanvases.getCanvas("pattern",G.size,L.size,!0),y=H.context,o=b.createCanvasGraphics(y);o.groupLevel=s.groupLevel,this.setFillAndStrokeStyleToContext(o,t,v);let a=A,S=D,g=k,x=V;return A<0&&(a=0,g+=Math.abs(A)),D<0&&(S=0,x+=Math.abs(D)),y.translate(-G.scale*a,-L.scale*S),o.transform(G.scale,0,0,L.scale,0,0),y.save(),this.clipBbox(o,a,S,g,x),o.baseTransform=o.ctx.mozCurrentTransform.slice(),o.executeOperatorList(h),o.endDrawing(),{canvas:H.canvas,scaleX:G.scale,scaleY:L.scale,offsetX:a,offsetY:S}}getSizeAndScale(s,h,F){s=Math.abs(s);const P=Math.max(E.MAX_PATTERN_SIZE,h);let m=Math.ceil(s*F);return m>=P?m=P:F=m/s,{scale:F,size:m}}clipBbox(s,h,F,P,m){s.ctx.rect(h,F,P-h,m-F),s.clip(),s.endPath()}setFillAndStrokeStyleToContext(s,h,F){const P=s.ctx,m=s.current;switch(h){case 1:const t=this.ctx;P.fillStyle=t.fillStyle,P.strokeStyle=t.strokeStyle,m.fillColor=t.fillStyle,m.strokeColor=t.strokeStyle;break;case 2:const i=_.Util.makeHexColor(F[0],F[1],F[2]);P.fillStyle=i,P.strokeStyle=i,m.fillColor=i,m.strokeColor=i;break;default:throw new _.FormatError(`Unsupported paint type: ${h}`)}}getPattern(s,h,F,P){let m=F;P!==ae.SHADING&&(m=_.Util.transform(m,h.baseTransform),this.matrix&&(m=_.Util.transform(m,this.matrix)));const t=this.createPatternCanvas(h);let i=new DOMMatrix(m);i=i.translate(t.offsetX,t.offsetY),i=i.scale(1/t.scaleX,1/t.scaleY);const v=s.createPattern(t.canvas,"repeat");try{v.setTransform(i)}catch(b){(0,_.warn)(`TilingPattern.getPattern: "${null==b?void 0:b.message}".`)}return v}}M.TilingPattern=E},(oe,M)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.GlobalWorkerOptions=void 0;const K=Object.create(null);M.GlobalWorkerOptions=K,K.workerPort=void 0===K.workerPort?null:K.workerPort,K.workerSrc=void 0===K.workerSrc?"":K.workerSrc},(oe,M,K)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.MessageHandler=void 0;var _=K(1);function re(T){switch(T instanceof Error||"object"==typeof T&&null!==T||(0,_.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),T.name){case"AbortException":return new _.AbortException(T.message);case"MissingPDFException":return new _.MissingPDFException(T.message);case"PasswordException":return new _.PasswordException(T.message,T.code);case"UnexpectedResponseException":return new _.UnexpectedResponseException(T.message,T.status);case"UnknownErrorException":return new _.UnknownErrorException(T.message,T.details);default:return new _.UnknownErrorException(T.message,T.toString())}}M.MessageHandler=class{constructor(e,c,r){this.sourceName=e,this.targetName=c,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=l=>{const f=l.data;if(f.targetName!==this.sourceName)return;if(f.stream)return void this._processStreamMessage(f);if(f.callback){const u=f.callbackId,s=this.callbackCapabilities[u];if(!s)throw new Error(`Cannot resolve callback ${u}`);if(delete this.callbackCapabilities[u],1===f.callback)s.resolve(f.data);else{if(2!==f.callback)throw new Error("Unexpected callback case");s.reject(re(f.reason))}return}const E=this.actionHandler[f.action];if(!E)throw new Error(`Unknown action from worker: ${f.action}`);if(f.callbackId){const u=this.sourceName,s=f.sourceName;new Promise(function(h){h(E(f.data))}).then(function(h){r.postMessage({sourceName:u,targetName:s,callback:1,callbackId:f.callbackId,data:h})},function(h){r.postMessage({sourceName:u,targetName:s,callback:2,callbackId:f.callbackId,reason:re(h)})})}else f.streamId?this._createStreamSink(f):E(f.data)},r.addEventListener("message",this._onComObjOnMessage)}on(e,c){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=c}send(e,c,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:c},r)}sendWithPromise(e,c,r){const l=this.callbackId++,f=(0,_.createPromiseCapability)();this.callbackCapabilities[l]=f;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:l,data:c},r)}catch(E){f.reject(E)}return f.promise}sendWithStream(e,c,r,l){const f=this.streamId++,E=this.sourceName,u=this.targetName,s=this.comObj;return new ReadableStream({start:h=>{const F=(0,_.createPromiseCapability)();return this.streamControllers[f]={controller:h,startCall:F,pullCall:null,cancelCall:null,isClosed:!1},s.postMessage({sourceName:E,targetName:u,action:e,streamId:f,data:c,desiredSize:h.desiredSize},l),F.promise},pull:h=>{const F=(0,_.createPromiseCapability)();return this.streamControllers[f].pullCall=F,s.postMessage({sourceName:E,targetName:u,stream:6,streamId:f,desiredSize:h.desiredSize}),F.promise},cancel:h=>{(0,_.assert)(h instanceof Error,"cancel must have a valid reason");const F=(0,_.createPromiseCapability)();return this.streamControllers[f].cancelCall=F,this.streamControllers[f].isClosed=!0,s.postMessage({sourceName:E,targetName:u,stream:1,streamId:f,reason:re(h)}),F.promise}},r)}_createStreamSink(e){const c=e.streamId,r=this.sourceName,l=e.sourceName,f=this.comObj,E=this,u=this.actionHandler[e.action],s={enqueue(h,F=1,P){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=F,m>0&&this.desiredSize<=0&&(this.sinkCapability=(0,_.createPromiseCapability)(),this.ready=this.sinkCapability.promise),f.postMessage({sourceName:r,targetName:l,stream:4,streamId:c,chunk:h},P)},close(){this.isCancelled||(this.isCancelled=!0,f.postMessage({sourceName:r,targetName:l,stream:3,streamId:c}),delete E.streamSinks[c])},error(h){(0,_.assert)(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,f.postMessage({sourceName:r,targetName:l,stream:5,streamId:c,reason:re(h)}))},sinkCapability:(0,_.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};s.sinkCapability.resolve(),s.ready=s.sinkCapability.promise,this.streamSinks[c]=s,new Promise(function(h){h(u(e.data,s))}).then(function(){f.postMessage({sourceName:r,targetName:l,stream:8,streamId:c,success:!0})},function(h){f.postMessage({sourceName:r,targetName:l,stream:8,streamId:c,reason:re(h)})})}_processStreamMessage(e){const c=e.streamId,r=this.sourceName,l=e.sourceName,f=this.comObj,E=this.streamControllers[c],u=this.streamSinks[c];switch(e.stream){case 8:e.success?E.startCall.resolve():E.startCall.reject(re(e.reason));break;case 7:e.success?E.pullCall.resolve():E.pullCall.reject(re(e.reason));break;case 6:if(!u){f.postMessage({sourceName:r,targetName:l,stream:7,streamId:c,success:!0});break}u.desiredSize<=0&&e.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=e.desiredSize,new Promise(function(s){s(u.onPull&&u.onPull())}).then(function(){f.postMessage({sourceName:r,targetName:l,stream:7,streamId:c,success:!0})},function(s){f.postMessage({sourceName:r,targetName:l,stream:7,streamId:c,reason:re(s)})});break;case 4:if((0,_.assert)(E,"enqueue should have stream controller"),E.isClosed)break;E.controller.enqueue(e.chunk);break;case 3:if((0,_.assert)(E,"close should have stream controller"),E.isClosed)break;E.isClosed=!0,E.controller.close(),this._deleteStreamController(E,c);break;case 5:(0,_.assert)(E,"error should have stream controller"),E.controller.error(re(e.reason)),this._deleteStreamController(E,c);break;case 2:e.success?E.cancelCall.resolve():E.cancelCall.reject(re(e.reason)),this._deleteStreamController(E,c);break;case 1:if(!u)break;new Promise(function(s){s(u.onCancel&&u.onCancel(re(e.reason)))}).then(function(){f.postMessage({sourceName:r,targetName:l,stream:2,streamId:c,success:!0})},function(s){f.postMessage({sourceName:r,targetName:l,stream:2,streamId:c,reason:re(s)})}),u.sinkCapability.reject(re(e.reason)),u.isCancelled=!0,delete this.streamSinks[c];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(e,c){var r=this;return _asyncToGenerator(function*(){yield Promise.allSettled([e.startCall&&e.startCall.promise,e.pullCall&&e.pullCall.promise,e.cancelCall&&e.cancelCall.promise]),delete r.streamControllers[c]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(oe,M,K)=>{var ne,re;Object.defineProperty(M,"__esModule",{value:!0}),M.Metadata=void 0;var _=K(1);ne=new WeakMap,re=new WeakMap,M.Metadata=class{constructor({parsedData:T,rawData:e}){ye(this,ne,void 0),ye(this,re,void 0),Pe(this,ne,T),Pe(this,re,e)}getRaw(){return ue(this,re)}get(T){var e;return null!=(e=ue(this,ne).get(T))?e:null}getAll(){return(0,_.objectFromMap)(ue(this,ne))}has(T){return ue(this,ne).has(T)}}},(oe,M,K)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.OptionalContentConfig=void 0;var _=K(1);class ae{constructor(te,T){this.visible=!0,this.name=te,this.intent=T}}M.OptionalContentConfig=class{constructor(te){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==te){this.name=te.name,this.creator=te.creator,this._order=te.order;for(const T of te.groups)this._groups.set(T.id,new ae(T.name,T.intent));if("OFF"===te.baseState)for(const T of this._groups)T.visible=!1;for(const T of te.on)this._groups.get(T).visible=!0;for(const T of te.off)this._groups.get(T).visible=!1}}_evaluateVisibilityExpression(te){const T=te.length;if(T<2)return!0;const e=te[0];for(let c=1;c<T;c++){const r=te[c];let l;if(Array.isArray(r))l=this._evaluateVisibilityExpression(r);else{if(!this._groups.has(r))return(0,_.warn)(`Optional content group not found: ${r}`),!0;l=this._groups.get(r).visible}switch(e){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return"And"===e}isVisible(te){if(0===this._groups.size)return!0;if(!te)return(0,_.warn)("Optional content group not defined."),!0;if("OCG"===te.type)return this._groups.has(te.id)?this._groups.get(te.id).visible:((0,_.warn)(`Optional content group not found: ${te.id}`),!0);if("OCMD"===te.type){if(te.expression)return this._evaluateVisibilityExpression(te.expression);if(!te.policy||"AnyOn"===te.policy){for(const T of te.ids){if(!this._groups.has(T))return(0,_.warn)(`Optional content group not found: ${T}`),!0;if(this._groups.get(T).visible)return!0}return!1}if("AllOn"===te.policy){for(const T of te.ids){if(!this._groups.has(T))return(0,_.warn)(`Optional content group not found: ${T}`),!0;if(!this._groups.get(T).visible)return!1}return!0}if("AnyOff"===te.policy){for(const T of te.ids){if(!this._groups.has(T))return(0,_.warn)(`Optional content group not found: ${T}`),!0;if(!this._groups.get(T).visible)return!0}return!1}if("AllOff"===te.policy){for(const T of te.ids){if(!this._groups.has(T))return(0,_.warn)(`Optional content group not found: ${T}`),!0;if(this._groups.get(T).visible)return!1}return!0}return(0,_.warn)(`Unknown optional content policy ${te.policy}.`),!0}return(0,_.warn)(`Unknown group type ${te.type}.`),!0}setVisibility(te,T=!0){this._groups.has(te)?this._groups.get(te).visible=!!T:(0,_.warn)(`Optional content group not found: ${te}`)}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,_.objectFromMap)(this._groups):null}getGroup(te){return this._groups.get(te)||null}}},(oe,M,K)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.PDFDataTransportStream=void 0;var _=K(1),ae=K(5);M.PDFDataTransportStream=class{constructor(e,c){(0,_.assert)(c,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=e.progressiveDone||!1,this._contentDispositionFilename=e.contentDispositionFilename||null;const r=e.initialData;if((null==r?void 0:r.length)>0){const l=new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=c,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._contentLength=e.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((l,f)=>{this._onReceiveData({begin:l,chunk:f})}),this._pdfDataRangeTransport.addProgressListener((l,f)=>{this._onProgress({loaded:l,total:f})}),this._pdfDataRangeTransport.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(e){const c=new Uint8Array(e.chunk).buffer;if(void 0===e.begin)this._fullRequestReader?this._fullRequestReader._enqueue(c):this._queuedChunks.push(c);else{const r=this._rangeReaders.some(function(l){return l._begin===e.begin&&(l._enqueue(c),!0)});(0,_.assert)(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e,c;return null!=(c=null==(e=this._fullRequestReader)?void 0:e._loaded)?c:0}_onProgress(e){if(void 0===e.total){const c=this._rangeReaders[0];(null==c?void 0:c.onProgress)&&c.onProgress({loaded:e.loaded})}else{const c=this._fullRequestReader;(null==c?void 0:c.onProgress)&&c.onProgress({loaded:e.loaded,total:e.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const c=this._rangeReaders.indexOf(e);c>=0&&this._rangeReaders.splice(c,1)}getFullReader(){(0,_.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new re(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,c){if(c<=this._progressiveDataLength)return null;const r=new te(this,e,c);return this._pdfDataRangeTransport.requestDataRange(e,c),this._rangeReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader&&this._fullRequestReader.cancel(e);for(const c of this._rangeReaders.slice(0))c.cancel(e);this._pdfDataRangeTransport.abort()}};class re{constructor(e,c,r=!1,l=null){this._stream=e,this._done=r||!1,this._filename=(0,ae.isPdfFile)(l)?l:null,this._queuedChunks=c||[],this._loaded=0;for(const f of this._queuedChunks)this._loaded+=f.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var e=this;return _asyncToGenerator(function*(){if(e._queuedChunks.length>0)return{value:e._queuedChunks.shift(),done:!1};if(e._done)return{value:void 0,done:!0};const c=(0,_.createPromiseCapability)();return e._requests.push(c),c.promise})()}cancel(e){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class te{constructor(e,c,r){this._stream=e,this._begin=c,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var e=this;return _asyncToGenerator(function*(){if(e._queuedChunk){const r=e._queuedChunk;return e._queuedChunk=null,{value:r,done:!1}}if(e._done)return{value:void 0,done:!0};const c=(0,_.createPromiseCapability)();return e._requests.push(c),c.promise})()}cancel(e){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(oe,M)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.XfaText=void 0;class K{static textContent(ae){const ne=[],re={items:ne,styles:Object.create(null)};return function te(T){var r;if(!T)return;let e=null;const c=T.name;if("#text"===c)e=T.value;else{if(!K.shouldBuildText(c))return;(null==(r=null==T?void 0:T.attributes)?void 0:r.textContent)?e=T.attributes.textContent:T.value&&(e=T.value)}if(null!==e&&ne.push({str:e}),T.children)for(const l of T.children)te(l)}(ae),re}static shouldBuildText(ae){return!("textarea"===ae||"input"===ae||"option"===ae||"select"===ae)}}M.XfaText=K},(oe,M,K)=>{var S,Je;Object.defineProperty(M,"__esModule",{value:!0}),M.AnnotationLayer=void 0;var _=K(1),ae=K(5),ne=K(9),re=K(19),te=K(20);const T=1e3,e=new WeakSet;function c(x){return{width:x[2]-x[0],height:x[3]-x[1]}}class r{static create(n){switch(n.data.annotationType){case _.AnnotationType.LINK:return new f(n);case _.AnnotationType.TEXT:return new E(n);case _.AnnotationType.WIDGET:switch(n.data.fieldType){case"Tx":return new s(n);case"Btn":return n.data.radioButton?new F(n):n.data.checkBox?new h(n):new P(n);case"Ch":return new m(n)}return new u(n);case _.AnnotationType.POPUP:return new t(n);case _.AnnotationType.FREETEXT:return new v(n);case _.AnnotationType.LINE:return new b(n);case _.AnnotationType.SQUARE:return new A(n);case _.AnnotationType.CIRCLE:return new D(n);case _.AnnotationType.POLYLINE:return new k(n);case _.AnnotationType.CARET:return new U(n);case _.AnnotationType.INK:return new I(n);case _.AnnotationType.POLYGON:return new V(n);case _.AnnotationType.HIGHLIGHT:return new O(n);case _.AnnotationType.UNDERLINE:return new G(n);case _.AnnotationType.SQUIGGLY:return new L(n);case _.AnnotationType.STRIKEOUT:return new H(n);case _.AnnotationType.STAMP:return new y(n);case _.AnnotationType.FILEATTACHMENT:return new o(n);default:return new l(n)}}}class l{constructor(n,{isRenderable:C=!1,ignoreBorder:w=!1,createQuadrilaterals:B=!1}={}){this.isRenderable=C,this.data=n.data,this.layer=n.layer,this.page=n.page,this.viewport=n.viewport,this.linkService=n.linkService,this.downloadManager=n.downloadManager,this.imageResourcesPath=n.imageResourcesPath,this.renderForms=n.renderForms,this.svgFactory=n.svgFactory,this.annotationStorage=n.annotationStorage,this.enableScripting=n.enableScripting,this.hasJSActions=n.hasJSActions,this._fieldObjects=n.fieldObjects,this._mouseState=n.mouseState,C&&(this.container=this._createContainer(w)),B&&(this.quadrilaterals=this._createQuadrilaterals(w))}_createContainer(n=!1){const C=this.data,w=this.page,B=this.viewport,p=document.createElement("section");let{width:j,height:X}=c(C.rect);p.setAttribute("data-annotation-id",C.id);const W=_.Util.normalizeRect([C.rect[0],w.view[3]-C.rect[1]+w.view[1],C.rect[2],w.view[3]-C.rect[3]+w.view[1]]);if(C.hasOwnCanvas){const q=B.transform.slice(),[N,Q]=_.Util.singularValueDecompose2dScale(q);j=Math.ceil(j*N),X=Math.ceil(X*Q),W[0]*=N,W[1]*=Q;for(let ee=0;ee<4;ee++)q[ee]=Math.sign(q[ee]);p.style.transform=`matrix(${q.join(",")})`}else p.style.transform=`matrix(${B.transform.join(",")})`;if(p.style.transformOrigin=`${-W[0]}px ${-W[1]}px`,!n&&C.borderStyle.width>0){p.style.borderWidth=`${C.borderStyle.width}px`,C.borderStyle.style!==_.AnnotationBorderStyleType.UNDERLINE&&(j-=2*C.borderStyle.width,X-=2*C.borderStyle.width);const q=C.borderStyle.horizontalCornerRadius,N=C.borderStyle.verticalCornerRadius;switch((q>0||N>0)&&(p.style.borderRadius=`${q}px / ${N}px`),C.borderStyle.style){case _.AnnotationBorderStyleType.SOLID:p.style.borderStyle="solid";break;case _.AnnotationBorderStyleType.DASHED:p.style.borderStyle="dashed";break;case _.AnnotationBorderStyleType.BEVELED:(0,_.warn)("Unimplemented border style: beveled");break;case _.AnnotationBorderStyleType.INSET:(0,_.warn)("Unimplemented border style: inset");break;case _.AnnotationBorderStyleType.UNDERLINE:p.style.borderBottomStyle="solid"}C.borderColor||C.color?p.style.borderColor=_.Util.makeHexColor(0|C.color[0],0|C.color[1],0|C.color[2]):p.style.borderWidth=0}return p.style.left=`${W[0]}px`,p.style.top=`${W[1]}px`,C.hasOwnCanvas?p.style.width=p.style.height="auto":(p.style.width=`${j}px`,p.style.height=`${X}px`),p}_createQuadrilaterals(n=!1){if(!this.data.quadPoints)return null;const C=[],w=this.data.rect;for(const B of this.data.quadPoints)this.data.rect=[B[2].x,B[2].y,B[1].x,B[1].y],C.push(this._createContainer(n));return this.data.rect=w,C}_createPopup(n,C){let w=this.container;this.quadrilaterals&&(n=n||this.quadrilaterals,w=this.quadrilaterals[0]),n||((n=document.createElement("div")).style.height=w.style.height,n.style.width=w.style.width,w.appendChild(n));const p=new i({container:w,trigger:n,color:C.color,titleObj:C.titleObj,modificationDate:C.modificationDate,contentsObj:C.contentsObj,richText:C.richText,hideWrapper:!0}).render();p.style.left=w.style.width,w.appendChild(p)}_renderQuadrilaterals(n){for(const C of this.quadrilaterals)C.className=n;return this.quadrilaterals}render(){(0,_.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(n,C=null){const w=[];if(this._fieldObjects){const B=this._fieldObjects[n];if(B)for(const{page:p,id:j,exportValues:X}of B){if(-1===p||j===C)continue;const W="string"==typeof X?X:null,q=document.getElementById(j);!q||e.has(q)?w.push({id:j,exportValue:W,domElement:q}):(0,_.warn)(`_getElementsByName - element not allowed: ${j}`)}return w}for(const B of document.getElementsByName(n)){const{id:p,exportValue:j}=B;p!==C&&(!e.has(B)||w.push({id:p,exportValue:j,domElement:B}))}return w}static get platform(){const n="undefined"!=typeof navigator?navigator.platform:"";return(0,_.shadow)(this,"platform",{isWin:n.includes("Win"),isMac:n.includes("Mac")})}}class f extends l{constructor(n,C=null){super(n,{isRenderable:!!(n.data.url||n.data.dest||n.data.action||n.data.isTooltipOnly||n.data.resetForm||n.data.actions&&(n.data.actions.Action||n.data.actions["Mouse Up"]||n.data.actions["Mouse Down"])),ignoreBorder:!!(null==C?void 0:C.ignoreBorder),createQuadrilaterals:!0})}render(){var B;const{data:n,linkService:C}=this,w=document.createElement("a");if(n.url)C.addLinkAttributes||(0,_.warn)("LinkAnnotationElement.render - missing `addLinkAttributes`-method on the `linkService`-instance."),null==(B=C.addLinkAttributes)||B.call(C,w,n.url,n.newWindow);else if(n.action)this._bindNamedAction(w,n.action);else if(n.dest)this._bindLink(w,n.dest);else{let p=!1;n.actions&&(n.actions.Action||n.actions["Mouse Up"]||n.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(p=!0,this._bindJSAction(w,n)),n.resetForm?this._bindResetFormAction(w,n.resetForm):p||this._bindLink(w,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((p,j)=>{const X=0===j?w:w.cloneNode();return p.appendChild(X),p}):(this.container.className="linkAnnotation",this.container.appendChild(w),this.container)}_bindLink(n,C){n.href=this.linkService.getDestinationHash(C),n.onclick=()=>(C&&this.linkService.goToDestination(C),!1),(C||""===C)&&(n.className="internalLink")}_bindNamedAction(n,C){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeNamedAction(C),!1),n.className="internalLink"}_bindJSAction(n,C){n.href=this.linkService.getAnchorUrl("");const w=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const B of Object.keys(C.actions)){const p=w.get(B);!p||(n[p]=()=>{var j;return null==(j=this.linkService.eventBus)||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C.id,name:B}}),!1})}n.onclick||(n.onclick=()=>!1),n.className="internalLink"}_bindResetFormAction(n,C){const w=n.onclick;if(w||(n.href=this.linkService.getAnchorUrl("")),n.className="internalLink",!this._fieldObjects)return(0,_.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(w||(n.onclick=()=>!1));n.onclick=()=>{var N;w&&w();const{fields:B,refs:p,include:j}=C,X=[];if(0!==B.length||0!==p.length){const Q=new Set(p);for(const ee of B){const le=this._fieldObjects[ee]||[];for(const{id:d}of le)Q.add(d)}for(const ee of Object.values(this._fieldObjects))for(const le of ee)Q.has(le.id)===j&&X.push(le)}else for(const Q of Object.values(this._fieldObjects))X.push(...Q);const W=this.annotationStorage,q=[];for(const Q of X){const{id:ee}=Q;switch(q.push(ee),Q.type){case"text":{const d=Q.defaultValue||"";W.setValue(ee,{value:d,valueAsString:d});break}case"checkbox":case"radiobutton":W.setValue(ee,{value:Q.defaultValue===Q.exportValues});break;case"combobox":case"listbox":W.setValue(ee,{value:Q.defaultValue||""});break;default:continue}const le=document.getElementById(ee);!le||!e.has(le)||le.dispatchEvent(new Event("resetform"))}return this.enableScripting&&(null==(N=this.linkService.eventBus)||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:q,name:"ResetForm"}})),!1}}}class E extends l{constructor(n){var w,B,p;super(n,{isRenderable:!!(n.data.hasPopup||(null==(w=n.data.titleObj)?void 0:w.str)||(null==(B=n.data.contentsObj)?void 0:B.str)||(null==(p=n.data.richText)?void 0:p.str))})}render(){this.container.className="textAnnotation";const n=document.createElement("img");return n.style.height=this.container.style.height,n.style.width=this.container.style.width,n.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",n.alt="[{{type}} Annotation]",n.dataset.l10nId="text_annotation_type",n.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(n,this.data),this.container.appendChild(n),this.container}}class u extends l{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(n){const{isWin:C,isMac:w}=l.platform;return C&&n.ctrlKey||w&&n.metaKey}_setEventListener(n,C,w,B){C.includes("mouse")?n.addEventListener(C,p=>{var j;null==(j=this.linkService.eventBus)||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:w,value:B(p),shift:p.shiftKey,modifier:this._getKeyModifier(p)}})}):n.addEventListener(C,p=>{var j;null==(j=this.linkService.eventBus)||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:w,value:B(p)}})})}_setEventListeners(n,C,w){var B;for(const[p,j]of C)("Action"===j||(null==(B=this.data.actions)?void 0:B[j]))&&this._setEventListener(n,p,j,w)}_setBackgroundColor(n){const C=this.data.backgroundColor||null;n.style.backgroundColor=null===C?"transparent":_.Util.makeHexColor(C[0],C[1],C[2])}_dispatchEventFromSandbox(n,C){const w=(p,j,X)=>{const W=X.detail[p];X.target.style[j]=re.ColorConverters[`${W[0]}_HTML`](W.slice(1))},B={display:p=>{const j=p.detail.display%2==1;p.target.style.visibility=j?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:j,print:0===p.detail.display||3===p.detail.display})},print:p=>{this.annotationStorage.setValue(this.data.id,{print:p.detail.print})},hidden:p=>{p.target.style.visibility=p.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:p.detail.hidden})},focus:p=>{setTimeout(()=>p.target.focus({preventScroll:!1}),0)},userName:p=>{p.target.title=p.detail.userName},readonly:p=>{p.detail.readonly?p.target.setAttribute("readonly",""):p.target.removeAttribute("readonly")},required:p=>{p.detail.required?p.target.setAttribute("required",""):p.target.removeAttribute("required")},bgColor:p=>{w("bgColor","backgroundColor",p)},fillColor:p=>{w("fillColor","backgroundColor",p)},fgColor:p=>{w("fgColor","color",p)},textColor:p=>{w("textColor","color",p)},borderColor:p=>{w("borderColor","borderColor",p)},strokeColor:p=>{w("strokeColor","borderColor",p)}};for(const p of Object.keys(C.detail)){const j=n[p]||B[p];j&&j(C)}}}class s extends u{constructor(n){super(n,{isRenderable:n.renderForms||!n.data.hasAppearance&&!!n.data.fieldValue})}setPropertyOnSiblings(n,C,w,B){const p=this.annotationStorage;for(const j of this._getElementsByName(n.name,n.id))j.domElement&&(j.domElement[C]=w),p.setValue(j.id,{[B]:w})}render(){var B;const n=this.annotationStorage,C=this.data.id;this.container.className="textWidgetAnnotation";let w=null;if(this.renderForms){const p=n.getValue(C,{value:this.data.fieldValue,valueAsString:this.data.fieldValue}),j=p.valueAsString||p.value||"",X={userValue:null,formattedValue:null};this.data.multiLine?(w=document.createElement("textarea"),w.textContent=j):(w=document.createElement("input"),w.type="text",w.setAttribute("value",j)),e.add(w),w.disabled=this.data.readOnly,w.name=this.data.fieldName,w.tabIndex=T,X.userValue=j,w.setAttribute("id",C),w.addEventListener("input",q=>{n.setValue(C,{value:q.target.value}),this.setPropertyOnSiblings(w,"value",q.target.value,"value")}),w.addEventListener("resetform",q=>{w.value=X.userValue=this.data.defaultFieldValue||"",delete X.formattedValue});let W=q=>{X.formattedValue&&(q.target.value=X.formattedValue),q.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){w.addEventListener("focus",N=>{X.userValue&&(N.target.value=X.userValue)}),w.addEventListener("updatefromsandbox",N=>{this._dispatchEventFromSandbox({value(ee){X.userValue=ee.detail.value||"",n.setValue(C,{value:X.userValue.toString()}),X.formattedValue||(ee.target.value=X.userValue)},valueAsString(ee){X.formattedValue=ee.detail.valueAsString||"",ee.target!==document.activeElement&&(ee.target.value=X.formattedValue),n.setValue(C,{formattedValue:X.formattedValue})},selRange(ee){const[le,d]=ee.detail.selRange;le>=0&&d<ee.target.value.length&&ee.target.setSelectionRange(le,d)}},N)}),w.addEventListener("keydown",N=>{var ee;let Q=-1;"Escape"===N.key?Q=0:"Enter"===N.key?Q=2:"Tab"===N.key&&(Q=3),-1!==Q&&(X.userValue=N.target.value,null==(ee=this.linkService.eventBus)||ee.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:N.target.value,willCommit:!0,commitKey:Q,selStart:N.target.selectionStart,selEnd:N.target.selectionEnd}}))});const q=W;W=null,w.addEventListener("blur",N=>{var Q;X.userValue=N.target.value,this._mouseState.isDown&&(null==(Q=this.linkService.eventBus)||Q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:N.target.value,willCommit:!0,commitKey:1,selStart:N.target.selectionStart,selEnd:N.target.selectionEnd}})),q(N)}),(null==(B=this.data.actions)?void 0:B.Keystroke)&&w.addEventListener("beforeinput",N=>{var Z;X.formattedValue="";const{data:Q,target:ee}=N,{value:le,selectionStart:d,selectionEnd:R}=ee;null==(Z=this.linkService.eventBus)||Z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:le,change:Q,willCommit:!1,selStart:d,selEnd:R}})}),this._setEventListeners(w,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],N=>N.target.value)}if(W&&w.addEventListener("blur",W),null!==this.data.maxLen&&(w.maxLength=this.data.maxLen),this.data.comb){const N=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;w.classList.add("comb"),w.style.letterSpacing=`calc(${N}px - 1ch)`}}else w=document.createElement("div"),w.textContent=this.data.fieldValue,w.style.verticalAlign="middle",w.style.display="table-cell";return this._setTextStyle(w),this._setBackgroundColor(w),this.container.appendChild(w),this.container}_setTextStyle(n){const{fontSize:w,fontColor:B}=this.data.defaultAppearanceData,p=n.style;w&&(p.fontSize=`${w}px`),p.color=_.Util.makeHexColor(B[0],B[1],B[2]),null!==this.data.textAlignment&&(p.textAlign=["left","center","right"][this.data.textAlignment])}}class h extends u{constructor(n){super(n,{isRenderable:n.renderForms})}render(){const n=this.annotationStorage,C=this.data,w=C.id;let B=n.getValue(w,{value:C.exportValue===C.fieldValue}).value;"string"==typeof B&&(B="Off"!==B,n.setValue(w,{value:B})),this.container.className="buttonWidgetAnnotation checkBox";const p=document.createElement("input");return e.add(p),p.disabled=C.readOnly,p.type="checkbox",p.name=C.fieldName,B&&p.setAttribute("checked",!0),p.setAttribute("id",w),p.setAttribute("exportValue",C.exportValue),p.tabIndex=T,p.addEventListener("change",j=>{const{name:X,checked:W}=j.target;for(const q of this._getElementsByName(X,w)){const N=W&&q.exportValue===C.exportValue;q.domElement&&(q.domElement.checked=N),n.setValue(q.id,{value:N})}n.setValue(w,{value:W})}),p.addEventListener("resetform",j=>{j.target.checked=(C.defaultFieldValue||"Off")===C.exportValue}),this.enableScripting&&this.hasJSActions&&(p.addEventListener("updatefromsandbox",j=>{this._dispatchEventFromSandbox({value(W){W.target.checked="Off"!==W.detail.value,n.setValue(w,{value:W.target.checked})}},j)}),this._setEventListeners(p,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],j=>j.target.checked)),this._setBackgroundColor(p),this.container.appendChild(p),this.container}}class F extends u{constructor(n){super(n,{isRenderable:n.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const n=this.annotationStorage,C=this.data,w=C.id;let B=n.getValue(w,{value:C.fieldValue===C.buttonValue}).value;"string"==typeof B&&(B=B!==C.buttonValue,n.setValue(w,{value:B}));const p=document.createElement("input");if(e.add(p),p.disabled=C.readOnly,p.type="radio",p.name=C.fieldName,B&&p.setAttribute("checked",!0),p.setAttribute("id",w),p.tabIndex=T,p.addEventListener("change",j=>{const{name:X,checked:W}=j.target;for(const q of this._getElementsByName(X,w))n.setValue(q.id,{value:!1});n.setValue(w,{value:W})}),p.addEventListener("resetform",j=>{const X=C.defaultFieldValue;j.target.checked=null!=X&&X===C.buttonValue}),this.enableScripting&&this.hasJSActions){const j=C.buttonValue;p.addEventListener("updatefromsandbox",X=>{this._dispatchEventFromSandbox({value:q=>{const N=j===q.detail.value;for(const Q of this._getElementsByName(q.target.name)){const ee=N&&Q.id===w;Q.domElement&&(Q.domElement.checked=ee),n.setValue(Q.id,{value:ee})}}},X)}),this._setEventListeners(p,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],X=>X.target.checked)}return this._setBackgroundColor(p),this.container.appendChild(p),this.container}}class P extends f{constructor(n){super(n,{ignoreBorder:n.data.hasAppearance})}render(){const n=super.render();return n.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(n.title=this.data.alternativeText),n}}class m extends u{constructor(n){super(n,{isRenderable:n.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const n=this.annotationStorage,C=this.data.id;n.getValue(C,{value:this.data.fieldValue.length>0?this.data.fieldValue[0]:void 0});let{fontSize:w}=this.data.defaultAppearanceData;w||(w=9);const B=`calc(${w}px * var(--zoom-factor))`,p=document.createElement("select");e.add(p),p.disabled=this.data.readOnly,p.name=this.data.fieldName,p.setAttribute("id",C),p.tabIndex=T,p.style.fontSize=`${w}px`,this.data.combo||(p.size=this.data.options.length,this.data.multiSelect&&(p.multiple=!0)),p.addEventListener("resetform",W=>{const q=this.data.defaultFieldValue;for(const N of p.options)N.selected=N.value===q});for(const W of this.data.options){const q=document.createElement("option");q.textContent=W.displayValue,q.value=W.exportValue,this.data.combo&&(q.style.fontSize=B),this.data.fieldValue.includes(W.exportValue)&&q.setAttribute("selected",!0),p.appendChild(q)}const j=(W,q)=>{const N=q?"value":"textContent",Q=W.target.options;return W.target.multiple?Array.prototype.filter.call(Q,ee=>ee.selected).map(ee=>ee[N]):-1===Q.selectedIndex?null:Q[Q.selectedIndex][N]},X=W=>Array.prototype.map.call(W.target.options,N=>({displayValue:N.textContent,exportValue:N.value}));return this.enableScripting&&this.hasJSActions?(p.addEventListener("updatefromsandbox",W=>{this._dispatchEventFromSandbox({value(N){const Q=N.detail.value,ee=new Set(Array.isArray(Q)?Q:[Q]);for(const le of p.options)le.selected=ee.has(le.value);n.setValue(C,{value:j(N,!0)})},multipleSelection(N){p.multiple=!0},remove(N){const Q=p.options,ee=N.detail.remove;Q[ee].selected=!1,p.remove(ee),Q.length>0&&-1===Array.prototype.findIndex.call(Q,d=>d.selected)&&(Q[0].selected=!0),n.setValue(C,{value:j(N,!0),items:X(N)})},clear(N){for(;0!==p.length;)p.remove(0);n.setValue(C,{value:null,items:[]})},insert(N){const{index:Q,displayValue:ee,exportValue:le}=N.detail.insert,d=document.createElement("option");d.textContent=ee,d.value=le,p.insertBefore(d,p.children[Q]),n.setValue(C,{value:j(N,!0),items:X(N)})},items(N){const{items:Q}=N.detail;for(;0!==p.length;)p.remove(0);for(const ee of Q){const{displayValue:le,exportValue:d}=ee,R=document.createElement("option");R.textContent=le,R.value=d,p.appendChild(R)}p.options.length>0&&(p.options[0].selected=!0),n.setValue(C,{value:j(N,!0),items:X(N)})},indices(N){const Q=new Set(N.detail.indices);for(const ee of N.target.options)ee.selected=Q.has(ee.index);n.setValue(C,{value:j(N,!0)})},editable(N){N.target.disabled=!N.detail.editable}},W)}),p.addEventListener("input",W=>{var Q;const q=j(W,!0),N=j(W,!1);n.setValue(C,{value:q}),null==(Q=this.linkService.eventBus)||Q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:N,changeEx:q,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(p,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],W=>W.target.checked)):p.addEventListener("input",function(W){n.setValue(C,{value:j(W)})}),this._setBackgroundColor(p),this.container.appendChild(p),this.container}}class t extends l{constructor(n){var w,B,p;super(n,{isRenderable:!!((null==(w=n.data.titleObj)?void 0:w.str)||(null==(B=n.data.contentsObj)?void 0:B.str)||(null==(p=n.data.richText)?void 0:p.str))})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const w=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===w.length)return this.container;const B=new i({container:this.container,trigger:Array.from(w),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),p=this.page,j=_.Util.normalizeRect([this.data.parentRect[0],p.view[3]-this.data.parentRect[1]+p.view[1],this.data.parentRect[2],p.view[3]-this.data.parentRect[3]+p.view[1]]),X=j[0]+this.data.parentRect[2]-this.data.parentRect[0],W=j[1];return this.container.style.transformOrigin=`${-X}px ${-W}px`,this.container.style.left=`${X}px`,this.container.style.top=`${W}px`,this.container.appendChild(B.render()),this.container}}class i{constructor(n){this.container=n.container,this.trigger=n.trigger,this.color=n.color,this.titleObj=n.titleObj,this.modificationDate=n.modificationDate,this.contentsObj=n.contentsObj,this.richText=n.richText,this.hideWrapper=n.hideWrapper||!1,this.pinned=!1}render(){var X,W;const C=document.createElement("div");C.className="popupWrapper",this.hideElement=this.hideWrapper?C:this.container,this.hideElement.hidden=!0;const w=document.createElement("div");w.className="popup";const B=this.color;B&&(w.style.backgroundColor=_.Util.makeHexColor(0|.7*(255-B[0])+B[0],0|.7*(255-B[1])+B[1],0|.7*(255-B[2])+B[2]));const p=document.createElement("h1");p.dir=this.titleObj.dir,p.textContent=this.titleObj.str,w.appendChild(p);const j=ae.PDFDateString.toDateObject(this.modificationDate);if(j){const q=document.createElement("span");q.className="popupDate",q.textContent="{{date}}, {{time}}",q.dataset.l10nId="annotation_date_string",q.dataset.l10nArgs=JSON.stringify({date:j.toLocaleDateString(),time:j.toLocaleTimeString()}),w.appendChild(q)}if(!(null==(X=this.richText)?void 0:X.str)||(null==(W=this.contentsObj)?void 0:W.str)&&this.contentsObj.str!==this.richText.str){const q=this._formatContents(this.contentsObj);w.appendChild(q)}else te.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:w}),w.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const q of this.trigger)q.addEventListener("click",this._toggle.bind(this)),q.addEventListener("mouseover",this._show.bind(this,!1)),q.addEventListener("mouseout",this._hide.bind(this,!1));return w.addEventListener("click",this._hide.bind(this,!0)),C.appendChild(w),C}_formatContents({str:n,dir:C}){const w=document.createElement("p");w.className="popupContent",w.dir=C;const B=n.split(/(?:\r\n?|\n)/);for(let p=0,j=B.length;p<j;++p)w.appendChild(document.createTextNode(B[p])),p<j-1&&w.appendChild(document.createElement("br"));return w}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(n=!1){n&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(n=!0){n&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class v extends l{constructor(n){var w,B,p;super(n,{isRenderable:!!(n.data.hasPopup||(null==(w=n.data.titleObj)?void 0:w.str)||(null==(B=n.data.contentsObj)?void 0:B.str)||(null==(p=n.data.richText)?void 0:p.str)),ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class b extends l{constructor(n){var w,B,p;super(n,{isRenderable:!!(n.data.hasPopup||(null==(w=n.data.titleObj)?void 0:w.str)||(null==(B=n.data.contentsObj)?void 0:B.str)||(null==(p=n.data.richText)?void 0:p.str)),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const n=this.data,{width:C,height:w}=c(n.rect),B=this.svgFactory.create(C,w),p=this.svgFactory.createElement("svg:line");return p.setAttribute("x1",n.rect[2]-n.lineCoordinates[0]),p.setAttribute("y1",n.rect[3]-n.lineCoordinates[1]),p.setAttribute("x2",n.rect[2]-n.lineCoordinates[2]),p.setAttribute("y2",n.rect[3]-n.lineCoordinates[3]),p.setAttribute("stroke-width",n.borderStyle.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),B.appendChild(p),this.container.append(B),this._createPopup(p,n),this.container}}class A extends l{constructor(n){var w,B,p;super(n,{isRenderable:!!(n.data.hasPopup||(null==(w=n.data.titleObj)?void 0:w.str)||(null==(B=n.data.contentsObj)?void 0:B.str)||(null==(p=n.data.richText)?void 0:p.str)),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const n=this.data,{width:C,height:w}=c(n.rect),B=this.svgFactory.create(C,w),p=n.borderStyle.width,j=this.svgFactory.createElement("svg:rect");return j.setAttribute("x",p/2),j.setAttribute("y",p/2),j.setAttribute("width",C-p),j.setAttribute("height",w-p),j.setAttribute("stroke-width",p||1),j.setAttribute("stroke","transparent"),j.setAttribute("fill","transparent"),B.appendChild(j),this.container.append(B),this._createPopup(j,n),this.container}}class D extends l{constructor(n){var w,B,p;super(n,{isRenderable:!!(n.data.hasPopup||(null==(w=n.data.titleObj)?void 0:w.str)||(null==(B=n.data.contentsObj)?void 0:B.str)||(null==(p=n.data.richText)?void 0:p.str)),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const n=this.data,{width:C,height:w}=c(n.rect),B=this.svgFactory.create(C,w),p=n.borderStyle.width,j=this.svgFactory.createElement("svg:ellipse");return j.setAttribute("cx",C/2),j.setAttribute("cy",w/2),j.setAttribute("rx",C/2-p/2),j.setAttribute("ry",w/2-p/2),j.setAttribute("stroke-width",p||1),j.setAttribute("stroke","transparent"),j.setAttribute("fill","transparent"),B.appendChild(j),this.container.append(B),this._createPopup(j,n),this.container}}class k extends l{constructor(n){var w,B,p;super(n,{isRenderable:!!(n.data.hasPopup||(null==(w=n.data.titleObj)?void 0:w.str)||(null==(B=n.data.contentsObj)?void 0:B.str)||(null==(p=n.data.richText)?void 0:p.str)),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const n=this.data,{width:C,height:w}=c(n.rect),B=this.svgFactory.create(C,w);let p=[];for(const X of n.vertices)p.push(X.x-n.rect[0]+","+(n.rect[3]-X.y));p=p.join(" ");const j=this.svgFactory.createElement(this.svgElementName);return j.setAttribute("points",p),j.setAttribute("stroke-width",n.borderStyle.width||1),j.setAttribute("stroke","transparent"),j.setAttribute("fill","transparent"),B.appendChild(j),this.container.append(B),this._createPopup(j,n),this.container}}class V extends k{constructor(n){super(n),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class U extends l{constructor(n){var w,B,p;super(n,{isRenderable:!!(n.data.hasPopup||(null==(w=n.data.titleObj)?void 0:w.str)||(null==(B=n.data.contentsObj)?void 0:B.str)||(null==(p=n.data.richText)?void 0:p.str)),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class I extends l{constructor(n){var w,B,p;super(n,{isRenderable:!!(n.data.hasPopup||(null==(w=n.data.titleObj)?void 0:w.str)||(null==(B=n.data.contentsObj)?void 0:B.str)||(null==(p=n.data.richText)?void 0:p.str)),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const n=this.data,{width:C,height:w}=c(n.rect),B=this.svgFactory.create(C,w);for(const p of n.inkLists){let j=[];for(const W of p)j.push(`${W.x-n.rect[0]},${n.rect[3]-W.y}`);j=j.join(" ");const X=this.svgFactory.createElement(this.svgElementName);X.setAttribute("points",j),X.setAttribute("stroke-width",n.borderStyle.width||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),this._createPopup(X,n),B.appendChild(X)}return this.container.append(B),this.container}}class O extends l{constructor(n){var w,B,p;super(n,{isRenderable:!!(n.data.hasPopup||(null==(w=n.data.titleObj)?void 0:w.str)||(null==(B=n.data.contentsObj)?void 0:B.str)||(null==(p=n.data.richText)?void 0:p.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class G extends l{constructor(n){var w,B,p;super(n,{isRenderable:!!(n.data.hasPopup||(null==(w=n.data.titleObj)?void 0:w.str)||(null==(B=n.data.contentsObj)?void 0:B.str)||(null==(p=n.data.richText)?void 0:p.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class L extends l{constructor(n){var w,B,p;super(n,{isRenderable:!!(n.data.hasPopup||(null==(w=n.data.titleObj)?void 0:w.str)||(null==(B=n.data.contentsObj)?void 0:B.str)||(null==(p=n.data.richText)?void 0:p.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class H extends l{constructor(n){var w,B,p;super(n,{isRenderable:!!(n.data.hasPopup||(null==(w=n.data.titleObj)?void 0:w.str)||(null==(B=n.data.contentsObj)?void 0:B.str)||(null==(p=n.data.richText)?void 0:p.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class y extends l{constructor(n){var w,B,p;super(n,{isRenderable:!!(n.data.hasPopup||(null==(w=n.data.titleObj)?void 0:w.str)||(null==(B=n.data.contentsObj)?void 0:B.str)||(null==(p=n.data.richText)?void 0:p.str)),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class o extends l{constructor(n){var B;super(n,{isRenderable:!0});const{filename:C,content:w}=this.data.file;this.filename=(0,ae.getFilenameFromUrl)(C),this.content=w,null==(B=this.linkService.eventBus)||B.dispatch("fileattachmentannotation",{source:this,id:(0,_.stringToPDFString)(C),filename:C,content:w})}render(){var C,w;this.container.className="fileAttachmentAnnotation";const n=document.createElement("div");return n.style.height=this.container.style.height,n.style.width=this.container.style.width,n.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((null==(C=this.data.titleObj)?void 0:C.str)||(null==(w=this.data.contentsObj)?void 0:w.str)||this.data.richText)&&this._createPopup(n,this.data),this.container.appendChild(n),this.container}_download(){var n;null==(n=this.downloadManager)||n.openOrDownloadData(this.container,this.content,this.filename)}}class a{static render(n){const C=[],w=[];for(const p of n.annotations){if(!p)continue;const{width:j,height:X}=c(p.rect);if(!(j<=0||X<=0)){if(p.annotationType===_.AnnotationType.POPUP){w.push(p);continue}C.push(p)}}w.length&&C.push(...w);const B=n.div;for(const p of C){const j=r.create({data:p,layer:B,page:n.page,viewport:n.viewport,linkService:n.linkService,downloadManager:n.downloadManager,imageResourcesPath:n.imageResourcesPath||"",renderForms:!1!==n.renderForms,svgFactory:new ae.DOMSVGFactory,annotationStorage:n.annotationStorage||new ne.AnnotationStorage,enableScripting:n.enableScripting,hasJSActions:n.hasJSActions,fieldObjects:n.fieldObjects,mouseState:n.mouseState||{isDown:!1}});if(j.isRenderable){const X=j.render();if(p.hidden&&(X.style.visibility="hidden"),Array.isArray(X))for(const W of X)B.appendChild(W);else j instanceof t?B.prepend(X):B.appendChild(X)}}xe(this,S,Je).call(this,B,n.annotationCanvasMap)}static update(n){const{page:C,viewport:w,annotations:B,annotationCanvasMap:p,div:j}=n,X=w.transform,W=`matrix(${X.join(",")})`;let q,N;for(const Q of B){const ee=j.querySelectorAll(`[data-annotation-id="${Q.id}"]`);if(ee)for(const le of ee)if(Q.hasOwnCanvas){const d=_.Util.normalizeRect([Q.rect[0],C.view[3]-Q.rect[1]+C.view[1],Q.rect[2],C.view[3]-Q.rect[3]+C.view[1]]);if(!N){q=Math.abs(X[0]||X[1]);const z=X.slice();for(let $=0;$<4;$++)z[$]=Math.sign(z[$]);N=`matrix(${z.join(",")})`}const R=d[0]*q,Z=d[1]*q;le.style.left=`${R}px`,le.style.top=`${Z}px`,le.style.transformOrigin=`${-R}px ${-Z}px`,le.style.transform=N}else le.style.transform=W}xe(this,S,Je).call(this,j,p),j.hidden=!1}}S=new WeakSet,Je=function(n,C){if(C){for(const[w,B]of C){const p=n.querySelector(`[data-annotation-id="${w}"]`);if(!p)continue;const{firstChild:j}=p;"CANVAS"===j.nodeName?p.replaceChild(B,j):p.insertBefore(B,j)}C.clear()}},ye(a,S),M.AnnotationLayer=a},(oe,M)=>{function K(ae){return Math.floor(255*Math.max(0,Math.min(1,ae))).toString(16).padStart(2,"0")}Object.defineProperty(M,"__esModule",{value:!0}),M.ColorConverters=void 0,M.ColorConverters=class{static CMYK_G([ne,re,te,T]){return["G",1-Math.min(1,.3*ne+.59*te+.11*re+T)]}static G_CMYK([ne]){return["CMYK",0,0,0,1-ne]}static G_RGB([ne]){return["RGB",ne,ne,ne]}static G_HTML([ne]){const re=K(ne);return`#${re}${re}${re}`}static RGB_G([ne,re,te]){return["G",.3*ne+.59*re+.11*te]}static RGB_HTML([ne,re,te]){return`#${K(ne)}${K(re)}${K(te)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([ne,re,te,T]){return["RGB",1-Math.min(1,ne+T),1-Math.min(1,te+T),1-Math.min(1,re+T)]}static CMYK_HTML(ne){return this.RGB_HTML(this.CMYK_RGB(ne))}static RGB_CMYK([ne,re,te]){const T=1-ne,e=1-re,c=1-te;return["CMYK",T,e,c,Math.min(T,e,c)]}}},(oe,M,K)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.XfaLayer=void 0;var _=K(1),ae=K(17);M.XfaLayer=class{static setupStorage(te,T,e,c,r){const l=c.getValue(T,{value:null});switch(e.name){case"textarea":if(null!==l.value&&(te.textContent=l.value),"print"===r)break;te.addEventListener("input",f=>{c.setValue(T,{value:f.target.value})});break;case"input":if("radio"===e.attributes.type||"checkbox"===e.attributes.type){if(l.value===e.attributes.xfaOn?te.setAttribute("checked",!0):l.value===e.attributes.xfaOff&&te.removeAttribute("checked"),"print"===r)break;te.addEventListener("change",f=>{c.setValue(T,{value:f.target.getAttribute(f.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==l.value&&te.setAttribute("value",l.value),"print"===r)break;te.addEventListener("input",f=>{c.setValue(T,{value:f.target.value})})}break;case"select":if(null!==l.value)for(const f of e.children)f.attributes.value===l.value&&(f.attributes.selected=!0);te.addEventListener("input",f=>{const E=f.target.options;c.setValue(T,{value:-1===E.selectedIndex?"":E[E.selectedIndex].value})})}}static setAttributes({html:te,element:T,storage:e=null,intent:c,linkService:r}){var E;const{attributes:l}=T,f=te instanceof HTMLAnchorElement;"radio"===l.type&&(l.name=`${l.name}-${c}`);for(const[u,s]of Object.entries(l))if(null!=s&&"dataId"!==u)if("style"!==u)if("textContent"===u)te.textContent=s;else if("class"===u)s.length&&te.setAttribute(u,s.join(" "));else{if(f&&("href"===u||"newWindow"===u))continue;te.setAttribute(u,s)}else Object.assign(te.style,s);f&&(r.addLinkAttributes||(0,_.warn)("XfaLayer.setAttribute - missing `addLinkAttributes`-method on the `linkService`-instance."),null==(E=r.addLinkAttributes)||E.call(r,te,l.href,l.newWindow)),e&&l.dataId&&this.setupStorage(te,l.dataId,T,e)}static render(te){var s;const T=te.annotationStorage,e=te.linkService,c=te.xfaHtml,r=te.intent||"display",l=document.createElement(c.name);c.attributes&&this.setAttributes({html:l,element:c,intent:r,linkService:e});const f=[[c,-1,l]],E=te.div;if(E.appendChild(l),te.viewport){const h=`matrix(${te.viewport.transform.join(",")})`;E.style.transform=h}"richText"!==r&&E.setAttribute("class","xfaLayer xfaFont");const u=[];for(;f.length>0;){const[h,F,P]=f[f.length-1];if(F+1===h.children.length){f.pop();continue}const m=h.children[++f[f.length-1][1]];if(null===m)continue;const{name:t}=m;if("#text"===t){const v=document.createTextNode(m.value);u.push(v),P.appendChild(v);continue}let i;if(i=(null==(s=null==m?void 0:m.attributes)?void 0:s.xmlns)?document.createElementNS(m.attributes.xmlns,t):document.createElement(t),P.appendChild(i),m.attributes&&this.setAttributes({html:i,element:m,storage:T,intent:r,linkService:e}),m.children&&m.children.length>0)f.push([m,-1,i]);else if(m.value){const v=document.createTextNode(m.value);ae.XfaText.shouldBuildText(t)&&u.push(v),i.appendChild(v)}}for(const h of E.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:u}}static update(te){const T=`matrix(${te.viewport.transform.join(",")})`;te.div.style.transform=T,te.div.hidden=!1}}},(oe,M,K)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.renderTextLayer=function(F){const P=new s({textContent:F.textContent,textContentStream:F.textContentStream,container:F.container,viewport:F.viewport,textDivs:F.textDivs,textContentItemsStr:F.textContentItemsStr,enhanceTextSelection:F.enhanceTextSelection});return P._render(F.timeout),P};var _=K(1);const te=new Map,T=/^\s+$/g;function c(F,P,m,t){const i=document.createElement("span"),v=F._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==P.str,hasEOL:P.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:""!==P.str,hasEOL:P.hasEOL};F._textDivs.push(i);const b=_.Util.transform(F._viewport.transform,P.transform);let A=Math.atan2(b[1],b[0]);const D=m[P.fontName];D.vertical&&(A+=Math.PI/2);const k=Math.hypot(b[2],b[3]),V=k*function(F,P){const m=te.get(F);if(m)return m;P.save(),P.font=`30px ${F}`;const t=P.measureText("");let i=t.fontBoundingBoxAscent,v=Math.abs(t.fontBoundingBoxDescent);if(i){P.restore();const A=i/(i+v);return te.set(F,A),A}P.strokeStyle="red",P.clearRect(0,0,30,30),P.strokeText("g",0,0);let b=P.getImageData(0,0,30,30).data;v=0;for(let A=b.length-1-3;A>=0;A-=4)if(b[A]>0){v=Math.ceil(A/4/30);break}P.clearRect(0,0,30,30),P.strokeText("A",0,30),b=P.getImageData(0,0,30,30).data,i=0;for(let A=0,D=b.length;A<D;A+=4)if(b[A]>0){i=30-Math.floor(A/4/30);break}if(P.restore(),i){const A=i/(i+v);return te.set(F,A),A}return te.set(F,.8),.8}(D.fontFamily,t);let U,I;0===A?(U=b[4],I=b[5]-V):(U=b[4]+V*Math.sin(A),I=b[5]-V*Math.cos(A)),i.style.left=`${U}px`,i.style.top=`${I}px`,i.style.fontSize=`${k}px`,i.style.fontFamily=D.fontFamily,i.setAttribute("role","presentation"),i.textContent=P.str,i.dir=P.dir,F._fontInspectorEnabled&&(i.dataset.fontName=P.fontName),0!==A&&(v.angle=A*(180/Math.PI));let O=!1;if(P.str.length>1||F._enhanceTextSelection&&T.test(P.str))O=!0;else if(" "!==P.str&&P.transform[0]!==P.transform[3]){const G=Math.abs(P.transform[0]),L=Math.abs(P.transform[3]);G!==L&&Math.max(G,L)/Math.min(G,L)>1.5&&(O=!0)}if(O&&(v.canvasWidth=D.vertical?P.height*F._viewport.scale:P.width*F._viewport.scale),F._textDivProperties.set(i,v),F._textContentStream&&F._layoutText(i),F._enhanceTextSelection&&v.hasText){let G=1,L=0;0!==A&&(G=Math.cos(A),L=Math.sin(A));const H=(D.vertical?P.height:P.width)*F._viewport.scale,y=k;let o,a;0!==A?(o=[G,L,-L,G,U,I],a=_.Util.getAxialAlignedBoundingBox([0,0,H,y],o)):a=[U,I,U+H,I+y],F._bounds.push({left:a[0],top:a[1],right:a[2],bottom:a[3],div:i,size:[H,y],m:o})}}function r(F){if(F._canceled)return;const P=F._textDivs,m=F._capability,t=P.length;if(t>1e5)return F._renderingDone=!0,void m.resolve();if(!F._textContentStream)for(let i=0;i<t;i++)F._layoutText(P[i]);F._renderingDone=!0,m.resolve()}function l(F,P,m){let t=0;for(let i=0;i<m;i++){const v=F[P++];v>0&&(t=t?Math.min(v,t):v)}return t}function u(F,P){P.sort(function(i,v){return i.x1-v.x1||i.index-v.index});const t=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const i of P){let v=0;for(;v<t.length&&t[v].end<=i.y1;)v++;let b=t.length-1;for(;b>=0&&t[b].start>=i.y2;)b--;let A,D,k,V,U=-1/0;for(k=v;k<=b;k++){let G;A=t[k],D=A.boundary,G=D.x2>i.x1?D.index>i.index?D.x1New:i.x1:void 0===D.x2New?(D.x2+i.x1)/2:D.x2New,G>U&&(U=G)}for(i.x1New=U,k=v;k<=b;k++)A=t[k],D=A.boundary,void 0===D.x2New?D.x2>i.x1?D.index>i.index&&(D.x2New=D.x2):D.x2New=U:D.x2New>U&&(D.x2New=Math.max(U,D.x2));const I=[];let O=null;for(k=v;k<=b;k++){A=t[k],D=A.boundary;const G=D.x2>i.x2?D:i;O===G?I[I.length-1].end=A.end:(I.push({start:A.start,end:A.end,boundary:G}),O=G)}for(t[v].start<i.y1&&(I[0].start=i.y1,I.unshift({start:t[v].start,end:i.y1,boundary:t[v].boundary})),i.y2<t[b].end&&(I[I.length-1].end=i.y2,I.push({start:i.y2,end:t[b].end,boundary:t[b].boundary})),k=v;k<=b;k++){if(A=t[k],D=A.boundary,void 0!==D.x2New)continue;let G=!1;for(V=v-1;!G&&V>=0&&t[V].start>=D.y1;V--)G=t[V].boundary===D;for(V=b+1;!G&&V<t.length&&t[V].end<=D.y2;V++)G=t[V].boundary===D;for(V=0;!G&&V<I.length;V++)G=I[V].boundary===D;G||(D.x2New=U)}Array.prototype.splice.apply(t,[v,b-v+1].concat(I))}for(const i of t){const v=i.boundary;void 0===v.x2New&&(v.x2New=Math.max(F,v.x2))}}class s{constructor({textContent:P,textContentStream:m,container:t,viewport:i,textDivs:v,textContentItemsStr:b,enhanceTextSelection:A}){var D;this._textContent=P,this._textContentStream=m,this._container=t,this._document=t.ownerDocument,this._viewport=i,this._textDivs=v||[],this._textContentItemsStr=b||[],this._enhanceTextSelection=!!A,this._fontInspectorEnabled=!!(null==(D=globalThis.FontInspector)?void 0:D.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,_.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new _.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(P,m){for(let t=0,i=P.length;t<i;t++)if(void 0!==P[t].str)this._textContentItemsStr.push(P[t].str),c(this,P[t],m,this._layoutTextCtx);else if("beginMarkedContentProps"===P[t].type||"beginMarkedContent"===P[t].type){const v=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==P[t].id&&this._container.setAttribute("id",`${P[t].id}`),v.appendChild(this._container)}else"endMarkedContent"===P[t].type&&(this._container=this._container.parentNode)}_layoutText(P){const m=this._textDivProperties.get(P);let t="";if(0!==m.canvasWidth&&m.hasText){const{fontSize:i,fontFamily:v}=P.style;(i!==this._layoutTextLastFontSize||v!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${i} ${v}`,this._layoutTextLastFontSize=i,this._layoutTextLastFontFamily=v);const{width:b}=this._layoutTextCtx.measureText(P.textContent);if(b>0){const A=m.canvasWidth/b;this._enhanceTextSelection&&(m.scale=A),t=`scaleX(${A})`}}if(0!==m.angle&&(t=`rotate(${m.angle}deg) ${t}`),t.length>0&&(this._enhanceTextSelection&&(m.originalTransform=t),P.style.transform=t),m.hasText&&this._container.appendChild(P),m.hasEOL){const i=document.createElement("br");i.setAttribute("role","presentation"),this._container.appendChild(i)}}_render(P=0){const m=(0,_.createPromiseCapability)();let t=Object.create(null);const i=this._document.createElement("canvas");if(i.height=i.width=30,i.mozOpaque=!0,this._layoutTextCtx=i.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),m.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const v=()=>{this._reader.read().then(({value:b,done:A})=>{A?m.resolve():(Object.assign(t,b.styles),this._processItems(b.items,t),v())},m.reject)};this._reader=this._textContentStream.getReader(),v()}}m.promise.then(()=>{t=null,P?this._renderTimer=setTimeout(()=>{r(this),this._renderTimer=null},P):r(this)},this._capability.reject)}expandTextDivs(P=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function(F){const P=F._bounds,m=F._viewport,t=function(F,P,m){const t=m.map(function(v,b){return{x1:v.left,y1:v.top,x2:v.right,y2:v.bottom,index:b,x1New:void 0,x2New:void 0}});u(F,t);const i=new Array(m.length);for(const v of t)i[v.index]={left:v.x1New,top:0,right:v.x2New,bottom:0};m.map(function(v,b){const A=i[b],D=t[b];D.x1=v.top,D.y1=F-A.right,D.x2=v.bottom,D.y2=F-A.left,D.index=b,D.x1New=void 0,D.x2New=void 0}),u(P,t);for(const v of t){const b=v.index;i[b].top=v.x1New,i[b].bottom=v.x2New}return i}(m.width,m.height,P);for(let i=0;i<t.length;i++){const v=P[i].div,b=F._textDivProperties.get(v);if(0===b.angle){b.paddingLeft=P[i].left-t[i].left,b.paddingTop=P[i].top-t[i].top,b.paddingRight=t[i].right-P[i].right,b.paddingBottom=t[i].bottom-P[i].bottom,F._textDivProperties.set(v,b);continue}const A=t[i],D=P[i],k=D.m,V=k[0],U=k[1],I=[[0,0],[0,D.size[1]],[D.size[0],0],D.size],O=new Float64Array(64);for(let L=0,H=I.length;L<H;L++){const y=_.Util.applyTransform(I[L],k);O[L+0]=V&&(A.left-y[0])/V,O[L+4]=U&&(A.top-y[1])/U,O[L+8]=V&&(A.right-y[0])/V,O[L+12]=U&&(A.bottom-y[1])/U,O[L+16]=U&&(A.left-y[0])/-U,O[L+20]=V&&(A.top-y[1])/V,O[L+24]=U&&(A.right-y[0])/-U,O[L+28]=V&&(A.bottom-y[1])/V,O[L+32]=V&&(A.left-y[0])/-V,O[L+36]=U&&(A.top-y[1])/-U,O[L+40]=V&&(A.right-y[0])/-V,O[L+44]=U&&(A.bottom-y[1])/-U,O[L+48]=U&&(A.left-y[0])/U,O[L+52]=V&&(A.top-y[1])/-V,O[L+56]=U&&(A.right-y[0])/U,O[L+60]=V&&(A.bottom-y[1])/-V}const G=1+Math.min(Math.abs(V),Math.abs(U));b.paddingLeft=l(O,32,16)/G,b.paddingTop=l(O,48,16)/G,b.paddingRight=l(O,0,16)/G,b.paddingBottom=l(O,16,16)/G,F._textDivProperties.set(v,b)}}(this),this._bounds=null);const m=[],t=[];for(let i=0,v=this._textDivs.length;i<v;i++){const b=this._textDivs[i],A=this._textDivProperties.get(b);!A.hasText||(P?(m.length=0,t.length=0,A.originalTransform&&m.push(A.originalTransform),A.paddingTop>0?(t.push(`${A.paddingTop}px`),m.push(`translateY(${-A.paddingTop}px)`)):t.push(0),t.push(A.paddingRight>0?A.paddingRight/A.scale+"px":0),t.push(A.paddingBottom>0?`${A.paddingBottom}px`:0),A.paddingLeft>0?(t.push(A.paddingLeft/A.scale+"px"),m.push(`translateX(${-A.paddingLeft/A.scale}px)`)):t.push(0),b.style.padding=t.join(" "),m.length&&(b.style.transform=m.join(" "))):(b.style.padding=null,b.style.transform=A.originalTransform))}}}},(oe,M,K)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.SVGGraphics=void 0;var _=K(1),ae=K(5),ne=K(3);let re=class{constructor(){(0,_.unreachable)("Not implemented: SVGGraphics")}};M.SVGGraphics=re;{let u=function(t){let i=[];const v=[];for(const b of t)"save"!==b.fn?"restore"===b.fn?i=v.pop():i.push(b):(i.push({fnId:92,fn:"group",items:[]}),v.push(i),i=i[i.length-1].items);return i},s=function(t){if(Number.isInteger(t))return t.toString();const i=t.toFixed(10);let v=i.length-1;if("0"!==i[v])return i;do{v--}while("0"===i[v]);return i.substring(0,"."===i[v]?v:v+1)},h=function(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":`scale(${s(t[0])} ${s(t[3])})`;if(t[0]===t[3]&&t[1]===-t[2]){const i=180*Math.acos(t[0])/Math.PI;return`rotate(${s(i)})`}}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return`translate(${s(t[4])} ${s(t[5])})`;return`matrix(${s(t[0])} ${s(t[1])} ${s(t[2])} ${s(t[3])} ${s(t[4])} ${s(t[5])})`};const te={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},T="http://www.w3.org/XML/1998/namespace",e="http://www.w3.org/1999/xlink",c=["butt","round","square"],r=["miter","round","bevel"],l=function(t,i="",v=!1){if(URL.createObjectURL&&"undefined"!=typeof Blob&&!v)return URL.createObjectURL(new Blob([t],{type:i}));const b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let A=`data:${i};base64,`;for(let D=0,k=t.length;D<k;D+=3){const V=255&t[D],U=255&t[D+1],I=255&t[D+2];A+=b[V>>2]+b[(3&V)<<4|U>>4]+b[D+1<k?(15&U)<<2|I>>6:64]+b[D+2<k?63&I:64]}return A},f=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),v=new Int32Array(256);for(let I=0;I<256;I++){let O=I;for(let G=0;G<8;G++)O=1&O?3988292384^O>>1&2147483647:O>>1&2147483647;v[I]=O}function A(I,O,G,L){let H=L;const y=O.length;G[H]=y>>24&255,G[H+1]=y>>16&255,G[H+2]=y>>8&255,G[H+3]=255&y,H+=4,G[H]=255&I.charCodeAt(0),G[H+1]=255&I.charCodeAt(1),G[H+2]=255&I.charCodeAt(2),G[H+3]=255&I.charCodeAt(3),H+=4,G.set(O,H),H+=O.length;const o=function(I,O,G){let L=-1;for(let H=O;H<G;H++)L=L>>>8^v[255&(L^I[H])];return-1^L}(G,L+4,H);G[H]=o>>24&255,G[H+1]=o>>16&255,G[H+2]=o>>8&255,G[H+3]=255&o}function V(I){let O=I.length;const G=65535,L=Math.ceil(O/G),H=new Uint8Array(2+O+5*L+4);let y=0;H[y++]=120,H[y++]=156;let o=0;for(;O>G;)H[y++]=0,H[y++]=255,H[y++]=255,H[y++]=0,H[y++]=0,H.set(I.subarray(o,o+G),y),y+=G,o+=G,O-=G;H[y++]=1,H[y++]=255&O,H[y++]=O>>8&255,H[y++]=255&~O,H[y++]=(65535&~O)>>8&255,H.set(I.subarray(o),y),y+=I.length-o;const a=function(I,O,G){let L=1,H=0;for(let y=0;y<G;++y)L=(L+(255&I[y]))%65521,H=(H+L)%65521;return H<<16|L}(I,0,I.length);return H[y++]=a>>24&255,H[y++]=a>>16&255,H[y++]=a>>8&255,H[y++]=255&a,H}return function(O,G,L){return function(I,O,G,L){const H=I.width,y=I.height;let o,a,S;const g=I.data;switch(O){case _.ImageKind.GRAYSCALE_1BPP:a=0,o=1,S=H+7>>3;break;case _.ImageKind.RGB_24BPP:a=2,o=8,S=3*H;break;case _.ImageKind.RGBA_32BPP:a=6,o=8,S=4*H;break;default:throw new Error("invalid format")}const x=new Uint8Array((1+S)*y);let n=0,C=0;for(let W=0;W<y;++W)x[n++]=0,x.set(g.subarray(C,C+S),n),C+=S,n+=S;if(O===_.ImageKind.GRAYSCALE_1BPP&&L){n=0;for(let W=0;W<y;W++){n++;for(let q=0;q<S;q++)x[n++]^=255}}const w=new Uint8Array([H>>24&255,H>>16&255,H>>8&255,255&H,y>>24&255,y>>16&255,y>>8&255,255&y,o,a,0,0,0]),B=function(I){if(!ne.isNodeJS)return V(I);try{let O;O=parseInt(process.versions.node)>=8?I:Buffer.from(I);const G=__webpack_require__(2258).deflateSync(O,{level:9});return G instanceof Uint8Array?G:new Uint8Array(G)}catch(O){(0,_.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+O)}return V(I)}(x),j=new Uint8Array(t.length+36+w.length+B.length);let X=0;return j.set(t,X),X+=t.length,A("IHDR",w,j,X),X+=12+w.length,A("IDATA",B,j,X),X+=12+B.length,A("IEND",new Uint8Array(0),j,X),l(j,"image/png",G)}(O,void 0===O.kind?_.ImageKind.GRAYSCALE_1BPP:O.kind,G,L)}}();class E{constructor(){this.fontSizeScale=1,this.fontWeight=te.fontWeight,this.fontSize=0,this.textMatrix=_.IDENTITY_MATRIX,this.fontMatrix=_.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=_.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=te.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(i,v){this.x=i,this.y=v}}let F=0,P=0,m=0;M.SVGGraphics=re=class{constructor(t,i,v=!1){this.svgFactory=new ae.DOMSVGFactory,this.current=new E,this.transformMatrix=_.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=i,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!v,this._operatorIdMapping=[];for(const b in _.OPS)this._operatorIdMapping[_.OPS[b]]=b}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){const i=t.fnArray,v=t.argsArray;for(let b=0,A=i.length;b<A;b++)if(i[b]===_.OPS.dependency)for(const D of v[b]){const k=D.startsWith("g_")?this.commonObjs:this.objs,V=new Promise(U=>{k.get(D,U)});this.current.dependencies.push(V)}return Promise.all(this.current.dependencies)}transform(t,i,v,b,A,D){this.transformMatrix=_.Util.transform(this.transformMatrix,[t,i,v,b,A,D]),this.tgrp=null}getSVG(t,i){this.viewport=i;const v=this._initialize(i);return this.loadDependencies(t).then(()=>(this.transformMatrix=_.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),v))}convertOpList(t){const i=this._operatorIdMapping,v=t.argsArray,b=t.fnArray,A=[];for(let D=0,k=b.length;D<k;D++){const V=b[D];A.push({fnId:V,fn:i[V],args:v[D]})}return u(A)}executeOpTree(t){for(const i of t){const v=i.fn,A=i.args;switch(0|i.fnId){case _.OPS.beginText:this.beginText();break;case _.OPS.dependency:break;case _.OPS.setLeading:this.setLeading(A);break;case _.OPS.setLeadingMoveText:this.setLeadingMoveText(A[0],A[1]);break;case _.OPS.setFont:this.setFont(A);break;case _.OPS.showText:case _.OPS.showSpacedText:this.showText(A[0]);break;case _.OPS.endText:this.endText();break;case _.OPS.moveText:this.moveText(A[0],A[1]);break;case _.OPS.setCharSpacing:this.setCharSpacing(A[0]);break;case _.OPS.setWordSpacing:this.setWordSpacing(A[0]);break;case _.OPS.setHScale:this.setHScale(A[0]);break;case _.OPS.setTextMatrix:this.setTextMatrix(A[0],A[1],A[2],A[3],A[4],A[5]);break;case _.OPS.setTextRise:this.setTextRise(A[0]);break;case _.OPS.setTextRenderingMode:this.setTextRenderingMode(A[0]);break;case _.OPS.setLineWidth:this.setLineWidth(A[0]);break;case _.OPS.setLineJoin:this.setLineJoin(A[0]);break;case _.OPS.setLineCap:this.setLineCap(A[0]);break;case _.OPS.setMiterLimit:this.setMiterLimit(A[0]);break;case _.OPS.setFillRGBColor:this.setFillRGBColor(A[0],A[1],A[2]);break;case _.OPS.setStrokeRGBColor:this.setStrokeRGBColor(A[0],A[1],A[2]);break;case _.OPS.setStrokeColorN:this.setStrokeColorN(A);break;case _.OPS.setFillColorN:this.setFillColorN(A);break;case _.OPS.shadingFill:this.shadingFill(A[0]);break;case _.OPS.setDash:this.setDash(A[0],A[1]);break;case _.OPS.setRenderingIntent:this.setRenderingIntent(A[0]);break;case _.OPS.setFlatness:this.setFlatness(A[0]);break;case _.OPS.setGState:this.setGState(A[0]);break;case _.OPS.fill:this.fill();break;case _.OPS.eoFill:this.eoFill();break;case _.OPS.stroke:this.stroke();break;case _.OPS.fillStroke:this.fillStroke();break;case _.OPS.eoFillStroke:this.eoFillStroke();break;case _.OPS.clip:this.clip("nonzero");break;case _.OPS.eoClip:this.clip("evenodd");break;case _.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case _.OPS.paintImageXObject:this.paintImageXObject(A[0]);break;case _.OPS.paintInlineImageXObject:this.paintInlineImageXObject(A[0]);break;case _.OPS.paintImageMaskXObject:this.paintImageMaskXObject(A[0]);break;case _.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(A[0],A[1]);break;case _.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case _.OPS.closePath:this.closePath();break;case _.OPS.closeStroke:this.closeStroke();break;case _.OPS.closeFillStroke:this.closeFillStroke();break;case _.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case _.OPS.nextLine:this.nextLine();break;case _.OPS.transform:this.transform(A[0],A[1],A[2],A[3],A[4],A[5]);break;case _.OPS.constructPath:this.constructPath(A[0],A[1]);break;case _.OPS.endPath:this.endPath();break;case 92:this.group(i.items);break;default:(0,_.warn)(`Unimplemented operator ${v}`)}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,i,v,b,A,D){const k=this.current;k.textMatrix=k.lineMatrix=[t,i,v,b,A,D],k.textMatrixScale=Math.hypot(t,i),k.x=k.lineX=0,k.y=k.lineY=0,k.xcoords=[],k.ycoords=[],k.tspan=this.svgFactory.createElement("svg:tspan"),k.tspan.setAttributeNS(null,"font-family",k.fontFamily),k.tspan.setAttributeNS(null,"font-size",`${s(k.fontSize)}px`),k.tspan.setAttributeNS(null,"y",s(-k.y)),k.txtElement=this.svgFactory.createElement("svg:text"),k.txtElement.appendChild(k.tspan)}beginText(){const t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=_.IDENTITY_MATRIX,t.lineMatrix=_.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,i){const v=this.current;v.x=v.lineX+=t,v.y=v.lineY+=i,v.xcoords=[],v.ycoords=[],v.tspan=this.svgFactory.createElement("svg:tspan"),v.tspan.setAttributeNS(null,"font-family",v.fontFamily),v.tspan.setAttributeNS(null,"font-size",`${s(v.fontSize)}px`),v.tspan.setAttributeNS(null,"y",s(-v.y))}showText(t){const i=this.current,v=i.font,b=i.fontSize;if(0===b)return;const A=i.fontSizeScale,D=i.charSpacing,k=i.wordSpacing,V=i.fontDirection,U=i.textHScale*V,I=v.vertical,O=I?1:-1,G=v.defaultVMetrics,L=b*i.fontMatrix[0];let H=0;for(const a of t){if(null===a){H+=V*k;continue}if("number"==typeof a){H+=O*a*b/1e3;continue}const S=(a.isSpace?k:0)+D,g=a.fontChar;let x,n,w,C=a.width;if(I){let B;const p=a.vmetric||G;B=a.vmetric?p[1]:.5*C,B=-B*L,C=p?-p[0]:C,x=B/A,n=(H+p[2]*L)/A}else x=H/A,n=0;(a.isInFont||v.missingFile)&&(i.xcoords.push(i.x+x),I&&i.ycoords.push(-i.y+n),i.tspan.textContent+=g),w=I?C*L-S*V:C*L+S*V,H+=w}i.tspan.setAttributeNS(null,"x",i.xcoords.map(s).join(" ")),i.tspan.setAttributeNS(null,"y",I?i.ycoords.map(s).join(" "):s(-i.y)),I?i.y-=H:i.x+=H*U,i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",`${s(i.fontSize)}px`),i.fontStyle!==te.fontStyle&&i.tspan.setAttributeNS(null,"font-style",i.fontStyle),i.fontWeight!==te.fontWeight&&i.tspan.setAttributeNS(null,"font-weight",i.fontWeight);const y=i.textRenderingMode&_.TextRenderingMode.FILL_STROKE_MASK;y===_.TextRenderingMode.FILL||y===_.TextRenderingMode.FILL_STROKE?(i.fillColor!==te.fillColor&&i.tspan.setAttributeNS(null,"fill",i.fillColor),i.fillAlpha<1&&i.tspan.setAttributeNS(null,"fill-opacity",i.fillAlpha)):i.tspan.setAttributeNS(null,"fill",i.textRenderingMode===_.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(y===_.TextRenderingMode.STROKE||y===_.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(i.tspan,1/(i.textMatrixScale||1));let o=i.textMatrix;0!==i.textRise&&(o=o.slice(),o[5]+=i.textRise),i.txtElement.setAttributeNS(null,"transform",`${h(o)} scale(${s(U)}, -1)`),i.txtElement.setAttributeNS(T,"xml:space","preserve"),i.txtElement.appendChild(i.tspan),i.txtgrp.appendChild(i.txtElement),this._ensureTransformGroup().appendChild(i.txtElement)}setLeadingMoveText(t,i){this.setLeading(-i),this.moveText(t,i)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const i=l(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}"; src: url(${i}); }\n`}setFont(t){const i=this.current,v=this.commonObjs.get(t[0]);let b=t[1];i.font=v,this.embedFonts&&!v.missingFile&&!this.embeddedFonts[v.loadedName]&&(this.addFontStyle(v),this.embeddedFonts[v.loadedName]=v),i.fontMatrix=v.fontMatrix||_.FONT_IDENTITY_MATRIX;let A="normal";v.black?A="900":v.bold&&(A="bold");const D=v.italic?"italic":"normal";b<0?(b=-b,i.fontDirection=-1):i.fontDirection=1,i.fontSize=b,i.fontFamily=v.loadedName,i.fontWeight=A,i.fontStyle=D,i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"y",s(-i.y)),i.xcoords=[],i.ycoords=[]}endText(){var i;const t=this.current;t.textRenderingMode&_.TextRenderingMode.ADD_TO_PATH_FLAG&&(null==(i=t.txtElement)?void 0:i.hasChildNodes())&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=c[t]}setLineJoin(t){this.current.lineJoin=r[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,i,v){this.current.strokeColor=_.Util.makeHexColor(t,i,v)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,i,v){this.current.fillColor=_.Util.makeHexColor(t,i,v),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const i=this.viewport.width,v=this.viewport.height,b=_.Util.inverseTransform(this.transformMatrix),A=_.Util.applyTransform([0,0],b),D=_.Util.applyTransform([0,v],b),k=_.Util.applyTransform([i,0],b),V=_.Util.applyTransform([i,v],b),U=Math.min(A[0],D[0],k[0],V[0]),I=Math.min(A[1],D[1],k[1],V[1]),O=Math.max(A[0],D[0],k[0],V[0]),G=Math.max(A[1],D[1],k[1],V[1]),L=this.svgFactory.createElement("svg:rect");L.setAttributeNS(null,"x",U),L.setAttributeNS(null,"y",I),L.setAttributeNS(null,"width",O-U),L.setAttributeNS(null,"height",G-I),L.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&L.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(L)}_makeColorN_Pattern(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const i=t[1],v=t[2],b=t[3]||_.IDENTITY_MATRIX,[A,D,k,V]=t[4],U=t[5],I=t[6],O=t[7],G="shading"+m++,[L,H,y,o]=_.Util.normalizeRect([..._.Util.applyTransform([A,D],b),..._.Util.applyTransform([k,V],b)]),[a,S]=_.Util.singularValueDecompose2dScale(b),g=U*a,x=I*S,n=this.svgFactory.createElement("svg:pattern");n.setAttributeNS(null,"id",G),n.setAttributeNS(null,"patternUnits","userSpaceOnUse"),n.setAttributeNS(null,"width",g),n.setAttributeNS(null,"height",x),n.setAttributeNS(null,"x",`${L}`),n.setAttributeNS(null,"y",`${H}`);const C=this.svg,w=this.transformMatrix,B=this.current.fillColor,p=this.current.strokeColor,j=this.svgFactory.create(y-L,o-H);if(this.svg=j,this.transformMatrix=b,2===O){const X=_.Util.makeHexColor(...i);this.current.fillColor=X,this.current.strokeColor=X}return this.executeOpTree(this.convertOpList(v)),this.svg=C,this.transformMatrix=w,this.current.fillColor=B,this.current.strokeColor=p,n.appendChild(j.childNodes[0]),this.defs.appendChild(n),`url(#${G})`}_makeShadingPattern(t){switch("string"==typeof t&&(t=this.objs.get(t)),t[0]){case"RadialAxial":const i="shading"+m++,v=t[3];let b;switch(t[1]){case"axial":const A=t[4],D=t[5];b=this.svgFactory.createElement("svg:linearGradient"),b.setAttributeNS(null,"id",i),b.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),b.setAttributeNS(null,"x1",A[0]),b.setAttributeNS(null,"y1",A[1]),b.setAttributeNS(null,"x2",D[0]),b.setAttributeNS(null,"y2",D[1]);break;case"radial":const k=t[4],V=t[5],U=t[6],I=t[7];b=this.svgFactory.createElement("svg:radialGradient"),b.setAttributeNS(null,"id",i),b.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),b.setAttributeNS(null,"cx",V[0]),b.setAttributeNS(null,"cy",V[1]),b.setAttributeNS(null,"r",I),b.setAttributeNS(null,"fx",k[0]),b.setAttributeNS(null,"fy",k[1]),b.setAttributeNS(null,"fr",U);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const A of v){const D=this.svgFactory.createElement("svg:stop");D.setAttributeNS(null,"offset",A[0]),D.setAttributeNS(null,"stop-color",A[1]),b.appendChild(D)}return this.defs.appendChild(b),`url(#${i})`;case"Mesh":return(0,_.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(t,i){this.current.dashArray=t,this.current.dashPhase=i}constructPath(t,i){const v=this.current;let b=v.x,A=v.y,D=[],k=0;for(const V of t)switch(0|V){case _.OPS.rectangle:b=i[k++],A=i[k++];const O=b+i[k++],G=A+i[k++];D.push("M",s(b),s(A),"L",s(O),s(A),"L",s(O),s(G),"L",s(b),s(G),"Z");break;case _.OPS.moveTo:b=i[k++],A=i[k++],D.push("M",s(b),s(A));break;case _.OPS.lineTo:b=i[k++],A=i[k++],D.push("L",s(b),s(A));break;case _.OPS.curveTo:b=i[k+4],A=i[k+5],D.push("C",s(i[k]),s(i[k+1]),s(i[k+2]),s(i[k+3]),s(b),s(A)),k+=6;break;case _.OPS.curveTo2:D.push("C",s(b),s(A),s(i[k]),s(i[k+1]),s(i[k+2]),s(i[k+3])),b=i[k+2],A=i[k+3],k+=4;break;case _.OPS.curveTo3:b=i[k+2],A=i[k+3],D.push("C",s(i[k]),s(i[k+1]),s(b),s(A),s(b),s(A)),k+=4;break;case _.OPS.closePath:D.push("Z")}D=D.join(" "),v.path&&t.length>0&&t[0]!==_.OPS.rectangle&&t[0]!==_.OPS.moveTo?D=v.path.getAttributeNS(null,"d")+D:(v.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(v.path)),v.path.setAttributeNS(null,"d",D),v.path.setAttributeNS(null,"fill","none"),v.element=v.path,v.setCurrentPoint(b,A)}endPath(){const t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element)return void(this.pendingClip=null);const i="clippath"+F++,v=this.svgFactory.createElement("svg:clipPath");v.setAttributeNS(null,"id",i),v.setAttributeNS(null,"transform",h(this.transformMatrix));const b=t.element.cloneNode(!0);if(b.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,v.appendChild(b),this.defs.appendChild(v),t.activeClipUrl){t.clipGroup=null;for(const A of this.extraStack)A.clipGroup=null;v.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl=`url(#${i})`,this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const i=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",i)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[i,v]of t)switch(i){case"LW":this.setLineWidth(v);break;case"LC":this.setLineCap(v);break;case"LJ":this.setLineJoin(v);break;case"ML":this.setMiterLimit(v);break;case"D":this.setDash(v[0],v[1]);break;case"RI":this.setRenderingIntent(v);break;case"FL":this.setFlatness(v);break;case"Font":this.setFont(v);break;case"CA":this.setStrokeAlpha(v);break;case"ca":this.setFillAlpha(v);break;default:(0,_.warn)(`Unimplemented graphic state operator ${i}`)}}fill(){const t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){const t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t,i=1){const v=this.current;let b=v.dashArray;1!==i&&b.length>0&&(b=b.map(function(A){return i*A})),t.setAttributeNS(null,"stroke",v.strokeColor),t.setAttributeNS(null,"stroke-opacity",v.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",s(v.miterLimit)),t.setAttributeNS(null,"stroke-linecap",v.lineCap),t.setAttributeNS(null,"stroke-linejoin",v.lineJoin),t.setAttributeNS(null,"stroke-width",s(i*v.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",b.map(s).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",s(i*v.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(t)}paintImageXObject(t){const i=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);i?this.paintInlineImageXObject(i):(0,_.warn)(`Dependent image with object ID ${t} is not ready yet`)}paintInlineImageXObject(t,i){const v=t.width,b=t.height,A=f(t,this.forceDataSchema,!!i),D=this.svgFactory.createElement("svg:rect");D.setAttributeNS(null,"x","0"),D.setAttributeNS(null,"y","0"),D.setAttributeNS(null,"width",s(v)),D.setAttributeNS(null,"height",s(b)),this.current.element=D,this.clip("nonzero");const k=this.svgFactory.createElement("svg:image");k.setAttributeNS(e,"xlink:href",A),k.setAttributeNS(null,"x","0"),k.setAttributeNS(null,"y",s(-b)),k.setAttributeNS(null,"width",s(v)+"px"),k.setAttributeNS(null,"height",s(b)+"px"),k.setAttributeNS(null,"transform",`scale(${s(1/v)} ${s(-1/b)})`),i?i.appendChild(k):this._ensureTransformGroup().appendChild(k)}paintImageMaskXObject(t){const i=this.current,v=t.width,b=t.height,A=i.fillColor;i.maskId="mask"+P++;const D=this.svgFactory.createElement("svg:mask");D.setAttributeNS(null,"id",i.maskId);const k=this.svgFactory.createElement("svg:rect");k.setAttributeNS(null,"x","0"),k.setAttributeNS(null,"y","0"),k.setAttributeNS(null,"width",s(v)),k.setAttributeNS(null,"height",s(b)),k.setAttributeNS(null,"fill",A),k.setAttributeNS(null,"mask",`url(#${i.maskId})`),this.defs.appendChild(D),this._ensureTransformGroup().appendChild(k),this.paintInlineImageXObject(t,D)}paintFormXObjectBegin(t,i){if(Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),i){const v=i[2]-i[0],b=i[3]-i[1],A=this.svgFactory.createElement("svg:rect");A.setAttributeNS(null,"x",i[0]),A.setAttributeNS(null,"y",i[1]),A.setAttributeNS(null,"width",s(v)),A.setAttributeNS(null,"height",s(b)),this.current.element=A,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const i=this.svgFactory.create(t.width,t.height),v=this.svgFactory.createElement("svg:defs");i.appendChild(v),this.defs=v;const b=this.svgFactory.createElement("svg:g");return b.setAttributeNS(null,"transform",h(t.transform)),i.appendChild(b),this.svg=b,i}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",h(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(oe,M,K)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.PDFNodeStream=void 0;var _=K(1),ae=K(24);const ne=__webpack_require__(172),re=__webpack_require__(2001),te=__webpack_require__(3779),T=__webpack_require__(6558),e=/^file:\/\/\/[a-zA-Z]:\//;M.PDFNodeStream=class{constructor(m){this.source=m,this.url=function(P){const m=T.parse(P);return"file:"===m.protocol||m.host?m:/^[a-z]:[/\\]/i.test(P)?T.parse(`file:///${P}`):(m.host||(m.protocol="file:"),m)}(m.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&m.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var m,t;return null!=(t=null==(m=this._fullRequestReader)?void 0:m._loaded)?t:0}getFullReader(){return(0,_.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new h(this):new u(this),this._fullRequestReader}getRangeReader(m,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new F(this,m,t):new s(this,m,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(m){this._fullRequestReader&&this._fullRequestReader.cancel(m);for(const t of this._rangeRequestReaders.slice(0))t.cancel(m)}};class l{constructor(m){this._url=m.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=m.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=(0,_.createPromiseCapability)(),this._headersCapability=(0,_.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var m=this;return _asyncToGenerator(function*(){if(yield m._readCapability.promise,m._done)return{value:void 0,done:!0};if(m._storedError)throw m._storedError;const t=m._readableStream.read();return null===t?(m._readCapability=(0,_.createPromiseCapability)(),m.read()):(m._loaded+=t.length,m.onProgress&&m.onProgress({loaded:m._loaded,total:m._contentLength}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(m){this._readableStream?this._readableStream.destroy(m):this._error(m)}_error(m){this._storedError=m,this._readCapability.resolve()}_setReadableStream(m){this._readableStream=m,m.on("readable",()=>{this._readCapability.resolve()}),m.on("end",()=>{m.destroy(),this._done=!0,this._readCapability.resolve()}),m.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new _.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class f{constructor(m){this._url=m.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,_.createPromiseCapability)(),this._isStreamingSupported=!m.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var m=this;return _asyncToGenerator(function*(){if(yield m._readCapability.promise,m._done)return{value:void 0,done:!0};if(m._storedError)throw m._storedError;const t=m._readableStream.read();return null===t?(m._readCapability=(0,_.createPromiseCapability)(),m.read()):(m._loaded+=t.length,m.onProgress&&m.onProgress({loaded:m._loaded}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(m){this._readableStream?this._readableStream.destroy(m):this._error(m)}_error(m){this._storedError=m,this._readCapability.resolve()}_setReadableStream(m){this._readableStream=m,m.on("readable",()=>{this._readCapability.resolve()}),m.on("end",()=>{m.destroy(),this._done=!0,this._readCapability.resolve()}),m.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function E(P,m){return{protocol:P.protocol,auth:P.auth,host:P.hostname,port:P.port,path:P.path,method:"GET",headers:m}}class u extends l{constructor(m){super(m);const t=i=>{if(404===i.statusCode){const D=new _.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=D,void this._headersCapability.reject(D)}this._headersCapability.resolve(),this._setReadableStream(i);const v=D=>this._readableStream.headers[D.toLowerCase()],{allowRangeRequests:b,suggestedLength:A}=(0,ae.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:m.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=b,this._contentLength=A||this._contentLength,this._filename=(0,ae.extractFilenameFromHeader)(v)};this._request=null,this._request="http:"===this._url.protocol?re.request(E(this._url,m.httpHeaders),t):te.request(E(this._url,m.httpHeaders),t),this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class s extends f{constructor(m,t,i){super(m),this._httpHeaders={};for(const b in m.httpHeaders){const A=m.httpHeaders[b];void 0!==A&&(this._httpHeaders[b]=A)}this._httpHeaders.Range=`bytes=${t}-${i-1}`;const v=b=>{if(404!==b.statusCode)this._setReadableStream(b);else{const A=new _.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=A}};this._request=null,this._request="http:"===this._url.protocol?re.request(E(this._url,this._httpHeaders),v):te.request(E(this._url,this._httpHeaders),v),this._request.on("error",b=>{this._storedError=b}),this._request.end()}}class h extends l{constructor(m){super(m);let t=decodeURIComponent(this._url.path);e.test(this._url.href)&&(t=t.replace(/^\//,"")),ne.lstat(t,(i,v)=>{if(i)return"ENOENT"===i.code&&(i=new _.MissingPDFException(`Missing PDF "${t}".`)),this._storedError=i,void this._headersCapability.reject(i);this._contentLength=v.size,this._setReadableStream(ne.createReadStream(t)),this._headersCapability.resolve()})}}class F extends f{constructor(m,t,i){super(m);let v=decodeURIComponent(this._url.path);e.test(this._url.href)&&(v=v.replace(/^\//,"")),this._setReadableStream(ne.createReadStream(v,{start:t,end:i-1}))}}},(oe,M,K)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.createResponseStatusError=function(c,r){return 404===c||0===c&&r.startsWith("file:")?new _.MissingPDFException('Missing PDF "'+r+'".'):new _.UnexpectedResponseException(`Unexpected server response (${c}) while retrieving PDF "${r}".`,c)},M.extractFilenameFromHeader=function(c){const r=c("Content-Disposition");if(r){let l=(0,ae.getFilenameFromContentDispositionHeader)(r);if(l.includes("%"))try{l=decodeURIComponent(l)}catch(f){}if((0,ne.isPdfFile)(l))return l}return null},M.validateRangeRequestCapabilities=function({getResponseHeader:c,isHttp:r,rangeChunkSize:l,disableRange:f}){(0,_.assert)(l>0,"Range chunk size must be larger than zero");const E={allowRangeRequests:!1,suggestedLength:void 0},u=parseInt(c("Content-Length"),10);return!Number.isInteger(u)||(E.suggestedLength=u,u<=2*l)||f||!r||"bytes"!==c("Accept-Ranges")||"identity"!==(c("Content-Encoding")||"identity")||(E.allowRangeRequests=!0),E},M.validateResponseStatus=function(c){return 200===c||206===c};var _=K(1),ae=K(25),ne=K(5)},(oe,M,K)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.getFilenameFromContentDispositionHeader=function(ne){let re=!0,te=T("filename\\*","i").exec(ne);if(te){te=te[1];let u=l(te);return u=unescape(u),u=f(u),u=E(u),c(u)}if(te=function(u){const s=[];let h;const F=T("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(h=F.exec(u));){let[,m,t,i]=h;if(m=parseInt(m,10),m in s){if(0===m)break}else s[m]=[t,i]}const P=[];for(let m=0;m<s.length&&m in s;++m){let[t,i]=s[m];i=l(i),t&&(i=unescape(i),0===m&&(i=f(i))),P.push(i)}return P.join("")}(ne),te)return c(E(te));if(te=T("filename","i").exec(ne),te){te=te[1];let u=l(te);return u=E(u),c(u)}function T(u,s){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',s)}function e(u,s){if(u){if(!/^[\x00-\xFF]+$/.test(s))return s;try{const h=new TextDecoder(u,{fatal:!0}),F=(0,_.stringToBytes)(s);s=h.decode(F),re=!1}catch(h){}}return s}function c(u){return re&&/[\x80-\xff]/.test(u)&&(u=e("utf-8",u),re&&(u=e("iso-8859-1",u))),u}function l(u){if(u.startsWith('"')){const s=u.slice(1).split('\\"');for(let h=0;h<s.length;++h){const F=s[h].indexOf('"');-1!==F&&(s[h]=s[h].slice(0,F),s.length=h+1),s[h]=s[h].replace(/\\(.)/g,"$1")}u=s.join('"')}return u}function f(u){const s=u.indexOf("'");return-1===s?u:e(u.slice(0,s),u.slice(s+1).replace(/^[^']*'/,""))}function E(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(s,h,F,P){if("q"===F||"Q"===F)return e(h,P=(P=P.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(m,t){return String.fromCharCode(parseInt(t,16))}));try{P=atob(P)}catch(m){}return e(h,P)})}return""};var _=K(1)},(oe,M,K)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.PDFNetworkStream=void 0;var _=K(1),ae=K(24);class T{constructor(f,E={}){this.url=f,this.isHttp=/^https?:/i.test(f),this.httpHeaders=this.isHttp&&E.httpHeaders||Object.create(null),this.withCredentials=E.withCredentials||!1,this.getXhr=E.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(f,E,u){const s={begin:f,end:E};for(const h in u)s[h]=u[h];return this.request(s)}requestFull(f){return this.request(f)}request(f){const E=this.getXhr(),u=this.currXhrId++,s=this.pendingRequests[u]={xhr:E};E.open("GET",this.url),E.withCredentials=this.withCredentials;for(const h in this.httpHeaders){const F=this.httpHeaders[h];void 0!==F&&E.setRequestHeader(h,F)}return this.isHttp&&"begin"in f&&"end"in f?(E.setRequestHeader("Range",`bytes=${f.begin}-${f.end-1}`),s.expectedStatus=206):s.expectedStatus=200,E.responseType="arraybuffer",f.onError&&(E.onerror=function(h){f.onError(E.status)}),E.onreadystatechange=this.onStateChange.bind(this,u),E.onprogress=this.onProgress.bind(this,u),s.onHeadersReceived=f.onHeadersReceived,s.onDone=f.onDone,s.onError=f.onError,s.onProgress=f.onProgress,E.send(null),u}onProgress(f,E){var s;const u=this.pendingRequests[f];!u||null==(s=u.onProgress)||s.call(u,E)}onStateChange(f,E){var m,t,i;const u=this.pendingRequests[f];if(!u)return;const s=u.xhr;if(s.readyState>=2&&u.onHeadersReceived&&(u.onHeadersReceived(),delete u.onHeadersReceived),4!==s.readyState||!(f in this.pendingRequests))return;if(delete this.pendingRequests[f],0===s.status&&this.isHttp)return void(null==(m=u.onError)||m.call(u,s.status));const h=s.status||200;if((200!==h||206!==u.expectedStatus)&&h!==u.expectedStatus)return void(null==(t=u.onError)||t.call(u,s.status));const P=function(l){const f=l.response;return"string"!=typeof f?f:(0,_.stringToBytes)(f).buffer}(s);if(206===h){const v=s.getResponseHeader("Content-Range"),b=/bytes (\d+)-(\d+)\/(\d+)/.exec(v);u.onDone({begin:parseInt(b[1],10),chunk:P})}else P?u.onDone({begin:0,chunk:P}):null==(i=u.onError)||i.call(u,s.status)}getRequestXhr(f){return this.pendingRequests[f].xhr}isPendingRequest(f){return f in this.pendingRequests}abortRequest(f){const E=this.pendingRequests[f].xhr;delete this.pendingRequests[f],E.abort()}}M.PDFNetworkStream=class{constructor(f){this._source=f,this._manager=new T(f.url,{httpHeaders:f.httpHeaders,withCredentials:f.withCredentials}),this._rangeChunkSize=f.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(f){const E=this._rangeRequestReaders.indexOf(f);E>=0&&this._rangeRequestReaders.splice(E,1)}getFullReader(){return(0,_.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new c(this._manager,this._source),this._fullRequestReader}getRangeReader(f,E){const u=new r(this._manager,f,E);return u.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(u),u}cancelAllRequests(f){var E;null==(E=this._fullRequestReader)||E.cancel(f);for(const u of this._rangeRequestReaders.slice(0))u.cancel(f)}};class c{constructor(f,E){this._manager=f;const u={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=E.url,this._fullRequestId=f.requestFull(u),this._headersReceivedCapability=(0,_.createPromiseCapability)(),this._disableRange=E.disableRange||!1,this._contentLength=E.length,this._rangeChunkSize=E.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const f=this._fullRequestId,E=this._manager.getRequestXhr(f),u=F=>E.getResponseHeader(F),{allowRangeRequests:s,suggestedLength:h}=(0,ae.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=h||this._contentLength,this._filename=(0,ae.extractFilenameFromHeader)(u),this._isRangeSupported&&this._manager.abortRequest(f),this._headersReceivedCapability.resolve()}_onDone(f){if(f&&(this._requests.length>0?this._requests.shift().resolve({value:f.chunk,done:!1}):this._cachedChunks.push(f.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(f){this._storedError=(0,ae.createResponseStatusError)(f,this._url),this._headersReceivedCapability.reject(this._storedError);for(const E of this._requests)E.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(f){var E;null==(E=this.onProgress)||E.call(this,{loaded:f.loaded,total:f.lengthComputable?f.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var f=this;return _asyncToGenerator(function*(){if(f._storedError)throw f._storedError;if(f._cachedChunks.length>0)return{value:f._cachedChunks.shift(),done:!1};if(f._done)return{value:void 0,done:!0};const E=(0,_.createPromiseCapability)();return f._requests.push(E),E.promise})()}cancel(f){this._done=!0,this._headersReceivedCapability.reject(f);for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class r{constructor(f,E,u){this._manager=f;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=f.url,this._requestId=f.requestRange(E,u,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var f;null==(f=this.onClosed)||f.call(this,this)}_onDone(f){const E=f.chunk;this._requests.length>0?this._requests.shift().resolve({value:E,done:!1}):this._queuedChunk=E,this._done=!0;for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(f){this._storedError=(0,ae.createResponseStatusError)(f,this._url);for(const E of this._requests)E.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(f){var E;this.isStreamingSupported||null==(E=this.onProgress)||E.call(this,{loaded:f.loaded})}get isStreamingSupported(){return!1}read(){var f=this;return _asyncToGenerator(function*(){if(f._storedError)throw f._storedError;if(null!==f._queuedChunk){const u=f._queuedChunk;return f._queuedChunk=null,{value:u,done:!1}}if(f._done)return{value:void 0,done:!0};const E=(0,_.createPromiseCapability)();return f._requests.push(E),E.promise})()}cancel(f){this._done=!0;for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(oe,M,K)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.PDFFetchStream=void 0;var _=K(1),ae=K(24);function ne(c,r,l){return{method:"GET",headers:c,signal:null==l?void 0:l.signal,mode:"cors",credentials:r?"include":"same-origin",redirect:"follow"}}function re(c){const r=new Headers;for(const l in c){const f=c[l];void 0!==f&&r.append(l,f)}return r}M.PDFFetchStream=class{constructor(r){this.source=r,this.isHttp=/^https?:/i.test(r.url),this.httpHeaders=this.isHttp&&r.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var r,l;return null!=(l=null==(r=this._fullRequestReader)?void 0:r._loaded)?l:0}getFullReader(){return(0,_.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new T(this),this._fullRequestReader}getRangeReader(r,l){if(l<=this._progressiveDataLength)return null;const f=new e(this,r,l);return this._rangeRequestReaders.push(f),f}cancelAllRequests(r){this._fullRequestReader&&this._fullRequestReader.cancel(r);for(const l of this._rangeRequestReaders.slice(0))l.cancel(r)}};class T{constructor(r){this._stream=r,this._reader=null,this._loaded=0,this._filename=null;const l=r.source;this._withCredentials=l.withCredentials||!1,this._contentLength=l.length,this._headersCapability=(0,_.createPromiseCapability)(),this._disableRange=l.disableRange||!1,this._rangeChunkSize=l.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!l.disableStream,this._isRangeSupported=!l.disableRange,this._headers=re(this._stream.httpHeaders);const f=l.url;fetch(f,ne(this._headers,this._withCredentials,this._abortController)).then(E=>{if(!(0,ae.validateResponseStatus)(E.status))throw(0,ae.createResponseStatusError)(E.status,f);this._reader=E.body.getReader(),this._headersCapability.resolve();const u=F=>E.headers.get(F),{allowRangeRequests:s,suggestedLength:h}=(0,ae.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=h||this._contentLength,this._filename=(0,ae.extractFilenameFromHeader)(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new _.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var r=this;return _asyncToGenerator(function*(){yield r._headersCapability.promise;const{value:l,done:f}=yield r._reader.read();return f?{value:l,done:f}:(r._loaded+=l.byteLength,r.onProgress&&r.onProgress({loaded:r._loaded,total:r._contentLength}),{value:new Uint8Array(l).buffer,done:!1})})()}cancel(r){this._reader&&this._reader.cancel(r),this._abortController&&this._abortController.abort()}}class e{constructor(r,l,f){this._stream=r,this._reader=null,this._loaded=0;const E=r.source;this._withCredentials=E.withCredentials||!1,this._readCapability=(0,_.createPromiseCapability)(),this._isStreamingSupported=!E.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=re(this._stream.httpHeaders),this._headers.append("Range",`bytes=${l}-${f-1}`);const u=E.url;fetch(u,ne(this._headers,this._withCredentials,this._abortController)).then(s=>{if(!(0,ae.validateResponseStatus)(s.status))throw(0,ae.createResponseStatusError)(s.status,u);this._readCapability.resolve(),this._reader=s.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var r=this;return _asyncToGenerator(function*(){yield r._readCapability.promise;const{value:l,done:f}=yield r._reader.read();return f?{value:l,done:f}:(r._loaded+=l.byteLength,r.onProgress&&r.onProgress({loaded:r._loaded}),{value:new Uint8Array(l).buffer,done:!1})})()}cancel(r){this._reader&&this._reader.cancel(r),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(oe){var M=__webpack_module_cache__[oe];if(void 0!==M)return M.exports;var K=__webpack_module_cache__[oe]={exports:{}};return __webpack_modules__[oe](K,K.exports,__w_pdfjs_require__),K.exports}var __webpack_exports__={};return(()=>{var oe=__webpack_exports__;Object.defineProperty(oe,"__esModule",{value:!0}),Object.defineProperty(oe,"AnnotationLayer",{enumerable:!0,get:function(){return ae.AnnotationLayer}}),Object.defineProperty(oe,"AnnotationMode",{enumerable:!0,get:function(){return M.AnnotationMode}}),Object.defineProperty(oe,"CMapCompressionType",{enumerable:!0,get:function(){return M.CMapCompressionType}}),Object.defineProperty(oe,"GlobalWorkerOptions",{enumerable:!0,get:function(){return ne.GlobalWorkerOptions}}),Object.defineProperty(oe,"InvalidPDFException",{enumerable:!0,get:function(){return M.InvalidPDFException}}),Object.defineProperty(oe,"LoopbackPort",{enumerable:!0,get:function(){return K.LoopbackPort}}),Object.defineProperty(oe,"MissingPDFException",{enumerable:!0,get:function(){return M.MissingPDFException}}),Object.defineProperty(oe,"OPS",{enumerable:!0,get:function(){return M.OPS}}),Object.defineProperty(oe,"PDFDataRangeTransport",{enumerable:!0,get:function(){return K.PDFDataRangeTransport}}),Object.defineProperty(oe,"PDFDateString",{enumerable:!0,get:function(){return _.PDFDateString}}),Object.defineProperty(oe,"PDFWorker",{enumerable:!0,get:function(){return K.PDFWorker}}),Object.defineProperty(oe,"PasswordResponses",{enumerable:!0,get:function(){return M.PasswordResponses}}),Object.defineProperty(oe,"PermissionFlag",{enumerable:!0,get:function(){return M.PermissionFlag}}),Object.defineProperty(oe,"PixelsPerInch",{enumerable:!0,get:function(){return _.PixelsPerInch}}),Object.defineProperty(oe,"RenderingCancelledException",{enumerable:!0,get:function(){return _.RenderingCancelledException}}),Object.defineProperty(oe,"SVGGraphics",{enumerable:!0,get:function(){return T.SVGGraphics}}),Object.defineProperty(oe,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return M.UNSUPPORTED_FEATURES}}),Object.defineProperty(oe,"UnexpectedResponseException",{enumerable:!0,get:function(){return M.UnexpectedResponseException}}),Object.defineProperty(oe,"Util",{enumerable:!0,get:function(){return M.Util}}),Object.defineProperty(oe,"VerbosityLevel",{enumerable:!0,get:function(){return M.VerbosityLevel}}),Object.defineProperty(oe,"XfaLayer",{enumerable:!0,get:function(){return e.XfaLayer}}),Object.defineProperty(oe,"build",{enumerable:!0,get:function(){return K.build}}),Object.defineProperty(oe,"createPromiseCapability",{enumerable:!0,get:function(){return M.createPromiseCapability}}),Object.defineProperty(oe,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return M.createValidAbsoluteUrl}}),Object.defineProperty(oe,"getDocument",{enumerable:!0,get:function(){return K.getDocument}}),Object.defineProperty(oe,"getFilenameFromUrl",{enumerable:!0,get:function(){return _.getFilenameFromUrl}}),Object.defineProperty(oe,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return _.getPdfFilenameFromUrl}}),Object.defineProperty(oe,"getXfaPageViewport",{enumerable:!0,get:function(){return _.getXfaPageViewport}}),Object.defineProperty(oe,"isPdfFile",{enumerable:!0,get:function(){return _.isPdfFile}}),Object.defineProperty(oe,"loadScript",{enumerable:!0,get:function(){return _.loadScript}}),Object.defineProperty(oe,"renderTextLayer",{enumerable:!0,get:function(){return te.renderTextLayer}}),Object.defineProperty(oe,"shadow",{enumerable:!0,get:function(){return M.shadow}}),Object.defineProperty(oe,"version",{enumerable:!0,get:function(){return K.version}});var M=__w_pdfjs_require__(1),K=__w_pdfjs_require__(4),_=__w_pdfjs_require__(5),ae=__w_pdfjs_require__(18),ne=__w_pdfjs_require__(12),re=__w_pdfjs_require__(3),te=__w_pdfjs_require__(21),T=__w_pdfjs_require__(22),e=__w_pdfjs_require__(20);if(re.isNodeJS){const{PDFNodeStream:l}=__w_pdfjs_require__(23);(0,K.setPDFNetworkStreamFactory)(f=>new l(f))}else{const{PDFNetworkStream:l}=__w_pdfjs_require__(26),{PDFFetchStream:f}=__w_pdfjs_require__(27);(0,K.setPDFNetworkStreamFactory)(E=>(0,_.isValidFetchUrl)(E.url)?new f(E):new l(E))}})(),__webpack_exports__})()},module.exports=K()},2813:function(oe,M,K){var _=K(8926).default;oe.exports=(()=>{"use strict";var ae=[,(T,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultXfaLayerFactory=e.DefaultTextLayerFactory=e.DefaultStructTreeLayerFactory=e.DefaultAnnotationLayerFactory=void 0;var r=c(2),l=c(4),f=c(5),E=c(7),u=c(8),s=c(9);e.DefaultAnnotationLayerFactory=class{createAnnotationLayerBuilder(i,v,b=null,A="",D=!0,k=l.NullL10n,V=!1,U=null,I=null,O=null,G=null){return new r.AnnotationLayerBuilder({pageDiv:i,pdfPage:v,imageResourcesPath:A,renderForms:D,linkService:new f.SimpleLinkService,l10n:k,annotationStorage:b,enableScripting:V,hasJSActionsPromise:U,fieldObjectsPromise:O,mouseState:I,annotationCanvasMap:G})}};e.DefaultStructTreeLayerFactory=class{createStructTreeLayerBuilder(i){return new E.StructTreeLayerBuilder({pdfPage:i})}};e.DefaultTextLayerFactory=class{createTextLayerBuilder(i,v,b,A=!1,D,k){return new u.TextLayerBuilder({textLayerDiv:i,pageIndex:v,viewport:b,enhanceTextSelection:A,eventBus:D,highlighter:k})}};e.DefaultXfaLayerFactory=class{createXfaLayerBuilder(i,v,b=null,A=null){return new s.XfaLayerBuilder({pageDiv:i,pdfPage:v,annotationStorage:b,linkService:new f.SimpleLinkService,xfaHtml:A})}}},(T,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayerBuilder=void 0;var r=c(3),l=c(4);e.AnnotationLayerBuilder=class{constructor({pageDiv:u,pdfPage:s,linkService:h,downloadManager:F,annotationStorage:P=null,imageResourcesPath:m="",renderForms:t=!0,l10n:i=l.NullL10n,enableScripting:v=!1,hasJSActionsPromise:b=null,fieldObjectsPromise:A=null,mouseState:D=null,annotationCanvasMap:k=null}){this.pageDiv=u,this.pdfPage=s,this.linkService=h,this.downloadManager=F,this.imageResourcesPath=m,this.renderForms=t,this.l10n=i,this.annotationStorage=P,this.enableScripting=v,this._hasJSActionsPromise=b,this._fieldObjectsPromise=A,this._mouseState=D,this._annotationCanvasMap=k,this.div=null,this._cancelled=!1}render(u,s="display"){var h=this;return _(function*(){const[F,P=!1,m=null]=yield Promise.all([h.pdfPage.getAnnotations({intent:s}),h._hasJSActionsPromise,h._fieldObjectsPromise]);if(h._cancelled||0===F.length)return;const t={viewport:u.clone({dontFlip:!0}),div:h.div,annotations:F,page:h.pdfPage,imageResourcesPath:h.imageResourcesPath,renderForms:h.renderForms,linkService:h.linkService,downloadManager:h.downloadManager,annotationStorage:h.annotationStorage,enableScripting:h.enableScripting,hasJSActions:P,fieldObjects:m,mouseState:h._mouseState,annotationCanvasMap:h._annotationCanvasMap};h.div?r.AnnotationLayer.update(t):(h.div=document.createElement("div"),h.div.className="annotationLayer",h.pageDiv.appendChild(h.div),t.div=h.div,r.AnnotationLayer.render(t),h.l10n.translate(h.div))})()}cancel(){this._cancelled=!0}hide(){!this.div||(this.div.hidden=!0)}}},T=>{let e;e="undefined"!=typeof window&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:K(6036),T.exports=e},(T,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.fixupLangCode=function(s){return l[null==s?void 0:s.toLowerCase()]||s},e.getL10nFallback=r;const c={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts."};function r(s,h){switch(s){case"find_match_count":s=`find_match_count[${1===h.total?"one":"other"}]`;break;case"find_match_count_limit":s=`find_match_count_limit[${1===h.limit?"one":"other"}]`}return c[s]||""}const l={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};e.NullL10n={getLanguage:()=>_(function*(){return"en-us"})(),getDirection:()=>_(function*(){return"ltr"})(),get:(s,h=null,F=r(s,h))=>_(function*(){return function(s,h){return h?s.replace(/\{\{\s*(\w+)\s*\}\}/g,(F,P)=>P in h?h[P]:"{{"+P+"}}"):s}(F,h)})(),translate:s=>_(function*(){})()}},(T,e,c)=>{var h,F,Ze,m,at;Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleLinkService=e.PDFLinkService=e.LinkTarget=void 0;var r=c(6);const f={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function E(v,{url:b,target:A,rel:D,enabled:k=!0}={}){if(!b||"string"!=typeof b)throw new Error('A valid "url" parameter must provided.');const V=(0,r.removeNullCharacters)(b);k?v.href=v.title=V:(v.href="",v.title=`Disabled: ${V}`,v.onclick=()=>!1);let U="";switch(A){case f.NONE:break;case f.SELF:U="_self";break;case f.BLANK:U="_blank";break;case f.PARENT:U="_parent";break;case f.TOP:U="_top"}v.target=U,v.rel="string"==typeof D?D:"noopener noreferrer nofollow"}e.LinkTarget=f;const i=class{constructor({eventBus:b,externalLinkTarget:A=null,externalLinkRel:D=null,ignoreDestinationZoom:k=!1}={}){ye(this,F),ye(this,h,new Map),this.eventBus=b,this.externalLinkTarget=A,this.externalLinkRel=D,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=k,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(b,A=null){this.baseUrl=A,this.pdfDocument=b,ue(this,h).clear()}setViewer(b){this.pdfViewer=b}setHistory(b){this.pdfHistory=b}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(b){this.pdfViewer.currentPageNumber=b}get rotation(){return this.pdfViewer.pagesRotation}set rotation(b){this.pdfViewer.pagesRotation=b}goToDestination(b){var A=this;return _(function*(){var V;if(!A.pdfDocument)return;let D,k;"string"==typeof b?(D=b,k=yield A.pdfDocument.getDestination(b)):(D=null,k=yield b),Array.isArray(k)?xe(V=A,F,Ze).call(V,b,D,k):console.error(`PDFLinkService.goToDestination: "${k}" is not a valid destination array, for dest="${b}".`)})()}goToPage(b){if(!this.pdfDocument)return;const A="string"==typeof b&&this.pdfViewer.pageLabelToPageNumber(b)||0|b;Number.isInteger(A)&&A>0&&A<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(A)),this.pdfViewer.scrollPageIntoView({pageNumber:A})):console.error(`PDFLinkService.goToPage: "${b}" is not a valid page.`)}addLinkAttributes(b,A,D=!1){E(b,{url:A,target:D?f.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(b){if("string"==typeof b){if(b.length>0)return this.getAnchorUrl("#"+escape(b))}else if(Array.isArray(b)){const A=JSON.stringify(b);if(A.length>0)return this.getAnchorUrl("#"+escape(A))}return this.getAnchorUrl("")}getAnchorUrl(b){return(this.baseUrl||"")+b}setHash(b){var k;if(!this.pdfDocument)return;let A,D;if(b.includes("=")){const V=(0,r.parseQueryString)(b);if(V.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:V.get("search").replace(/"/g,""),phraseSearch:"true"===V.get("phrase")}),V.has("page")&&(A=0|V.get("page")||1),V.has("zoom")){const U=V.get("zoom").split(","),I=U[0],O=parseFloat(I);I.includes("Fit")?"Fit"===I||"FitB"===I?D=[null,{name:I}]:"FitH"===I||"FitBH"===I||"FitV"===I||"FitBV"===I?D=[null,{name:I},U.length>1?0|U[1]:null]:"FitR"===I?5!==U.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):D=[null,{name:I},0|U[1],0|U[2],0|U[3],0|U[4]]:console.error(`PDFLinkService.setHash: "${I}" is not a valid zoom value.`):D=[null,{name:"XYZ"},U.length>1?0|U[1]:null,U.length>2?0|U[2]:null,O?O/100:I]}D?this.pdfViewer.scrollPageIntoView({pageNumber:A||this.page,destArray:D,allowNegativeOffset:!0}):A&&(this.page=A),V.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:V.get("pagemode")}),V.has("nameddest")&&this.goToDestination(V.get("nameddest"))}else{D=unescape(b);try{D=JSON.parse(D),Array.isArray(D)||(D=D.toString())}catch(V){}if("string"==typeof D||xe(k=i,m,at).call(k,D))return void this.goToDestination(D);console.error(`PDFLinkService.setHash: "${unescape(b)}" is not a valid destination.`)}}executeNamedAction(b){var A,D;switch(b){case"GoBack":null==(A=this.pdfHistory)||A.back();break;case"GoForward":null==(D=this.pdfHistory)||D.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:b})}cachePageRef(b,A){if(!A)return;const D=0===A.gen?`${A.num}R`:`${A.num}R${A.gen}`;ue(this,h).set(D,b)}_cachedPageNumber(b){if(!b)return null;const A=0===b.gen?`${b.num}R`:`${b.num}R${b.gen}`;return ue(this,h).get(A)||null}isPageVisible(b){return this.pdfViewer.isPageVisible(b)}isPageCached(b){return this.pdfViewer.isPageCached(b)}};let u=i;h=new WeakMap,F=new WeakSet,Ze=function(b,A=null,D){const k=D[0];let V;if("object"==typeof k&&null!==k){if(V=this._cachedPageNumber(k),!V)return void this.pdfDocument.getPageIndex(k).then(U=>{this.cachePageRef(U+1,k),xe(this,F,Ze).call(this,b,A,D)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${k}" is not a valid page reference, for dest="${b}".`)})}else{if(!Number.isInteger(k))return void console.error(`PDFLinkService.#goToDestinationHelper: "${k}" is not a valid destination reference, for dest="${b}".`);V=k+1}!V||V<1||V>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${V}" is not a valid page number, for dest="${b}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:A,explicitDest:D,pageNumber:V})),this.pdfViewer.scrollPageIntoView({pageNumber:V,destArray:D,ignoreDestinationZoom:this._ignoreDestinationZoom}))},m=new WeakSet,at=function(b){if(!Array.isArray(b))return!1;const A=b.length;if(A<2)return!1;const D=b[0];if(!("object"==typeof D&&Number.isInteger(D.num)&&Number.isInteger(D.gen)||Number.isInteger(D)&&D>=0))return!1;const k=b[1];if("object"!=typeof k||"string"!=typeof k.name)return!1;let V=!0;switch(k.name){case"XYZ":if(5!==A)return!1;break;case"Fit":case"FitB":return 2===A;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==A)return!1;break;case"FitR":if(6!==A)return!1;V=!1;break;default:return!1}for(let U=2;U<A;U++){const I=b[U];if(!("number"==typeof I||V&&null===I))return!1}return!0},ye(u,m),e.PDFLinkService=u;e.SimpleLinkService=class{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(b){}get rotation(){return 0}set rotation(b){}goToDestination(b){return _(function*(){})()}goToPage(b){}addLinkAttributes(b,A,D=!1){E(b,{url:A,enabled:this.externalLinkEnabled})}getDestinationHash(b){return"#"}getAnchorUrl(b){return"#"}setHash(b){}executeNamedAction(b){}cachePageRef(b,A){}isPageVisible(b){return!0}isPageCached(b){return!0}}},(T,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.animationStarted=e.VERTICAL_PADDING=e.UNKNOWN_SCALE=e.TextLayerMode=e.SpreadMode=e.SidebarView=e.ScrollMode=e.SCROLLBAR_PADDING=e.RenderingStates=e.RendererType=e.ProgressBar=e.PresentationModeState=e.OutputScale=e.MIN_SCALE=e.MAX_SCALE=e.MAX_AUTO_SCALE=e.DEFAULT_SCALE_VALUE=e.DEFAULT_SCALE_DELTA=e.DEFAULT_SCALE=e.AutoPrintRegExp=void 0,e.apiPageLayoutToViewerModes=function(d){let R=A.VERTICAL,Z=D.NONE;switch(d){case"SinglePage":R=A.PAGE;break;case"OneColumn":break;case"TwoPageLeft":R=A.PAGE;case"TwoColumnLeft":Z=D.ODD;break;case"TwoPageRight":R=A.PAGE;case"TwoColumnRight":Z=D.EVEN}return{scrollMode:R,spreadMode:Z}},e.apiPageModeToSidebarView=function(d){switch(d){case"UseNone":return i.NONE;case"UseThumbs":return i.THUMBS;case"UseOutlines":return i.OUTLINE;case"UseAttachments":return i.ATTACHMENTS;case"UseOC":return i.LAYERS}return i.NONE},e.approximateFraction=function(d){if(Math.floor(d)===d)return[d,1];const R=1/d;if(R>8)return[1,8];if(Math.floor(R)===R)return[1,R];const z=d>1?R:d;let pe,$=0,se=1,he=1,ce=1;for(;;){const ge=$+he,_e=se+ce;if(_e>8)break;z<=ge/_e?(he=ge,ce=_e):($=ge,se=_e)}return pe=z-$/se<he/ce-z?z===d?[$,se]:[se,$]:z===d?[he,ce]:[ce,he],pe},e.backtrackBeforeAllVisibleElements=g,e.binarySearchFirstItem=y,e.getActiveOrFocusedElement=function(){let d=document,R=d.activeElement||d.querySelector(":focus");for(;null==R?void 0:R.shadowRoot;)d=R.shadowRoot,R=d.activeElement||d.querySelector(":focus");return R},e.getPageSizeInches=function({view:d,userUnit:R,rotate:Z}){const[z,$,se,he]=d,ce=Z%180!=0,pe=(se-z)/72*R,ge=(he-$)/72*R;return{width:ce?ge:pe,height:ce?pe:ge}},e.getVisibleElements=function({scrollEl:d,views:R,sortByVisibility:Z=!1,horizontal:z=!1,rtl:$=!1}){const se=d.scrollTop,he=se+d.clientHeight,ce=d.scrollLeft,pe=ce+d.clientWidth;const ve=[],Ce=new Set,me=R.length;let Se=y(R,z?function(Y){const J=Y.div,de=J.offsetLeft+J.clientLeft;return $?de<pe:de+J.clientWidth>ce}:function(Y){const J=Y.div;return J.offsetTop+J.clientTop+J.clientHeight>se});Se>0&&Se<me&&!z&&(Se=g(Se,R,se));let Me=z?pe:-1;for(let Y=Se;Y<me;Y++){const J=R[Y],de=J.div,fe=de.offsetLeft+de.clientLeft,be=de.offsetTop+de.clientTop,Ae=de.clientWidth,Le=de.clientHeight,Fe=fe+Ae,Re=be+Le;if(-1===Me)Re>=he&&(Me=Re);else if((z?fe:be)>Me)break;if(Re<=se||be>=he||Fe<=ce||fe>=pe)continue;const Te=Math.max(0,se-be)+Math.max(0,Re-he),Ie=(Ae-(Math.max(0,ce-fe)+Math.max(0,Fe-pe)))/Ae;ve.push({id:J.id,x:fe,y:be,view:J,percent:(Le-Te)/Le*Ie*100|0,widthPercent:100*Ie|0}),Ce.add(J.id)}const Ee=ve[0],ie=ve[ve.length-1];return Z&&ve.sort(function(Y,J){const de=Y.percent-J.percent;return Math.abs(de)>.001?-de:Y.id-J.id}),{first:Ee,last:ie,views:ve,ids:Ce}},e.isPortraitOrientation=function(d){return d.width<=d.height},e.isValidRotation=function(d){return Number.isInteger(d)&&d%90==0},e.isValidScrollMode=function(d){return Number.isInteger(d)&&Object.values(A).includes(d)&&d!==A.UNKNOWN},e.isValidSpreadMode=function(d){return Number.isInteger(d)&&Object.values(D).includes(d)&&d!==D.UNKNOWN},e.noContextMenuHandler=function(d){d.preventDefault()},e.normalizeWheelEventDelta=function(d){let R=C(d);return 0===d.deltaMode?R/=900:1===d.deltaMode&&(R/=30),R},e.normalizeWheelEventDirection=C,e.parseQueryString=function(d){const R=new Map;for(const[Z,z]of new URLSearchParams(d))R.set(Z.toLowerCase(),z);return R},e.removeNullCharacters=function(d,R=!1){return"string"!=typeof d?(console.error("The argument must be a string."),d):(R&&(d=d.replace(L," ")),d.replace(G,""))},e.roundToDivide=function(d,R){const Z=d%R;return 0===Z?d:Math.round(d-Z+R)},e.scrollIntoView=function(d,R,Z=!1){let z=d.offsetParent;if(!z)return void console.error("offsetParent is not set -- cannot scroll");let $=d.offsetTop+d.clientTop,se=d.offsetLeft+d.clientLeft;for(;z.clientHeight===z.scrollHeight&&z.clientWidth===z.scrollWidth||Z&&(z.classList.contains("markedContent")||"hidden"===getComputedStyle(z).overflow);)if($+=z.offsetTop,se+=z.offsetLeft,z=z.offsetParent,!z)return;R&&(void 0!==R.top&&($+=R.top),void 0!==R.left&&(se+=R.left,z.scrollLeft=se)),z.scrollTop=$},e.watchScroll=function(d,R){const Z=function(se){$||($=window.requestAnimationFrame(function(){$=null;const ce=d.scrollLeft,pe=z.lastX;ce!==pe&&(z.right=ce>pe),z.lastX=ce;const ge=d.scrollTop,_e=z.lastY;ge!==_e&&(z.down=ge>_e),z.lastY=ge,R(z)}))},z={right:!0,down:!0,lastX:d.scrollLeft,lastY:d.scrollTop,_eventHandler:Z};let $=null;return d.addEventListener("scroll",Z,!0),z},e.DEFAULT_SCALE_VALUE="auto",e.DEFAULT_SCALE=1,e.DEFAULT_SCALE_DELTA=1.1,e.MIN_SCALE=.1,e.MAX_SCALE=10,e.UNKNOWN_SCALE=0,e.MAX_AUTO_SCALE=1.25,e.SCROLLBAR_PADDING=40,e.VERTICAL_PADDING=5;e.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},e.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const i={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};e.SidebarView=i,e.RendererType={CANVAS:"canvas",SVG:"svg"},e.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const A={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};e.ScrollMode=A;const D={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};e.SpreadMode=D,e.AutoPrintRegExp=/\bprint\s*\(/;e.OutputScale=class{constructor(){const R=window.devicePixelRatio||1;this.sx=R,this.sy=R}get scaled(){return 1!==this.sx||1!==this.sy}};const G=/\x00/g,L=/[\x01-\x1F]/g;function y(d,R,Z=0){let z=Z,$=d.length-1;if($<0||!R(d[$]))return d.length;if(R(d[z]))return z;for(;z<$;){const se=z+$>>1;R(d[se])?$=se:z=se+1}return z}function g(d,R,Z){if(d<2)return d;let z=R[d].div,$=z.offsetTop+z.clientTop;$>=Z&&(z=R[d-1].div,$=z.offsetTop+z.clientTop);for(let se=d-2;se>=0&&(z=R[se].div,!(z.offsetTop+z.clientTop+z.clientHeight<=$));--se)d=se;return d}function C(d){let R=Math.hypot(d.deltaX,d.deltaY);const Z=Math.atan2(d.deltaY,d.deltaX);return-.25*Math.PI<Z&&Z<.75*Math.PI&&(R=-R),R}const W=new Promise(function(d){window.requestAnimationFrame(d)});e.animationStarted=W;e.ProgressBar=class{constructor(R,{height:Z,width:z,units:$}={}){this.visible=!0,this.div=document.querySelector(R+" .progress"),this.bar=this.div.parentNode,this.height=Z||100,this.width=z||100,this.units=$||"%",this.div.style.height=this.height+this.units,this.percent=0}_updateBar(){if(this._indeterminate)return this.div.classList.add("indeterminate"),void(this.div.style.width=this.width+this.units);this.div.classList.remove("indeterminate"),this.div.style.width=this.width*this._percent/100+this.units}get percent(){return this._percent}set percent(R){this._indeterminate=isNaN(R),this._percent=function(d,R,Z){return Math.min(Math.max(d,R),Z)}(R,0,100),this._updateBar()}setWidth(R){if(!R)return;const z=R.parentNode.offsetWidth-R.offsetWidth;z>0&&document.documentElement.style.setProperty("--loadingBar-end-offset",`${z}px`)}hide(){!this.visible||(this.visible=!1,this.bar.classList.add("hidden"))}show(){this.visible||(this.visible=!0,this.bar.classList.remove("hidden"))}}},(T,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StructTreeLayerBuilder=void 0;const c={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},r=/^H(\d+)$/;e.StructTreeLayerBuilder=class{constructor({pdfPage:E}){this.pdfPage=E}render(E){return this._walk(E)}_setAttributes(E,u){void 0!==E.alt&&u.setAttribute("aria-label",E.alt),void 0!==E.id&&u.setAttribute("aria-owns",E.id),void 0!==E.lang&&u.setAttribute("lang",E.lang)}_walk(E){if(!E)return null;const u=document.createElement("span");if("role"in E){const{role:s}=E,h=s.match(r);h?(u.setAttribute("role","heading"),u.setAttribute("aria-level",h[1])):c[s]&&u.setAttribute("role",c[s])}if(this._setAttributes(E,u),E.children)if(1===E.children.length&&"id"in E.children[0])this._setAttributes(E.children[0],u);else for(const s of E.children)u.appendChild(this._walk(s));return u}}},(T,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerBuilder=void 0;var r=c(3);e.TextLayerBuilder=class{constructor({textLayerDiv:u,eventBus:s,pageIndex:h,viewport:F,highlighter:P=null,enhanceTextSelection:m=!1}){this.textLayerDiv=u,this.eventBus=s,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=h+1,this.viewport=F,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=P,this.enhanceTextSelection=m,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const u=document.createElement("div");u.className="endOfContent",this.textLayerDiv.appendChild(u)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(u=0){var h;if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,null==(h=this.highlighter)||h.setTextMapping(this.textDivs,this.textContentItemsStr);const s=document.createDocumentFragment();this.textLayerRenderTask=(0,r.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:s,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:u,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{var F;this.textLayerDiv.appendChild(s),this._finishRendering(),null==(F=this.highlighter)||F.enable()},function(F){})}cancel(){var u;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),null==(u=this.highlighter)||u.disable()}setTextContentStream(u){this.cancel(),this.textContentStream=u}setTextContent(u){this.cancel(),this.textContent=u}_bindMouse(){const u=this.textLayerDiv;let s=null;u.addEventListener("mousedown",h=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(s&&(clearTimeout(s),s=null));const F=u.querySelector(".endOfContent");if(!F)return;let P=h.target!==u;if(P=P&&"none"!==window.getComputedStyle(F).getPropertyValue("-moz-user-select"),P){const m=u.getBoundingClientRect(),t=Math.max(0,(h.pageY-m.top)/m.height);F.style.top=(100*t).toFixed(2)+"%"}F.classList.add("active")}),u.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(s=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),s=null},300));const h=u.querySelector(".endOfContent");!h||(h.style.top="",h.classList.remove("active"))})}}},(T,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayerBuilder=void 0;var r=c(3);e.XfaLayerBuilder=class{constructor({pageDiv:E,pdfPage:u,annotationStorage:s=null,linkService:h,xfaHtml:F=null}){this.pageDiv=E,this.pdfPage=u,this.annotationStorage=s,this.linkService=h,this.xfaHtml=F,this.div=null,this._cancelled=!1}render(E,u="display"){if("print"===u){const s={viewport:E.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:u},h=document.createElement("div");this.pageDiv.appendChild(h),s.div=h;const F=r.XfaLayer.render(s);return Promise.resolve(F)}return this.pdfPage.getXfa().then(s=>{if(this._cancelled||!s)return{textDivs:[]};const h={viewport:E.clone({dontFlip:!0}),div:this.div,xfaHtml:s,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:u};return this.div?r.XfaLayer.update(h):(this.div=document.createElement("div"),this.pageDiv.appendChild(this.div),h.div=this.div,r.XfaLayer.render(h))}).catch(s=>{console.error(s)})}cancel(){this._cancelled=!0}hide(){!this.div||(this.div.hidden=!0)}}},(T,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFViewer=e.PDFSinglePageViewer=void 0;var r=c(6),l=c(11);e.PDFViewer=class extends l.BaseViewer{};e.PDFSinglePageViewer=class extends l.BaseViewer{_resetView(){super._resetView(),this._scrollMode=r.ScrollMode.PAGE,this._spreadMode=r.SpreadMode.NONE}set scrollMode(s){}_updateScrollMode(){}set spreadMode(s){}_updateSpreadMode(){}}},(T,e,c)=>{var k,V,U,et,O,G,L,H,y,o,a,S,ot,x,lt,C,We,B,ct,j,ht,W,dt,N,ut;Object.defineProperty(e,"__esModule",{value:!0}),e.PagesCountLimit=e.PDFPageViewBuffer=e.BaseViewer=void 0;var r=c(3),l=c(6),f=c(2),E=c(4),u=c(12),s=c(14),h=c(5),F=c(7),P=c(15),m=c(8),t=c(9);const v="enablePermissions",b={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};e.PagesCountLimit=b;class A{constructor(d){ye(this,U),ye(this,k,new Set),ye(this,V,0),Pe(this,V,d)}push(d){const R=ue(this,k);R.has(d)&&R.delete(d),R.add(d),R.size>ue(this,V)&&xe(this,U,et).call(this)}resize(d,R=null){Pe(this,V,d);const Z=ue(this,k);if(R){const z=Z.size;let $=1;for(const se of Z)if(R.has(se.id)&&(Z.delete(se),Z.add(se)),++$>z)break}for(;Z.size>ue(this,V);)xe(this,U,et).call(this)}has(d){return ue(this,k).has(d)}[Symbol.iterator](){return ue(this,k).keys()}}k=new WeakMap,V=new WeakMap,U=new WeakSet,et=function(){const d=ue(this,k).keys().next().value;null==d||d.destroy(),ue(this,k).delete(d)},e.PDFPageViewBuffer=A;const ee=class{constructor(d){var Z,z,$,se;if(ye(this,S),ye(this,x),ye(this,C),ye(this,B),ye(this,j),ye(this,W),ye(this,N),ye(this,O,null),ye(this,G,r.AnnotationMode.ENABLE_FORMS),ye(this,L,null),ye(this,H,!1),ye(this,y,0),ye(this,o,null),ye(this,a,null),this.constructor===ee)throw new Error("Cannot initialize BaseViewer.");const R="2.13.216";if(r.version!==R)throw new Error(`The API version "${r.version}" does not match the Viewer version "${R}".`);if(this.container=d.container,this.viewer=d.viewer||d.container.firstElementChild,"DIV"!==(null==(Z=this.container)?void 0:Z.tagName.toUpperCase())||"DIV"!==(null==(z=this.viewer)?void 0:z.tagName.toUpperCase()))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=d.eventBus,this.linkService=d.linkService||new h.SimpleLinkService,this.downloadManager=d.downloadManager||null,this.findController=d.findController||null,this._scriptingManager=d.scriptingManager||null,this.removePageBorders=d.removePageBorders||!1,this.textLayerMode=null!=($=d.textLayerMode)?$:l.TextLayerMode.ENABLE,Pe(this,G,null!=(se=d.annotationMode)?se:r.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=d.imageResourcesPath||"",this.enablePrintAutoRotate=d.enablePrintAutoRotate||!1,this.renderer=d.renderer||l.RendererType.CANVAS,this.useOnlyCssZoom=d.useOnlyCssZoom||!1,this.maxCanvasPixels=d.maxCanvasPixels,this.l10n=d.l10n||E.NullL10n,Pe(this,H,d.enablePermissions||!1),this.defaultRenderingQueue=!d.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new s.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=d.renderingQueue,this._doc=document.documentElement,this.scroll=(0,l.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=l.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),Promise.resolve().then(()=>{this.eventBus.dispatch("baseviewerinit",{source:this})})}get pagesCount(){return this._pages.length}getPageView(d){return this._pages[d]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every(function(d){return null==d?void 0:d.pdfPage})}get renderForms(){return ue(this,G)===r.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(d){if(!Number.isInteger(d))throw new Error("Invalid page number.");!this.pdfDocument||this._setCurrentPageNumber(d,!0)||console.error(`currentPageNumber: "${d}" is not a valid page.`)}_setCurrentPageNumber(d,R=!1){var z,$;if(this._currentPageNumber===d)return R&&this._resetCurrentPageView(),!0;if(!(0<d&&d<=this.pagesCount))return!1;const Z=this._currentPageNumber;return this._currentPageNumber=d,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:d,pageLabel:null!=($=null==(z=this._pageLabels)?void 0:z[d-1])?$:null,previous:Z}),R&&this._resetCurrentPageView(),!0}get currentPageLabel(){var d,R;return null!=(R=null==(d=this._pageLabels)?void 0:d[this._currentPageNumber-1])?R:null}set currentPageLabel(d){if(!this.pdfDocument)return;let R=0|d;if(this._pageLabels){const Z=this._pageLabels.indexOf(d);Z>=0&&(R=Z+1)}this._setCurrentPageNumber(R,!0)||console.error(`currentPageLabel: "${d}" is not a valid page.`)}get currentScale(){return this._currentScale!==l.UNKNOWN_SCALE?this._currentScale:l.DEFAULT_SCALE}set currentScale(d){if(isNaN(d))throw new Error("Invalid numeric scale.");!this.pdfDocument||this._setScale(d,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(d){!this.pdfDocument||this._setScale(d,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(d){if(!(0,l.isValidRotation)(d))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((d%=360)<0&&(d+=360),this._pagesRotation===d))return;this._pagesRotation=d;const R=this._currentPageNumber,Z={rotation:d};for(const z of this._pages)z.update(Z);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:d,pageNumber:R}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(d){var R=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null)),this.pdfDocument=d,!d)return;const Z=d.isPureXfa,z=d.numPages,$=d.getPage(1),se=d.getOptionalContentConfig(),he=ue(this,H)?d.getPermissions():Promise.resolve();if(z>b.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const ce=this._scrollMode=l.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:ce})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:z})},()=>{}),this._onBeforeDraw=ce=>{const pe=this._pages[ce.pageNumber-1];!pe||ue(this,O).push(pe)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=ce=>{ce.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:ce.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,ue(this,a)&&(document.removeEventListener("visibilitychange",ue(this,a)),Pe(this,a,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([$,he]).then(([ce,pe])=>{if(d!==this.pdfDocument)return;this._firstPageCapability.resolve(ce),this._optionalContentConfigPromise=se,xe(this,S,ot).call(this,pe);const ge=this._scrollMode===l.ScrollMode.PAGE?null:this.viewer,_e=this.currentScale,ve=ce.getViewport({scale:_e*r.PixelsPerInch.PDF_TO_CSS_UNITS}),Ce=this.textLayerMode===l.TextLayerMode.DISABLE||Z?null:this,me=ue(this,G)!==r.AnnotationMode.DISABLE?this:null,Se=Z?this:null;for(let Ee=1;Ee<=z;++Ee){const ie=new u.PDFPageView({container:ge,eventBus:this.eventBus,id:Ee,scale:_e,defaultViewport:ve.clone(),optionalContentConfigPromise:se,renderingQueue:this.renderingQueue,textLayerFactory:Ce,textLayerMode:this.textLayerMode,annotationLayerFactory:me,annotationMode:ue(this,G),xfaLayerFactory:Se,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,l10n:this.l10n});this._pages.push(ie)}const Me=this._pages[0];Me&&(Me.setPdfPage(ce),this.linkService.cachePageRef(1,ce.ref)),this._scrollMode===l.ScrollMode.PAGE?xe(this,C,We).call(this):this._spreadMode!==l.SpreadMode.NONE&&this._updateSpreadMode(),xe(this,x,lt).call(this).then(_(function*(){if(R.findController&&R.findController.setDocument(d),R._scriptingManager&&R._scriptingManager.setDocument(d),d.loadingParams.disableAutoFetch||z>b.FORCE_LAZY_PAGE_INIT)return void R._pagesCapability.resolve();let Ee=z-1;if(Ee<=0)R._pagesCapability.resolve();else for(let ie=2;ie<=z;++ie){const Y=d.getPage(ie).then(J=>{const de=R._pages[ie-1];de.pdfPage||de.setPdfPage(J),R.linkService.cachePageRef(ie,J.ref),0==--Ee&&R._pagesCapability.resolve()},J=>{console.error(`Unable to get page ${ie} to initialize viewer`,J),0==--Ee&&R._pagesCapability.resolve()});ie%b.PAUSE_EAGER_PAGE_INIT==0&&(yield Y)}})),this.eventBus.dispatch("pagesinit",{source:this}),d.getMetadata().then(({info:Ee})=>{d===this.pdfDocument&&Ee.Language&&(this.viewer.lang=Ee.Language)}),this.defaultRenderingQueue&&this.update()}).catch(ce=>{console.error("Unable to initialize viewer",ce),this._pagesCapability.reject(ce)})}setPageLabels(d){var R,Z;if(this.pdfDocument){d?Array.isArray(d)&&this.pdfDocument.numPages===d.length?this._pageLabels=d:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let z=0,$=this._pages.length;z<$;z++)this._pages[z].setPageLabel(null!=(Z=null==(R=this._pageLabels)?void 0:R[z])?Z:null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=l.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,Pe(this,O,new A(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,r.createPromiseCapability)(),this._onePageRenderedCapability=(0,r.createPromiseCapability)(),this._pagesCapability=(0,r.createPromiseCapability)(),this._scrollMode=l.ScrollMode.VERTICAL,this._previousScrollMode=l.ScrollMode.UNKNOWN,this._spreadMode=l.SpreadMode.NONE,Pe(this,o,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),ue(this,a)&&(document.removeEventListener("visibilitychange",ue(this,a)),Pe(this,a,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(v),null!==ue(this,L)&&(Pe(this,G,ue(this,L)),Pe(this,L,null))}_scrollUpdate(){0!==this.pagesCount&&this.update()}_scrollIntoView({pageDiv:d,pageSpot:R=null,pageNumber:Z=null}){if(this._scrollMode===l.ScrollMode.PAGE&&(Z&&this._setCurrentPageNumber(Z),xe(this,C,We).call(this),this.update()),!R&&!this.isInPresentationMode){const z=d.offsetLeft+d.clientLeft,$=z+d.clientWidth,{scrollLeft:se,clientWidth:he}=this.container;(this._scrollMode===l.ScrollMode.HORIZONTAL||z<se||$>se+he)&&(R={left:0,top:0})}(0,l.scrollIntoView)(d,R)}_setScaleUpdatePages(d,R,Z=!1,z=!1){if(this._currentScaleValue=R.toString(),xe(this,B,ct).call(this,d))return void(z&&this.eventBus.dispatch("scalechanging",{source:this,scale:d,presetValue:R}));this._doc.style.setProperty("--zoom-factor",d),this._doc.style.setProperty("--viewport-scale-factor",d*r.PixelsPerInch.PDF_TO_CSS_UNITS);const $={scale:d};for(const se of this._pages)se.update($);if(this._currentScale=d,!Z){let he,se=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(se=this._location.pageNumber,he=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:se,destArray:he,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:d,presetValue:z?R:void 0}),this.defaultRenderingQueue&&this.update(),Pe(this,y,this.container.clientHeight)}get _pageWidthScaleFactor(){return this._spreadMode!==l.SpreadMode.NONE&&this._scrollMode!==l.ScrollMode.HORIZONTAL?2:1}_setScale(d,R=!1){let Z=parseFloat(d);if(Z>0)this._setScaleUpdatePages(Z,d,R,!1);else{const z=this._pages[this._currentPageNumber-1];if(!z)return;let $=l.SCROLLBAR_PADDING,se=l.VERTICAL_PADDING;this.isInPresentationMode?$=se=4:this.removePageBorders&&($=se=0),this._scrollMode===l.ScrollMode.HORIZONTAL&&([$,se]=[se,$]);const he=(this.container.clientWidth-$)/z.width*z.scale/this._pageWidthScaleFactor,ce=(this.container.clientHeight-se)/z.height*z.scale;switch(d){case"page-actual":Z=1;break;case"page-width":Z=he;break;case"page-height":Z=ce;break;case"page-fit":Z=Math.min(he,ce);break;case"auto":const pe=(0,l.isPortraitOrientation)(z)?he:Math.min(ce,he);Z=Math.min(l.MAX_AUTO_SCALE,pe);break;default:return void console.error(`_setScale: "${d}" is an unknown zoom value.`)}this._setScaleUpdatePages(Z,d,R,!0)}}_resetCurrentPageView(){this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),this._scrollIntoView({pageDiv:this._pages[this._currentPageNumber-1].div})}pageLabelToPageNumber(d){if(!this._pageLabels)return null;const R=this._pageLabels.indexOf(d);return R<0?null:R+1}scrollPageIntoView({pageNumber:d,destArray:R=null,allowNegativeOffset:Z=!1,ignoreDestinationZoom:z=!1}){if(!this.pdfDocument)return;const $=Number.isInteger(d)&&this._pages[d-1];if(!$)return void console.error(`scrollPageIntoView: "${d}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!R)return void this._setCurrentPageNumber(d,!0);let ge,_e,se=0,he=0,ce=0,pe=0;const ve=$.rotation%180!=0,Ce=(ve?$.height:$.width)/$.scale/r.PixelsPerInch.PDF_TO_CSS_UNITS,me=(ve?$.width:$.height)/$.scale/r.PixelsPerInch.PDF_TO_CSS_UNITS;let Se=0;switch(R[1].name){case"XYZ":se=R[2],he=R[3],Se=R[4],se=null!==se?se:0,he=null!==he?he:me;break;case"Fit":case"FitB":Se="page-fit";break;case"FitH":case"FitBH":he=R[2],Se="page-width",null===he&&this._location?(se=this._location.left,he=this._location.top):("number"!=typeof he||he<0)&&(he=me);break;case"FitV":case"FitBV":se=R[2],ce=Ce,pe=me,Se="page-height";break;case"FitR":se=R[2],he=R[3],ce=R[4]-se,pe=R[5]-he,ge=(this.container.clientWidth-(this.removePageBorders?0:l.SCROLLBAR_PADDING))/ce/r.PixelsPerInch.PDF_TO_CSS_UNITS,_e=(this.container.clientHeight-(this.removePageBorders?0:l.VERTICAL_PADDING))/pe/r.PixelsPerInch.PDF_TO_CSS_UNITS,Se=Math.min(Math.abs(ge),Math.abs(_e));break;default:return void console.error(`scrollPageIntoView: "${R[1].name}" is not a valid destination type.`)}if(z||(Se&&Se!==this._currentScale?this.currentScaleValue=Se:this._currentScale===l.UNKNOWN_SCALE&&(this.currentScaleValue=l.DEFAULT_SCALE_VALUE)),"page-fit"===Se&&!R[4])return void this._scrollIntoView({pageDiv:$.div,pageNumber:d});const Me=[$.viewport.convertToViewportPoint(se,he),$.viewport.convertToViewportPoint(se+ce,he+pe)];let Ee=Math.min(Me[0][0],Me[1][0]),ie=Math.min(Me[0][1],Me[1][1]);Z||(Ee=Math.max(Ee,0),ie=Math.max(ie,0)),this._scrollIntoView({pageDiv:$.div,pageSpot:{left:Ee,top:ie},pageNumber:d})}_updateLocation(d){const R=this._currentScale,Z=this._currentScaleValue,z=parseFloat(Z)===R?Math.round(1e4*R)/100:Z,$=d.id;let se="#page="+$;se+="&zoom="+z;const ce=this.container,pe=this._pages[$-1].getPagePoint(ce.scrollLeft-d.x,ce.scrollTop-d.y),ge=Math.round(pe[0]),_e=Math.round(pe[1]);se+=","+ge+","+_e,this._location={pageNumber:$,scale:z,top:_e,left:ge,rotation:this._pagesRotation,pdfOpenParams:se}}update(){const d=this._getVisiblePages(),R=d.views,Z=R.length;if(0===Z)return;const z=Math.max(10,2*Z+1);if(ue(this,O).resize(z,d.ids),this.renderingQueue.renderHighestPriority(d),!this.isInPresentationMode){const $=this._spreadMode===l.SpreadMode.NONE&&(this._scrollMode===l.ScrollMode.PAGE||this._scrollMode===l.ScrollMode.VERTICAL);let se=this._currentPageNumber,he=!1;for(const ce of R){if(ce.percent<100)break;if(ce.id===se&&$){he=!0;break}}he||(se=R[0].id),this._setCurrentPageNumber(se)}this._updateLocation(d.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(d){return this.container.contains(d)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===l.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===l.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getCurrentVisiblePage(){if(!this.pagesCount)return{views:[]};const d=this._pages[this._currentPageNumber-1],R=d.div,Z={id:d.id,x:R.offsetLeft+R.clientLeft,y:R.offsetTop+R.clientTop,view:d};return{first:Z,last:Z,views:[Z],ids:new Set([d.id])}}_getVisiblePages(){if(this.isInPresentationMode)return this._getCurrentVisiblePage();const d=this._scrollMode===l.ScrollMode.PAGE?ue(this,o).pages:this._pages,R=this._scrollMode===l.ScrollMode.HORIZONTAL;return(0,l.getVisibleElements)({scrollEl:this.container,views:d,sortByVisibility:!0,horizontal:R,rtl:R&&this._isContainerRtl})}isPageVisible(d){return!!this.pdfDocument&&(Number.isInteger(d)&&d>0&&d<=this.pagesCount?this._getVisiblePages().ids.has(d):(console.error(`isPageVisible: "${d}" is not a valid page.`),!1))}isPageCached(d){if(!this.pdfDocument)return!1;if(!(Number.isInteger(d)&&d>0&&d<=this.pagesCount))return console.error(`isPageCached: "${d}" is not a valid page.`),!1;const R=this._pages[d-1];return ue(this,O).has(R)}cleanup(){for(let d=0,R=this._pages.length;d<R;d++)this._pages[d]&&this._pages[d].renderingState!==l.RenderingStates.FINISHED&&this._pages[d].reset()}_cancelRendering(){for(let d=0,R=this._pages.length;d<R;d++)this._pages[d]&&this._pages[d].cancelRendering()}forceRendering(d){const R=d||this._getVisiblePages(),Z=xe(this,W,dt).call(this,R),$=this.renderingQueue.getHighestPriority(R,this._pages,Z,this._spreadMode!==l.SpreadMode.NONE&&this._scrollMode!==l.ScrollMode.HORIZONTAL);return xe(this,N,ut).call(this,R.ids),!!$&&(xe(this,j,ht).call(this,$).then(()=>{this.renderingQueue.renderView($)}),!0)}createTextLayerBuilder(d,R,Z,z=!1,$,se){return new m.TextLayerBuilder({textLayerDiv:d,eventBus:$,pageIndex:R,viewport:Z,enhanceTextSelection:!this.isInPresentationMode&&z,highlighter:se})}createTextHighlighter(d,R){return new P.TextHighlighter({eventBus:R,pageIndex:d,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder(d,R,Z=null,z="",$=!0,se=E.NullL10n,he=null,ce=null,pe=null,ge=null,_e=null){var ve,Ce,me,Se;return new f.AnnotationLayerBuilder({pageDiv:d,pdfPage:R,annotationStorage:Z||(null==(ve=this.pdfDocument)?void 0:ve.annotationStorage),imageResourcesPath:z,renderForms:$,linkService:this.linkService,downloadManager:this.downloadManager,l10n:se,enableScripting:null!=he?he:this.enableScripting,hasJSActionsPromise:ce||(null==(Ce=this.pdfDocument)?void 0:Ce.hasJSActions()),fieldObjectsPromise:ge||(null==(me=this.pdfDocument)?void 0:me.getFieldObjects()),mouseState:pe||(null==(Se=this._scriptingManager)?void 0:Se.mouseState),annotationCanvasMap:_e})}createXfaLayerBuilder(d,R,Z=null){var z;return new t.XfaLayerBuilder({pageDiv:d,pdfPage:R,annotationStorage:Z||(null==(z=this.pdfDocument)?void 0:z.annotationStorage),linkService:this.linkService})}createStructTreeLayerBuilder(d){return new F.StructTreeLayerBuilder({pdfPage:d})}get hasEqualPageSizes(){const d=this._pages[0];for(let R=1,Z=this._pages.length;R<Z;++R){const z=this._pages[R];if(z.width!==d.width||z.height!==d.height)return!1}return!0}getPagesOverview(){return this._pages.map(d=>{const R=d.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,l.isPortraitOrientation)(R)?{width:R.width,height:R.height,rotation:R.rotation}:{width:R.height,height:R.width,rotation:(R.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)}set optionalContentConfigPromise(d){if(!(d instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${d}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=d;const R={optionalContentConfigPromise:d};for(const Z of this._pages)Z.update(R);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:d})}get scrollMode(){return this._scrollMode}set scrollMode(d){if(this._scrollMode!==d){if(!(0,l.isValidScrollMode)(d))throw new Error(`Invalid scroll mode: ${d}`);this.pagesCount>b.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=d,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:d}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(d=null){const R=this._scrollMode,Z=this.viewer;Z.classList.toggle("scrollHorizontal",R===l.ScrollMode.HORIZONTAL),Z.classList.toggle("scrollWrapped",R===l.ScrollMode.WRAPPED),this.pdfDocument&&d&&(R===l.ScrollMode.PAGE?xe(this,C,We).call(this):this._previousScrollMode===l.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(d,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(d){if(this._spreadMode!==d){if(!(0,l.isValidSpreadMode)(d))throw new Error(`Invalid spread mode: ${d}`);this._spreadMode=d,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:d}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(d=null){if(!this.pdfDocument)return;const R=this.viewer,Z=this._pages;if(this._scrollMode===l.ScrollMode.PAGE)xe(this,C,We).call(this);else if(R.textContent="",this._spreadMode===l.SpreadMode.NONE)for(let z=0,$=Z.length;z<$;++z)R.appendChild(Z[z].div);else{const z=this._spreadMode-1;let $=null;for(let se=0,he=Z.length;se<he;++se)null===$?($=document.createElement("div"),$.className="spread",R.appendChild($)):se%2===z&&($=$.cloneNode(!1),R.appendChild($)),$.appendChild(Z[se].div)}!d||(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(d,!0),this.update())}_getPageAdvance(d,R=!1){switch(this._scrollMode){case l.ScrollMode.WRAPPED:{const{views:Z}=this._getVisiblePages(),z=new Map;for(const{id:$,y:se,percent:he,widthPercent:ce}of Z){if(0===he||ce<100)continue;let pe=z.get(se);pe||z.set(se,pe||(pe=[])),pe.push($)}for(const $ of z.values()){const se=$.indexOf(d);if(-1===se)continue;const he=$.length;if(1===he)break;if(R)for(let ce=se-1,pe=0;ce>=pe;ce--){const _e=$[ce+1]-1;if($[ce]<_e)return d-_e}else for(let ce=se+1,pe=he;ce<pe;ce++){const _e=$[ce-1]+1;if($[ce]>_e)return _e-d}if(R){const ce=$[0];if(ce<d)return d-ce+1}else{const ce=$[he-1];if(ce>d)return ce-d+1}break}break}case l.ScrollMode.HORIZONTAL:break;case l.ScrollMode.PAGE:case l.ScrollMode.VERTICAL:{if(this._spreadMode===l.SpreadMode.NONE)break;const Z=this._spreadMode-1;if(R&&d%2!==Z)break;if(!R&&d%2===Z)break;const{views:z}=this._getVisiblePages(),$=R?d-1:d+1;for(const{id:se,percent:he,widthPercent:ce}of z)if(se===$){if(he>0&&100===ce)return 2;break}break}}return 1}nextPage(){const d=this._currentPageNumber,R=this.pagesCount;if(d>=R)return!1;const Z=this._getPageAdvance(d,!1)||1;return this.currentPageNumber=Math.min(d+Z,R),!0}previousPage(){const d=this._currentPageNumber;if(d<=1)return!1;const R=this._getPageAdvance(d,!0)||1;return this.currentPageNumber=Math.max(d-R,1),!0}increaseScale(d=1){let R=this._currentScale;do{R=(R*l.DEFAULT_SCALE_DELTA).toFixed(2),R=Math.ceil(10*R)/10,R=Math.min(l.MAX_SCALE,R)}while(--d>0&&R<l.MAX_SCALE);this.currentScaleValue=R}decreaseScale(d=1){let R=this._currentScale;do{R=(R/l.DEFAULT_SCALE_DELTA).toFixed(2),R=Math.floor(10*R)/10,R=Math.max(l.MIN_SCALE,R)}while(--d>0&&R>l.MIN_SCALE);this.currentScaleValue=R}};let D=ee;O=new WeakMap,G=new WeakMap,L=new WeakMap,H=new WeakMap,y=new WeakMap,o=new WeakMap,a=new WeakMap,S=new WeakSet,ot=function(d){!d||(d.includes(r.PermissionFlag.COPY)||this.viewer.classList.add(v),!d.includes(r.PermissionFlag.MODIFY_ANNOTATIONS)&&!d.includes(r.PermissionFlag.FILL_INTERACTIVE_FORMS)&&ue(this,G)===r.AnnotationMode.ENABLE_FORMS&&(Pe(this,L,ue(this,G)),Pe(this,G,r.AnnotationMode.ENABLE)))},x=new WeakSet,lt=function(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const d=new Promise(R=>{Pe(this,a,()=>{"hidden"===document.visibilityState&&(R(),document.removeEventListener("visibilitychange",ue(this,a)),Pe(this,a,null))}),document.addEventListener("visibilitychange",ue(this,a))});return Promise.race([this._onePageRenderedCapability.promise,d])},C=new WeakSet,We=function(){if(this._scrollMode!==l.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const d=this._currentPageNumber,R=ue(this,o),Z=this.viewer;if(Z.textContent="",R.pages.length=0,this._spreadMode===l.SpreadMode.NONE){const z=this._pages[d-1];if(this.isInPresentationMode){const $=document.createElement("div");$.className="spread";const se=document.createElement("div");se.className="dummyPage",se.style.height=`${this.container.clientHeight}px`,$.appendChild(se),$.appendChild(z.div),Z.appendChild($)}else Z.appendChild(z.div);R.pages.push(z)}else{const z=new Set,$=this._spreadMode-1;d%2!==$?(z.add(d-1),z.add(d)):(z.add(d-2),z.add(d-1));let se=null;for(const he of z){const ce=this._pages[he];!ce||(null===se?(se=document.createElement("div"),se.className="spread",Z.appendChild(se)):he%2===$&&(se=se.cloneNode(!1),Z.appendChild(se)),se.appendChild(ce.div),R.pages.push(ce))}}R.scrollDown=d>=R.previousPageNumber,R.previousPageNumber=d},B=new WeakSet,ct=function(d){return(!this.isInPresentationMode||this.container.clientHeight===ue(this,y))&&(d===this._currentScale||Math.abs(d-this._currentScale)<1e-15)},j=new WeakSet,ht=function(d){var R=this;return _(function*(){var Z,z;if(d.pdfPage)return d.pdfPage;try{const $=yield R.pdfDocument.getPage(d.id);return d.pdfPage||d.setPdfPage($),(null==(z=(Z=R.linkService)._cachedPageNumber)?void 0:z.call(Z,$.ref))||R.linkService.cachePageRef(d.id,$.ref),$}catch($){return console.error("Unable to get page for page view",$),null}})()},W=new WeakSet,dt=function(d){var R,Z;if(1===(null==(R=d.first)?void 0:R.id))return!0;if((null==(Z=d.last)?void 0:Z.id)===this.pagesCount)return!1;switch(this._scrollMode){case l.ScrollMode.PAGE:return ue(this,o).scrollDown;case l.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down},N=new WeakSet,ut=function(d){for(const R of d){const Z=this._pages[R-1];null==Z||Z.toggleLoadingIconSpinner(!0)}for(const R of ue(this,O))d.has(R.id)||R.toggleLoadingIconSpinner(!1)},e.BaseViewer=D},(T,e,c)=>{var h;Object.defineProperty(e,"__esModule",{value:!0}),e.PDFPageView=void 0;var r=c(3),l=c(6),f=c(13),E=c(4);const u=f.compatibilityParams.maxCanvasPixels||16777216;h=new WeakMap,e.PDFPageView=class{constructor(P){var v,b,A,D;ye(this,h,r.AnnotationMode.ENABLE_FORMS);const m=P.container,t=P.defaultViewport;this.id=P.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=P.scale||l.DEFAULT_SCALE,this.viewport=t,this.pdfPageRotate=t.rotation,this._optionalContentConfigPromise=P.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=null!=(v=P.textLayerMode)?v:l.TextLayerMode.ENABLE,Pe(this,h,null!=(b=P.annotationMode)?b:r.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=P.imageResourcesPath||"",this.useOnlyCssZoom=P.useOnlyCssZoom||!1,this.maxCanvasPixels=P.maxCanvasPixels||u,this.eventBus=P.eventBus,this.renderingQueue=P.renderingQueue,this.textLayerFactory=P.textLayerFactory,this.annotationLayerFactory=P.annotationLayerFactory,this.xfaLayerFactory=P.xfaLayerFactory,this.textHighlighter=null==(A=P.textHighlighterFactory)?void 0:A.createTextHighlighter(this.id-1,this.eventBus),this.structTreeLayerFactory=P.structTreeLayerFactory,this.renderer=P.renderer||l.RendererType.CANVAS,this.l10n=P.l10n||E.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=l.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!(null==(D=this.renderingQueue)?void 0:D.hasViewer()),this._annotationCanvasMap=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const i=document.createElement("div");i.className="page",i.style.width=Math.floor(this.viewport.width)+"px",i.style.height=Math.floor(this.viewport.height)+"px",i.setAttribute("data-page-number",this.id),i.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(k=>{i.setAttribute("aria-label",k)}),this.div=i,null==m||m.appendChild(i)}setPdfPage(P){this.pdfPage=P,this.pdfPageRotate=P.rotate,this.viewport=P.getViewport({scale:this.scale*r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}_renderAnnotationLayer(){var P=this;return _(function*(){let m=null;try{yield P.annotationLayer.render(P.viewport,"display")}catch(t){m=t}finally{P.eventBus.dispatch("annotationlayerrendered",{source:P,pageNumber:P.id,error:m})}})()}_renderXfaLayer(){var P=this;return _(function*(){let m=null;try{const t=yield P.xfaLayer.render(P.viewport,"display");P.textHighlighter&&P._buildXfaTextContentItems(t.textDivs)}catch(t){m=t}finally{P.eventBus.dispatch("xfalayerrendered",{source:P,pageNumber:P.id,error:m})}})()}_buildXfaTextContentItems(P){var m=this;return _(function*(){const t=yield m.pdfPage.getTextContent(),i=[];for(const v of t.items)i.push(v.str);m.textHighlighter.setTextMapping(P,i),m.textHighlighter.enable()})()}_resetZoomLayer(P=!1){if(!this.zoomLayer)return;const m=this.zoomLayer.firstChild;this.paintedViewportMap.delete(m),m.width=0,m.height=0,P&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:P=!1,keepAnnotationLayer:m=!1,keepXfaLayer:t=!1}={}){var k,V;this.cancelRendering({keepAnnotationLayer:m,keepXfaLayer:t}),this.renderingState=l.RenderingStates.INITIAL;const i=this.div;i.style.width=Math.floor(this.viewport.width)+"px",i.style.height=Math.floor(this.viewport.height)+"px";const v=i.childNodes,b=P&&this.zoomLayer||null,A=m&&(null==(k=this.annotationLayer)?void 0:k.div)||null,D=t&&(null==(V=this.xfaLayer)?void 0:V.div)||null;for(let U=v.length-1;U>=0;U--){const I=v[U];switch(I){case b:case A:case D:continue}I.remove()}i.removeAttribute("data-loaded"),A&&this.annotationLayer.hide(),D&&this.xfaLayer.hide(),b||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(U=>{var I;null==(I=this.loadingIconDiv)||I.setAttribute("aria-label",U)}),i.appendChild(this.loadingIconDiv)}update({scale:P=0,rotation:m=null,optionalContentConfigPromise:t=null}){if("object"!=typeof arguments[0])return console.error("PDFPageView.update called with separate parameters, please use an object instead."),void this.update({scale:arguments[0],rotation:arguments[1],optionalContentConfigPromise:arguments[2]});this.scale=P||this.scale,"number"==typeof m&&(this.rotation=m),t instanceof Promise&&(this._optionalContentConfigPromise=t);const v=this.scale*r.PixelsPerInch.PDF_TO_CSS_UNITS;if(this.viewport=this.viewport.clone({scale:v,rotation:(this.rotation+this.pdfPageRotate)%360}),this._isStandalone){const{style:A}=document.documentElement;A.setProperty("--zoom-factor",this.scale),A.setProperty("--viewport-scale-factor",v)}if(this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let b=!1;if(this.canvas&&this.maxCanvasPixels>0){const A=this.outputScale;(Math.floor(this.viewport.width)*A.sx|0)*(Math.floor(this.viewport.height)*A.sy|0)>this.maxCanvasPixels&&(b=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&b)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:P=!1,keepXfaLayer:m=!1}={}){var t;this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!P||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.xfaLayer&&(!m||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,null==(t=this.textHighlighter)||t.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:P,redrawAnnotationLayer:m=!1,redrawXfaLayer:t=!1}){const i=this.viewport.width,v=this.viewport.height,b=this.div;P.style.width=P.parentNode.style.width=b.style.width=Math.floor(i)+"px",P.style.height=P.parentNode.style.height=b.style.height=Math.floor(v)+"px";const A=this.viewport.rotation-this.paintedViewportMap.get(P).rotation,D=Math.abs(A);let k=1,V=1;if((90===D||270===D)&&(k=v/i,V=i/v),P.style.transform=`rotate(${A}deg) scale(${k}, ${V})`,this.textLayer){const U=this.textLayer.viewport,O=Math.abs(this.viewport.rotation-U.rotation);let G=i/U.width;(90===O||270===O)&&(G=i/U.height);const L=this.textLayer.textLayerDiv;let H,y;switch(O){case 0:H=y=0;break;case 90:H=0,y="-"+L.style.height;break;case 180:H="-"+L.style.width,y="-"+L.style.height;break;case 270:H="-"+L.style.width,y=0;break;default:console.error("Bad rotation value.")}L.style.transform=`rotate(${O}deg) scale(${G}) translate(${H}, ${y})`,L.style.transformOrigin="0% 0%"}m&&this.annotationLayer&&this._renderAnnotationLayer(),t&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(P,m){return this.viewport.convertToPdfPoint(P,m)}toggleLoadingIconSpinner(P=!1){var m;null==(m=this.loadingIconDiv)||m.classList.toggle("notVisible",!P)}draw(){var V,U,I,P=this;this.renderingState!==l.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:m,pdfPage:t}=this;if(!t)return this.renderingState=l.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=l.RenderingStates.RUNNING;const i=document.createElement("div");i.style.width=m.style.width,i.style.height=m.style.height,i.classList.add("canvasWrapper"),(null==(V=this.annotationLayer)?void 0:V.div)?m.insertBefore(i,this.annotationLayer.div):m.appendChild(i);let v=null;if(this.textLayerMode!==l.TextLayerMode.DISABLE&&this.textLayerFactory){const O=document.createElement("div");O.className="textLayer",O.style.width=i.style.width,O.style.height=i.style.height,(null==(U=this.annotationLayer)?void 0:U.div)?m.insertBefore(O,this.annotationLayer.div):m.appendChild(O),v=this.textLayerFactory.createTextLayerBuilder(O,this.id-1,this.viewport,this.textLayerMode===l.TextLayerMode.ENABLE_ENHANCE,this.eventBus,this.textHighlighter)}this.textLayer=v,ue(this,h)!==r.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(m,t,null,this.imageResourcesPath,ue(this,h)===r.AnnotationMode.ENABLE_FORMS,this.l10n,null,null,null,null,this._annotationCanvasMap))),(null==(I=this.xfaLayer)?void 0:I.div)&&m.appendChild(this.xfaLayer.div);let b=null;this.renderingQueue&&(b=O=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=l.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=l.RenderingStates.RUNNING,O()});O()});const A=function(){var O=_(function*(G=null){if(D===P.paintTask&&(P.paintTask=null),G instanceof r.RenderingCancelledException)P._renderError=null;else if(P._renderError=G,P.renderingState=l.RenderingStates.FINISHED,P.loadingIconDiv&&(P.loadingIconDiv.remove(),delete P.loadingIconDiv),P._resetZoomLayer(!0),P.eventBus.dispatch("pagerendered",{source:P,pageNumber:P.id,cssTransform:!1,timestamp:performance.now(),error:P._renderError}),G)throw G});return function(){return O.apply(this,arguments)}}(),D=this.renderer===l.RendererType.SVG?this.paintOnSvg(i):this.paintOnCanvas(i);D.onRenderContinue=b,this.paintTask=D;const k=D.promise.then(()=>A(null).then(()=>{if(v){const O=t.streamTextContent({includeMarkedContent:!0});v.setTextContentStream(O),v.render()}this.annotationLayer&&this._renderAnnotationLayer()}),function(O){return A(O)});return this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder(m,t,null)),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=O=>{O.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(G=>{if(!G||!this.canvas)return;const L=this.structTreeLayer.render(G);L.classList.add("structTree"),this.canvas.appendChild(L)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder(t)),m.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),k}paintOnCanvas(P){const m=(0,r.createPromiseCapability)(),t={promise:m.promise,onRenderContinue(L){L()},cancel(){G.cancel()}},i=this.viewport,v=document.createElement("canvas");v.hidden=!0;let b=!0;const A=function(){b&&(v.hidden=!1,b=!1)};P.appendChild(v),this.canvas=v,v.mozOpaque=!0;const D=v.getContext("2d",{alpha:!1}),k=this.outputScale=new l.OutputScale;if(this.useOnlyCssZoom){const L=i.clone({scale:r.PixelsPerInch.PDF_TO_CSS_UNITS});k.sx*=L.width/i.width,k.sy*=L.height/i.height}if(this.maxCanvasPixels>0){const H=Math.sqrt(this.maxCanvasPixels/(i.width*i.height));k.sx>H||k.sy>H?(k.sx=H,k.sy=H,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const V=(0,l.approximateFraction)(k.sx),U=(0,l.approximateFraction)(k.sy);v.width=(0,l.roundToDivide)(i.width*k.sx,V[0]),v.height=(0,l.roundToDivide)(i.height*k.sy,U[0]),v.style.width=(0,l.roundToDivide)(i.width,V[1])+"px",v.style.height=(0,l.roundToDivide)(i.height,U[1])+"px",this.paintedViewportMap.set(v,i);const O={canvasContext:D,transform:k.scaled?[k.sx,0,0,k.sy,0,0]:null,viewport:this.viewport,annotationMode:ue(this,h),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap},G=this.pdfPage.render(O);return G.onContinue=function(L){A(),t.onRenderContinue?t.onRenderContinue(L):L()},G.promise.then(function(){A(),m.resolve()},function(L){A(),m.reject(L)}),t}paintOnSvg(P){let m=!1;const t=()=>{if(m)throw new r.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},i=this.pdfPage,v=this.viewport.clone({scale:r.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:i.getOperatorList({annotationMode:ue(this,h)}).then(A=>(t(),new r.SVGGraphics(i.commonObjs,i.objs).getSVG(A,v).then(k=>{t(),this.svg=k,this.paintedViewportMap.set(k,v),k.style.width=P.style.width,k.style.height=P.style.height,this.renderingState=l.RenderingStates.FINISHED,P.appendChild(k)}))),onRenderContinue(A){A()},cancel(){m=!0}}}setPageLabel(P){this.pageLabel="string"==typeof P?P:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}},(T,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.compatibilityParams=e.OptionKind=e.AppOptions=void 0;const c=Object.create(null);e.compatibilityParams=c;{const u=navigator.userAgent||"",s=navigator.platform||"",h=navigator.maxTouchPoints||1,F=/Android/.test(u);(/\b(iPad|iPhone|iPod)(?=;)/.test(u)||"MacIntel"===s&&h>1||F)&&(c.maxCanvasPixels=5242880)}const r={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};e.OptionKind=r;const l={annotationMode:{value:2,kind:r.VIEWER+r.PREFERENCE},cursorToolOnLoad:{value:0,kind:r.VIEWER+r.PREFERENCE},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:r.VIEWER},defaultZoomValue:{value:"",kind:r.VIEWER+r.PREFERENCE},disableHistory:{value:!1,kind:r.VIEWER},disablePageLabels:{value:!1,kind:r.VIEWER+r.PREFERENCE},enablePermissions:{value:!1,kind:r.VIEWER+r.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:r.VIEWER+r.PREFERENCE},enableScripting:{value:!0,kind:r.VIEWER+r.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:r.VIEWER},externalLinkTarget:{value:0,kind:r.VIEWER+r.PREFERENCE},historyUpdateUrl:{value:!1,kind:r.VIEWER+r.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:r.VIEWER+r.PREFERENCE},imageResourcesPath:{value:"./images/",kind:r.VIEWER},maxCanvasPixels:{value:16777216,compatibility:c.maxCanvasPixels,kind:r.VIEWER},pdfBugEnabled:{value:!1,kind:r.VIEWER+r.PREFERENCE},printResolution:{value:150,kind:r.VIEWER},renderer:{value:"canvas",kind:r.VIEWER},sidebarViewOnLoad:{value:-1,kind:r.VIEWER+r.PREFERENCE},scrollModeOnLoad:{value:-1,kind:r.VIEWER+r.PREFERENCE},spreadModeOnLoad:{value:-1,kind:r.VIEWER+r.PREFERENCE},textLayerMode:{value:1,kind:r.VIEWER+r.PREFERENCE},useOnlyCssZoom:{value:!1,kind:r.VIEWER+r.PREFERENCE},viewerCssTheme:{value:0,kind:r.VIEWER+r.PREFERENCE},viewOnLoad:{value:0,kind:r.VIEWER+r.PREFERENCE},cMapPacked:{value:!0,kind:r.API},cMapUrl:{value:"../web/cmaps/",kind:r.API},disableAutoFetch:{value:!1,kind:r.API+r.PREFERENCE},disableFontFace:{value:!1,kind:r.API+r.PREFERENCE},disableRange:{value:!1,kind:r.API+r.PREFERENCE},disableStream:{value:!1,kind:r.API+r.PREFERENCE},docBaseUrl:{value:"",kind:r.API},enableXfa:{value:!0,kind:r.API+r.PREFERENCE},fontExtraProperties:{value:!1,kind:r.API},isEvalSupported:{value:!0,kind:r.API},maxImageSize:{value:-1,kind:r.API},pdfBug:{value:!1,kind:r.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:r.API},verbosity:{value:1,kind:r.API},workerPort:{value:null,kind:r.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:r.WORKER}};l.disablePreferences={value:!1,kind:r.VIEWER},l.locale={value:navigator.language||"en-US",kind:r.VIEWER},l.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:r.VIEWER},l.renderer.kind+=r.PREFERENCE;const f=Object.create(null);e.AppOptions=class{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(s){var P;const h=f[s];if(void 0!==h)return h;const F=l[s];return void 0!==F?null!=(P=F.compatibility)?P:F.value:void 0}static getAll(s=null){var F;const h=Object.create(null);for(const P in l){const m=l[P];if(s){if(0==(s&m.kind))continue;if(s===r.PREFERENCE){const i=m.value,v=typeof i;if("boolean"===v||"string"===v||"number"===v&&Number.isInteger(i)){h[P]=i;continue}throw new Error(`Invalid type for preference: ${P}`)}}const t=f[P];h[P]=void 0!==t?t:null!=(F=m.compatibility)?F:m.value}return h}static set(s,h){f[s]=h}static setAll(s){for(const h in s)f[h]=s[h]}static remove(s){delete f[s]}static _hasUserOptions(){return Object.keys(f).length>0}}},(T,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFRenderingQueue=void 0;var r=c(3),l=c(6);e.PDFRenderingQueue=class{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(s){this.pdfViewer=s}setThumbnailViewer(s){this.pdfThumbnailViewer=s}isHighestPriority(s){return this.highestPriorityPage===s.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(s){var h;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(s)&&(this.isThumbnailViewEnabled&&(null==(h=this.pdfThumbnailViewer)?void 0:h.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(s,h,F,P=!1){const m=s.views,t=m.length;if(0===t)return null;for(let D=0;D<t;D++){const k=m[D].view;if(!this.isViewFinished(k))return k}const i=s.first.id,v=s.last.id;if(v-i+1>t){const D=s.ids;for(let k=1,V=v-i;k<V;k++){const U=F?i+k:v-k;if(D.has(U))continue;const I=h[U-1];if(!this.isViewFinished(I))return I}}let b=F?v:i-2,A=h[b];return A&&!this.isViewFinished(A)||P&&(b+=F?1:-1,A=h[b],A&&!this.isViewFinished(A))?A:null}isViewFinished(s){return s.renderingState===l.RenderingStates.FINISHED}renderView(s){switch(s.renderingState){case l.RenderingStates.FINISHED:return!1;case l.RenderingStates.PAUSED:this.highestPriorityPage=s.renderingId,s.resume();break;case l.RenderingStates.RUNNING:this.highestPriorityPage=s.renderingId;break;case l.RenderingStates.INITIAL:this.highestPriorityPage=s.renderingId,s.draw().finally(()=>{this.renderHighestPriority()}).catch(h=>{h instanceof r.RenderingCancelledException||console.error(`renderView: "${h}"`)})}return!0}}},(T,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextHighlighter=void 0;e.TextHighlighter=class{constructor({findController:l,eventBus:f,pageIndex:E}){this.findController=l,this.matches=[],this.eventBus=f,this.pageIdx=E,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(l,f){this.textDivs=l,this.textContentItemsStr=f}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=l=>{(l.pageIndex===this.pageIdx||-1===l.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){!this.enabled||(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(l,f){if(!l)return[];const{textContentItemsStr:E}=this;let u=0,s=0;const h=E.length-1,F=[];for(let P=0,m=l.length;P<m;P++){let t=l[P];for(;u!==h&&t>=s+E[u].length;)s+=E[u].length,u++;u===E.length&&console.error("Could not find a matching mapping");const i={begin:{divIdx:u,offset:t-s}};for(t+=f[P];u!==h&&t>s+E[u].length;)s+=E[u].length,u++;i.end={divIdx:u,offset:t-s},F.push(i)}return F}_renderMatches(l){if(0===l.length)return;const{findController:f,pageIdx:E}=this,{textContentItemsStr:u,textDivs:s}=this,h=E===f.selected.pageIdx,F=f.selected.matchIdx;let m=null;const t_offset=void 0;function i(D,k){const V=D.divIdx;return s[V].textContent="",v(V,0,D.offset,k)}function v(D,k,V,U){let I=s[D];if(I.nodeType===Node.TEXT_NODE){const L=document.createElement("span");I.parentNode.insertBefore(L,I),L.appendChild(I),s[D]=L,I=L}const O=u[D].substring(k,V),G=document.createTextNode(O);if(U){const L=document.createElement("span");return L.className=`${U} appended`,L.appendChild(G),I.appendChild(L),U.includes("selected")?L.offsetLeft:0}return I.appendChild(G),0}let b=F,A=b+1;if(f.state.highlightAll)b=0,A=l.length;else if(!h)return;for(let D=b;D<A;D++){const k=l[D],V=k.begin,U=k.end,I=h&&D===F,O=I?" selected":"";let G=0;if(m&&V.divIdx===m.divIdx?v(m.divIdx,m.offset,V.offset):(null!==m&&v(m.divIdx,m.offset,t_offset),i(V)),V.divIdx===U.divIdx)G=v(V.divIdx,V.offset,U.offset,"highlight"+O);else{G=v(V.divIdx,V.offset,t_offset,"highlight begin"+O);for(let L=V.divIdx+1,H=U.divIdx;L<H;L++)s[L].className="highlight middle"+O;i(U,"highlight end"+O)}m=U,I&&f.scrollMatchIntoView({element:s[V.divIdx],selectedLeft:G,pageIndex:E,matchIndex:F})}m&&v(m.divIdx,m.offset,t_offset)}_updateMatches(){if(!this.enabled)return;const{findController:l,matches:f,pageIdx:E}=this,{textContentItemsStr:u,textDivs:s}=this;let h=-1;for(let m=0,t=f.length;m<t;m++){const i=f[m];for(let b=Math.max(h,i.begin.divIdx),A=i.end.divIdx;b<=A;b++){const D=s[b];D.textContent=u[b],D.className=""}h=i.end.divIdx+1}(null==l?void 0:l.highlightMatches)&&(this.matches=this._convertMatches(l.pageMatches[E]||null,l.pageMatchesLength[E]||null),this._renderMatches(this.matches))}}},(T,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DownloadManager=void 0;var r=c(3);function l(E,u){const s=document.createElement("a");if(!s.click)throw new Error('DownloadManager: "a.click()" is not supported.');s.href=E,s.target="_parent","download"in s&&(s.download=u),(document.body||document.documentElement).appendChild(s),s.click(),s.remove()}e.DownloadManager=class{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(u,s){(0,r.createValidAbsoluteUrl)(u,"http://example.com")?l(u+"#pdfjs.action=download",s):console.error(`downloadUrl - not a valid URL: ${u}`)}downloadData(u,s,h){l(URL.createObjectURL(new Blob([u],{type:h})),s)}openOrDownloadData(u,s,h){const F=(0,r.isPdfFile)(h),P=F?"application/pdf":"";if(F){let t,m=this._openBlobUrls.get(u);m||(m=URL.createObjectURL(new Blob([s],{type:P})),this._openBlobUrls.set(u,m)),t="?file="+encodeURIComponent(m+"#"+h);try{return window.open(t),!0}catch(i){console.error(`openOrDownloadData: ${i}`),URL.revokeObjectURL(m),this._openBlobUrls.delete(u)}}return this.downloadData(s,h,P),!1}download(u,s,h,F="download"){l(URL.createObjectURL(u),h)}}},(T,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WaitOnType=e.EventBus=e.AutomationEventBus=void 0,e.waitOnEventOrTimeout=function({target:E,name:u,delay:s=0}){return new Promise(function(h,F){if("object"!=typeof E||!u||"string"!=typeof u||!(Number.isInteger(s)&&s>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function P(v){E instanceof l?E._off(u,m):E.removeEventListener(u,m),i&&clearTimeout(i),h(v)}const m=P.bind(null,c.EVENT);E instanceof l?E._on(u,m):E.addEventListener(u,m);const t=P.bind(null,c.TIMEOUT),i=setTimeout(t,s)})};const c={EVENT:"event",TIMEOUT:"timeout"};e.WaitOnType=c;class l{constructor(){this._listeners=Object.create(null)}on(u,s,h=null){this._on(u,s,{external:!0,once:null==h?void 0:h.once})}off(u,s,h=null){this._off(u,s,{external:!0,once:null==h?void 0:h.once})}dispatch(u,s){const h=this._listeners[u];if(!h||0===h.length)return;let F;for(const{listener:P,external:m,once:t}of h.slice(0))t&&this._off(u,P),m?(F||(F=[])).push(P):P(s);if(F){for(const P of F)P(s);F=null}}_on(u,s,h=null){var P;((P=this._listeners)[u]||(P[u]=[])).push({listener:s,external:!0===(null==h?void 0:h.external),once:!0===(null==h?void 0:h.once)})}_off(u,s,h=null){const F=this._listeners[u];if(F)for(let P=0,m=F.length;P<m;P++)if(F[P].listener===s)return void F.splice(P,1)}}e.EventBus=l;e.AutomationEventBus=class extends l{dispatch(u,s){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(T,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GenericL10n=void 0,c(19);var r=c(4);const l=document.webL10n;e.GenericL10n=class{constructor(u){this._lang=u,this._ready=new Promise((s,h)=>{l.setLanguage((0,r.fixupLangCode)(u),()=>{s(l)})})}getLanguage(){var u=this;return _(function*(){return(yield u._ready).getLanguage()})()}getDirection(){var u=this;return _(function*(){return(yield u._ready).getDirection()})()}get(u,s=null,h=(0,r.getL10nFallback)(u,s)){var F=this;return _(function*(){return(yield F._ready).get(u,s,h)})()}translate(u){var s=this;return _(function*(){return(yield s._ready).translate(u)})()}}},()=>{document.webL10n=function(T,e,c){var r={},l="",f="textContent",E="",u={},s="loading";function i(L,H,y){H=H||function(S){},y=y||function(){};var o=new XMLHttpRequest;o.open("GET",L,true),o.overrideMimeType&&o.overrideMimeType("text/plain; charset=utf-8"),o.onreadystatechange=function(){4==o.readyState&&(200==o.status||0===o.status?H(o.responseText):y())},o.onerror=y,o.ontimeout=y;try{o.send(null)}catch(a){y()}}function v(L,H,y,o){var a=L.replace(/[^\/]*$/,"")||"./";function S(x){return x.lastIndexOf("\\")<0?x:x.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}i(L,function(x){l+=x,function(x,n){var C={},w=/^\s*|\s*$/,B=/^\s*#|^\s*$/,p=/^\s*\[(.*)\]\s*$/,j=/^\s*@import\s+url\((.*)\)\s*$/i,X=/^([^=\s]*)\s*=\s*(.+)$/;function W(N,Q,ee){var le=N.replace(w,"").split(/[\r\n]+/),d="*",R=H.split("-",1)[0],Z=!1,z="";!function $(){for(;;){if(!le.length)return void ee();var se=le.shift();if(!B.test(se)){if(Q){if(z=p.exec(se)){d=z[1].toLowerCase(),Z="*"!==d&&d!==H&&d!==R;continue}if(Z)continue;if(z=j.exec(se))return void q(a+z[1],$)}var he=se.match(X);he&&3==he.length&&(C[he[1]]=S(he[2]))}}}()}function q(N,Q){i(N,function(ee){W(ee,!1,Q)},function(){console.warn(N+" not found."),Q()})}W(x,!0,function(){n(C)})}(x,function(n){for(var C in n){var w,B,p=C.lastIndexOf(".");p>0?(w=C.substring(0,p),B=C.substring(p+1)):(w=C,B=f),r[w]||(r[w]={}),r[w][B]=n[C]}y&&y()})},o)}function b(L,H){L&&(L=L.toLowerCase()),H=H||function(){},r={},l="",E="",E=L;var y=e.querySelectorAll('link[type="application/l10n"]'),o=y.length;if(0!==o){var x,n=0;x=function(){++n>=o&&(H(),s="complete")};for(var w=0;w<o;w++)new C(y[w]).load(L,x)}else{var a=function(){var L=e.querySelector('script[type="application/l10n"]');return L?JSON.parse(L.innerHTML):null}();if(a&&a.locales&&a.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(r=a.locales[L])){var S=a.default_locale.toLowerCase();for(var g in a.locales){if((g=g.toLowerCase())===L){r=a.locales[L];break}g===S&&(r=a.locales[S])}}H()}else console.log("no resource to load, early way out");s="complete"}function C(p){var j=p.href;this.load=function(X,W){v(j,X,W,function(){console.warn(j+" not found."),console.warn('"'+X+'" resource not found'),E="",W()})}}}function k(L,H,y){var o=r[L];if(!o){if(console.warn("#"+L+" is undefined."),!y)return null;o=y}var a={};for(var S in o){var g=o[S];g=U(g=V(g,H,L,S),H,L),a[S]=g}return a}function V(L,H,y,o){var S=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(L);if(!S||!S.length)return L;var n,g=S[1],x=S[2];return H&&x in H?n=H[x]:x in r&&(n=r[x]),g in u&&(L=(0,u[g])(L,n,y,o)),L}function U(L,H,y){return L.replace(/\{\{\s*(.+?)\s*\}\}/g,function(a,S){return H&&S in H?H[S]:S in r?r[S]:(console.log("argument {{"+S+"}} for #"+y+" is undefined."),a)})}function I(L){var H=function(L){if(!L)return{};var H=L.getAttribute("data-l10n-id"),y=L.getAttribute("data-l10n-args"),o={};if(y)try{o=JSON.parse(y)}catch(a){console.warn("could not parse arguments for #"+H)}return{id:H,args:o}}(L);if(H.id){var y=k(H.id,H.args);if(!y)return void console.warn("#"+H.id+" is undefined.");if(y[f]){if(0===function(L){if(L.children)return L.children.length;if(void 0!==L.childElementCount)return L.childElementCount;for(var H=0,y=0;y<L.childNodes.length;y++)H+=1===L.nodeType?1:0;return H}(L))L[f]=y[f];else{for(var o=L.childNodes,a=!1,S=0,g=o.length;S<g;S++)3===o[S].nodeType&&/\S/.test(o[S].nodeValue)&&(a?o[S].nodeValue="":(o[S].nodeValue=y[f],a=!0));if(!a){var x=e.createTextNode(y[f]);L.insertBefore(x,L.firstChild)}}delete y[f]}for(var n in y)L[n]=y[n]}}return u.plural=function(L,H,y,o){var a=parseFloat(H);if(isNaN(a)||o!=f)return L;u._pluralRules||(u._pluralRules=function(L){function y(g,x){return-1!==x.indexOf(g)}function o(g,x,n){return x<=g&&g<=n}var a={0:function(g){return"other"},1:function(g){return o(g%100,3,10)?"few":0===g?"zero":o(g%100,11,99)?"many":2==g?"two":1==g?"one":"other"},2:function(g){return 0!==g&&g%10==0?"many":2==g?"two":1==g?"one":"other"},3:function(g){return 1==g?"one":"other"},4:function(g){return o(g,0,1)?"one":"other"},5:function(g){return o(g,0,2)&&2!=g?"one":"other"},6:function(g){return 0===g?"zero":g%10==1&&g%100!=11?"one":"other"},7:function(g){return 2==g?"two":1==g?"one":"other"},8:function(g){return o(g,3,6)?"few":o(g,7,10)?"many":2==g?"two":1==g?"one":"other"},9:function(g){return 0===g||1!=g&&o(g%100,1,19)?"few":1==g?"one":"other"},10:function(g){return o(g%10,2,9)&&!o(g%100,11,19)?"few":g%10!=1||o(g%100,11,19)?"other":"one"},11:function(g){return o(g%10,2,4)&&!o(g%100,12,14)?"few":g%10==0||o(g%10,5,9)||o(g%100,11,14)?"many":g%10==1&&g%100!=11?"one":"other"},12:function(g){return o(g,2,4)?"few":1==g?"one":"other"},13:function(g){return o(g%10,2,4)&&!o(g%100,12,14)?"few":1!=g&&o(g%10,0,1)||o(g%10,5,9)||o(g%100,12,14)?"many":1==g?"one":"other"},14:function(g){return o(g%100,3,4)?"few":g%100==2?"two":g%100==1?"one":"other"},15:function(g){return 0===g||o(g%100,2,10)?"few":o(g%100,11,19)?"many":1==g?"one":"other"},16:function(g){return g%10==1&&11!=g?"one":"other"},17:function(g){return 3==g?"few":0===g?"zero":6==g?"many":2==g?"two":1==g?"one":"other"},18:function(g){return 0===g?"zero":o(g,0,2)&&0!==g&&2!=g?"one":"other"},19:function(g){return o(g,2,10)?"few":o(g,0,1)?"one":"other"},20:function(g){return!o(g%10,3,4)&&g%10!=9||o(g%100,10,19)||o(g%100,70,79)||o(g%100,90,99)?g%1e6==0&&0!==g?"many":g%10!=2||y(g%100,[12,72,92])?g%10!=1||y(g%100,[11,71,91])?"other":"one":"two":"few"},21:function(g){return 0===g?"zero":1==g?"one":"other"},22:function(g){return o(g,0,1)||o(g,11,99)?"one":"other"},23:function(g){return o(g%10,1,2)||g%20==0?"one":"other"},24:function(g){return o(g,3,10)||o(g,13,19)?"few":y(g,[2,12])?"two":y(g,[1,11])?"one":"other"}},S={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[L.replace(/-.*$/,"")];return S in a?a[S]:(console.warn("plural form unknown for ["+L+"]"),function(){return"other"})}(E));var S="["+u._pluralRules(a)+"]";return 0===a&&y+"[zero]"in r?L=r[y+"[zero]"][o]:1==a&&y+"[one]"in r?L=r[y+"[one]"][o]:2==a&&y+"[two]"in r?L=r[y+"[two]"][o]:y+S in r?L=r[y+S][o]:y+"[other]"in r&&(L=r[y+"[other]"][o]),L},{get:function(L,H,y){var S,o=L.lastIndexOf("."),a=f;o>0&&(a=L.substring(o+1),L=L.substring(0,o)),y&&((S={})[a]=y);var g=k(L,H,S);return g&&a in g?g[a]:"{{"+L+"}}"},getData:function(){return r},getText:function(){return l},getLanguage:function(){return E},setLanguage:function(L,H){b(L,function(){H&&H()})},getDirection:function(){var H=E.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(H)>=0?"rtl":"ltr"},translate:function(L){for(var H=function(L){return L?L.querySelectorAll("*[data-l10n-id]"):[]}(L=L||e.documentElement),y=H.length,o=0;o<y;o++)I(H[o]);I(L)},getReadyState:function(){return s},ready:function(L){L&&("complete"==s||"interactive"==s?T.setTimeout(function(){L()}):e.addEventListener&&e.addEventListener("localized",function H(){e.removeEventListener("localized",H),L()}))}}}(window,document)},(T,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFindController=e.FindState=void 0;var r=c(6),l=c(3),f=c(21);const E={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};e.FindState=E;const F={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},P=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),m=[...P.values()].map(U=>String.fromCharCode(U)).join(""),t=/\p{M}+/gu,i=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,v=/([^\p{M}])\p{M}*$/u,b=/^\p{M}*([^\p{M}])/u;let A=null;function D(U){if(!A){const g=Object.keys(F).join("");A=new RegExp(`([${g}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`,"gum")}const I=[];let O;for(;null!==(O=t.exec(U));)I.push([O[0].length,O.index]);let G=U.normalize("NFD");const L=[[0,0]];let H=0,y=0,o=0,a=0,S=!1;return G=G.replace(A,(g,x,n,C,w,B)=>{var p;if(B-=o,x){const j=F[g],X=j.length;for(let W=1;W<X;W++)L.push([B-y+W,y-W]);return y-=X-1,j}if(n){const j=n.endsWith("\n"),X=j?n.length-2:n.length;S=!0;let W=X;B+a===(null==(p=I[H])?void 0:p[1])&&(W-=I[H][0],++H);for(let q=1;q<W+1;q++)L.push([B-1-y+q,y-q]);return y-=W,o+=W,j?(L.push([(B+=X-1)-y+1,1+y]),y+=1,o+=1,a+=1,n.slice(0,X)):n}return C?(L.push([B-y+1,1+y]),y+=1,o+=1,a+=1,C.charAt(0)):(L.push([B-y+1,y-1]),y-=1,o+=1,a+=1," ")}),L.push([G.length,y]),[G,L,S]}function k(U,I,O){if(!U)return[I,O];const G=I,L=I+O;let H=(0,r.binarySearchFirstItem)(U,o=>o[0]>=G);U[H][0]>G&&--H;let y=(0,r.binarySearchFirstItem)(U,o=>o[0]>=L,H);return U[y][0]>L&&--y,[G+U[H][1],O+U[y][1]-U[H][1]]}e.PDFFindController=class{constructor({linkService:I,eventBus:O}){this._linkService=I,this._eventBus=O,this._reset(),O._on("find",this._onFind.bind(this)),O._on("findbarclose",this._onFindBarClose.bind(this)),this.executeCommand=(G,L)=>{console.error('Deprecated method `PDFFindController.executeCommand` called, please dispatch a "find"-event using the EventBus instead.');const H=Object.assign(Object.create(null),L,{type:G.substring("find".length)});this._onFind(H)}}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(I){this._pdfDocument&&this._reset(),I&&(this._pdfDocument=I,this._firstPageCapability.resolve())}_onFind(I){if(!I)return;const O=this._pdfDocument,{type:G}=I;(null===this._state||this._shouldDirtyMatch(I))&&(this._dirtyMatch=!0),this._state=I,"highlightallchange"!==G&&this._updateUIState(E.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||O&&this._pdfDocument!==O)return;this._extractText();const L=!this._highlightMatches,H=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),G?this._dirtyMatch?this._nextMatch():"again"===G?(this._nextMatch(),L&&this._state.highlightAll&&this._updateAllPages()):"highlightallchange"===G?(H?this._nextMatch():this._highlightMatches=!0,this._updateAllPages()):this._nextMatch():this._findTimeout=setTimeout(()=>{this._nextMatch(),this._findTimeout=null},250)})}scrollMatchIntoView({element:I=null,selectedLeft:O=0,pageIndex:G=-1,matchIndex:L=-1}){this._scrollMatches&&I&&-1!==L&&L===this._selected.matchIdx&&-1!==G&&G===this._selected.pageIdx&&(this._scrollMatches=!1,(0,r.scrollIntoView)(I,{top:-50,left:O+-400},!0))}_reset(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,l.createPromiseCapability)()}get _query(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=D(this._state.query)),this._normalizedQuery}_shouldDirtyMatch(I){if(I.query!==this._state.query)return!0;switch(I.type){case"again":const O=this._selected.pageIdx+1,G=this._linkService;return O>=1&&O<=G.pagesCount&&O!==G.page&&!G.isPageVisible(O);case"highlightallchange":return!1}return!0}_isEntireWord(I,O,G){let L=I.slice(0,O).match(v);if(L){const H=I.charCodeAt(O),y=L[1].charCodeAt(0);if((0,f.getCharacterType)(H)===(0,f.getCharacterType)(y))return!1}if(L=I.slice(O+G).match(b),L){const H=I.charCodeAt(O+G-1),y=L[1].charCodeAt(0);if((0,f.getCharacterType)(H)===(0,f.getCharacterType)(y))return!1}return!0}_calculateRegExpMatch(I,O,G,L){const H=[],y=[],o=this._pageDiffs[G];let a;for(;null!==(a=I.exec(L));){if(O&&!this._isEntireWord(L,a.index,a[0].length))continue;const[S,g]=k(o,a.index,a[0].length);g&&(H.push(S),y.push(g))}this._pageMatches[G]=H,this._pageMatchesLength[G]=y}_convertToRegExpString(I,O){const{matchDiacritics:G}=this._state;let L=!1;const H="[ ]*";return(I=I.replace(i,(y,o,a,S,g,x)=>o?`[ ]*\\${o}[ ]*`:a?`[ ]*${a}[ ]*`:S?"[ ]+":G?g||x:g?P.has(g.charCodeAt(0))?g:"":O?(L=!0,`${x}\\p{M}*`):x)).endsWith(H)&&(I=I.slice(0,I.length-H.length)),G&&O&&(L=!0,I=`${I}(?=[${m}]|[^\\p{M}]|$)`),[L,I]}_calculateMatch(I){let O=this._query;if(0===O.length)return;const{caseSensitive:G,entireWord:L,phraseSearch:H}=this._state,y=this._pageContents[I],o=this._hasDiacritics[I];let a=!1;if(H)[a,O]=this._convertToRegExpString(O,o);else{const x=O.match(/\S+/g);x&&(O=x.sort().reverse().map(n=>{const[C,w]=this._convertToRegExpString(n,o);return a||(a=C),`(${w})`}).join("|"))}O=new RegExp(O,`g${a?"u":""}${G?"":"i"}`),this._calculateRegExpMatch(O,L,I,y),this._state.highlightAll&&this._updatePage(I),this._resumePageIdx===I&&(this._resumePageIdx=null,this._nextPageMatch());const g=this._pageMatches[I].length;g>0&&(this._matchesCountTotal+=g,this._updateUIResultsCount())}_extractText(){if(this._extractTextPromises.length>0)return;let I=Promise.resolve();for(let O=0,G=this._linkService.pagesCount;O<G;O++){const L=(0,l.createPromiseCapability)();this._extractTextPromises[O]=L.promise,I=I.then(()=>this._pdfDocument.getPage(O+1).then(H=>H.getTextContent()).then(H=>{const y=H.items,o=[];for(let a=0,S=y.length;a<S;a++)o.push(y[a].str),y[a].hasEOL&&o.push("\n");[this._pageContents[O],this._pageDiffs[O],this._hasDiacritics[O]]=D(o.join("")),L.resolve(O)},H=>{console.error(`Unable to get text content for page ${O+1}`,H),this._pageContents[O]="",this._pageDiffs[O]=null,this._hasDiacritics[O]=!1,L.resolve(O)}))}}_updatePage(I){this._scrollMatches&&this._selected.pageIdx===I&&(this._linkService.page=I+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:I})}_updateAllPages(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}_nextMatch(){const I=this._state.findPrevious,O=this._linkService.page-1,G=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=O,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,this._updateAllPages();for(let H=0;H<G;H++)this._pendingFindMatches.has(H)||(this._pendingFindMatches.add(H),this._extractTextPromises[H].then(y=>{this._pendingFindMatches.delete(y),this._calculateMatch(y)}))}if(""===this._query)return void this._updateUIState(E.FOUND);if(this._resumePageIdx)return;const L=this._offset;if(this._pagesToSearch=G,null!==L.matchIdx){const H=this._pageMatches[L.pageIdx].length;if(!I&&L.matchIdx+1<H||I&&L.matchIdx>0)return L.matchIdx=I?L.matchIdx-1:L.matchIdx+1,void this._updateMatch(!0);this._advanceOffsetPage(I)}this._nextPageMatch()}_matchesReady(I){const O=this._offset,G=I.length,L=this._state.findPrevious;return G?(O.matchIdx=L?G-1:0,this._updateMatch(!0),!0):(this._advanceOffsetPage(L),!!(O.wrapped&&(O.matchIdx=null,this._pagesToSearch<0))&&(this._updateMatch(!1),!0))}_nextPageMatch(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let I=null;do{const O=this._offset.pageIdx;if(I=this._pageMatches[O],!I){this._resumePageIdx=O;break}}while(!this._matchesReady(I))}_advanceOffsetPage(I){const O=this._offset,G=this._linkService.pagesCount;O.pageIdx=I?O.pageIdx-1:O.pageIdx+1,O.matchIdx=null,this._pagesToSearch--,(O.pageIdx>=G||O.pageIdx<0)&&(O.pageIdx=I?G-1:0,O.wrapped=!0)}_updateMatch(I=!1){let O=E.NOT_FOUND;const G=this._offset.wrapped;if(this._offset.wrapped=!1,I){const L=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,O=G?E.WRAPPED:E.FOUND,-1!==L&&L!==this._selected.pageIdx&&this._updatePage(L)}this._updateUIState(O,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this._updatePage(this._selected.pageIdx))}_onFindBarClose(I){const O=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||O&&this._pdfDocument!==O||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this._updateUIState(E.FOUND),this._highlightMatches=!1,this._updateAllPages())})}_requestMatchesCount(){var H;const{pageIdx:I,matchIdx:O}=this._selected;let G=0,L=this._matchesCountTotal;if(-1!==O){for(let y=0;y<I;y++)G+=(null==(H=this._pageMatches[y])?void 0:H.length)||0;G+=O+1}return(G<1||G>L)&&(G=L=0),{current:G,total:L}}_updateUIResultsCount(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this._requestMatchesCount()})}_updateUIState(I,O=!1){var G,L;this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:I,previous:O,matchesCount:this._requestMatchesCount(),rawQuery:null!=(L=null==(G=this._state)?void 0:G.query)?L:null})}}},(T,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterType=void 0,e.getCharacterType=function(i){return function(i){return i<11904}(i)?function(i){return 0==(65408&i)}(i)?function(i){return 32===i||9===i||13===i||10===i}(i)?c.SPACE:function(i){return i>=97&&i<=122||i>=65&&i<=90}(i)||function(i){return i>=48&&i<=57}(i)||95===i?c.ALPHA_LETTER:c.PUNCT:function(i){return 3584==(65408&i)}(i)?c.THAI_LETTER:160===i?c.SPACE:c.ALPHA_LETTER:function(i){return i>=13312&&i<=40959||i>=63744&&i<=64255}(i)?c.HAN_LETTER:function(i){return i>=12448&&i<=12543}(i)?c.KATAKANA_LETTER:function(i){return i>=12352&&i<=12447}(i)?c.HIRAGANA_LETTER:function(i){return i>=65376&&i<=65439}(i)?c.HALFWIDTH_KATAKANA_LETTER:c.ALPHA_LETTER};const c={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};e.CharacterType=c},(T,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFHistory=void 0,e.isDestArraysEqual=P,e.isDestHashesEqual=F;var r=c(6),l=c(17);function s(){return document.location.hash}function F(m,t){return"string"==typeof m&&"string"==typeof t&&(m===t||(0,r.parseQueryString)(m).get("nameddest")===t)}function P(m,t){function i(v,b){if(typeof v!=typeof b||Array.isArray(v)||Array.isArray(b))return!1;if(null!==v&&"object"==typeof v&&null!==b){if(Object.keys(v).length!==Object.keys(b).length)return!1;for(const A in v)if(!i(v[A],b[A]))return!1;return!0}return v===b||Number.isNaN(v)&&Number.isNaN(b)}if(!Array.isArray(m)||!Array.isArray(t)||m.length!==t.length)return!1;for(let v=0,b=m.length;v<b;v++)if(!i(m[v],t[v]))return!1;return!0}e.PDFHistory=class{constructor({linkService:t,eventBus:i}){this.linkService=t,this.eventBus=i,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this._isViewerInPresentationMode=!1,this.eventBus._on("presentationmodechanged",v=>{this._isViewerInPresentationMode=v.state!==r.PresentationModeState.NORMAL}),this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",v=>{this._isPagesLoaded=!!v.pagesCount},{once:!0})})}initialize({fingerprint:t,resetHistory:i=!1,updateUrl:v=!1}){if(!t||"string"!=typeof t)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const b=""!==this._fingerprint&&this._fingerprint!==t;this._fingerprint=t,this._updateUrl=!0===v,this._initialized=!0,this._bindEvents();const A=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=s(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(A,!0)||i){const{hash:k,page:V,rotation:U}=this._parseCurrentHash(!0);return!k||b||i?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:k,page:V,rotation:U},!0)}const D=A.destination;this._updateInternalState(D,A.uid,!0),void 0!==D.rotation&&(this._initialRotation=D.rotation),D.dest?(this._initialBookmark=JSON.stringify(D.dest),this._destination.page=null):D.hash?this._initialBookmark=D.hash:D.page&&(this._initialBookmark=`page=${D.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:t=null,explicitDest:i,pageNumber:v}){if(!this._initialized)return;if(t&&"string"!=typeof t)return void console.error(`PDFHistory.push: "${t}" is not a valid namedDest parameter.`);if(!Array.isArray(i))return void console.error(`PDFHistory.push: "${i}" is not a valid explicitDest parameter.`);if(!this._isValidPage(v)&&(null!==v||this._destination))return void console.error(`PDFHistory.push: "${v}" is not a valid pageNumber parameter.`);const b=t||JSON.stringify(i);if(!b)return;let A=!1;if(this._destination&&(F(this._destination.hash,b)||P(this._destination.dest,i))){if(this._destination.page)return;A=!0}this._popStateInProgress&&!A||(this._pushOrReplaceState({dest:i,hash:b,page:v,rotation:this.linkService.rotation},A),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(t){var i;if(this._initialized){if(!this._isValidPage(t))return void console.error(`PDFHistory.pushPage: "${t}" is not a valid page number.`);(null==(i=this._destination)?void 0:i.page)!==t&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${t}`,page:t,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const t=window.history.state;this._isValidState(t)&&t.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const t=window.history.state;this._isValidState(t)&&t.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(t,i=!1){const v=i||!this._destination,b={fingerprint:this._fingerprint,uid:v?this._uid:this._uid+1,destination:t};let A;if(this._updateInternalState(t,b.uid),this._updateUrl&&(null==t?void 0:t.hash)){const D=document.location.href.split("#")[0];D.startsWith("file://")||(A=`${D}#${t.hash}`)}v?window.history.replaceState(b,"",A):window.history.pushState(b,"",A)}_tryPushCurrentPosition(t=!1){if(!this._position)return;let i=this._position;if(t&&(i=Object.assign(Object.create(null),this._position),i.temporary=!0),!this._destination)return void this._pushOrReplaceState(i);if(this._destination.temporary)return void this._pushOrReplaceState(i,!0);if(this._destination.hash===i.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let v=!1;if(this._destination.page>=i.first&&this._destination.page<=i.page){if(void 0!==this._destination.dest||!this._destination.first)return;v=!0}this._pushOrReplaceState(i,v)}_isValidPage(t){return Number.isInteger(t)&&t>0&&t<=this.linkService.pagesCount}_isValidState(t,i=!1){if(!t)return!1;if(t.fingerprint!==this._fingerprint){if(!i)return!1;{if("string"!=typeof t.fingerprint||t.fingerprint.length!==this._fingerprint.length)return!1;const[v]=performance.getEntriesByType("navigation");if("reload"!==(null==v?void 0:v.type))return!1}}return!(!Number.isInteger(t.uid)||t.uid<0||null===t.destination||"object"!=typeof t.destination)}_updateInternalState(t,i,v=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),v&&(null==t?void 0:t.temporary)&&delete t.temporary,this._destination=t,this._uid=i,this._maxUid=Math.max(this._maxUid,i),this._numPositionUpdates=0}_parseCurrentHash(t=!1){const i=unescape(s()).substring(1),v=(0,r.parseQueryString)(i),b=v.get("nameddest")||"";let A=0|v.get("page");return(!this._isValidPage(A)||t&&b.length>0)&&(A=null),{hash:i,page:A,rotation:this.linkService.rotation}}_updateViewarea({location:t}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:this._isViewerInPresentationMode?`page=${t.pageNumber}`:t.pdfOpenParams.substring(1),page:this.linkService.page,first:t.pageNumber,rotation:t.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:t}){const i=s(),v=this._currentHash!==i;if(this._currentHash=i,!t){this._uid++;const{hash:A,page:D,rotation:k}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:A,page:D,rotation:k},!0)}if(!this._isValidState(t))return;this._popStateInProgress=!0,v&&(this._blockHashChange++,(0,l.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const b=t.destination;this._updateInternalState(b,t.uid,!0),(0,r.isValidRotation)(b.rotation)&&(this.linkService.rotation=b.rotation),b.dest?this.linkService.goToDestination(b.dest):b.hash?this.linkService.setHash(b.hash):b.page&&(this.linkService.page=b.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){!this._boundEvents||(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(T,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFScriptingManager=void 0;var r=c(6),l=c(3);e.PDFScriptingManager=class{constructor({eventBus:u,sandboxBundleSrc:s=null,scriptingFactory:h=null,docPropertiesLookup:F=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=u,this._sandboxBundleSrc=s,this._scriptingFactory=h,this._docPropertiesLookup=F,this._scriptingFactory||window.addEventListener("updatefromsandbox",P=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:P.detail})})}setViewer(u){this._pdfViewer=u}setDocument(u){var s=this;return _(function*(){var m;if(s._pdfDocument&&(yield s._destroyScripting()),s._pdfDocument=u,!u)return;const[h,F,P]=yield Promise.all([u.getFieldObjects(),u.getCalculationOrderIds(),u.getJSActions()]);if(h||P){if(u===s._pdfDocument){try{s._scripting=s._createScripting()}catch(t){return console.error(`PDFScriptingManager.setDocument: "${null==t?void 0:t.message}".`),void(yield s._destroyScripting())}s._internalEvents.set("updatefromsandbox",t=>{(null==t?void 0:t.source)===window&&s._updateFromSandbox(t.detail)}),s._internalEvents.set("dispatcheventinsandbox",t=>{var i;null==(i=s._scripting)||i.dispatchEventInSandbox(t.detail)}),s._internalEvents.set("pagechanging",({pageNumber:t,previous:i})=>{t!==i&&(s._dispatchPageClose(i),s._dispatchPageOpen(t))}),s._internalEvents.set("pagerendered",({pageNumber:t})=>{!s._pageOpenPending.has(t)||t===s._pdfViewer.currentPageNumber&&s._dispatchPageOpen(t)}),s._internalEvents.set("pagesdestroy",function(){var t=_(function*(i){var v,b;yield s._dispatchPageClose(s._pdfViewer.currentPageNumber),yield null==(v=s._scripting)?void 0:v.dispatchEventInSandbox({id:"doc",name:"WillClose"}),null==(b=s._closeCapability)||b.resolve()});return function(i){return t.apply(this,arguments)}}()),s._domEvents.set("mousedown",t=>{s._mouseState.isDown=!0}),s._domEvents.set("mouseup",t=>{s._mouseState.isDown=!1});for(const[t,i]of s._internalEvents)s._eventBus._on(t,i);for(const[t,i]of s._domEvents)window.addEventListener(t,i);try{const t=yield s._getDocProperties();if(u!==s._pdfDocument)return;yield s._scripting.createSandbox({objects:h,calculationOrder:F,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:$e(Xe({},t),{actions:P})}),s._eventBus.dispatch("sandboxcreated",{source:s})}catch(t){return console.error(`PDFScriptingManager.setDocument: "${null==t?void 0:t.message}".`),void(yield s._destroyScripting())}yield null==(m=s._scripting)?void 0:m.dispatchEventInSandbox({id:"doc",name:"Open"}),yield s._dispatchPageOpen(s._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{u===s._pdfDocument&&(s._ready=!0)})}}else yield s._destroyScripting()})()}dispatchWillSave(u){var s=this;return _(function*(){var h;return null==(h=s._scripting)?void 0:h.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(u){var s=this;return _(function*(){var h;return null==(h=s._scripting)?void 0:h.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(u){var s=this;return _(function*(){var h;return null==(h=s._scripting)?void 0:h.dispatchEventInSandbox({id:"doc",name:"WillPrint"})})()}dispatchDidPrint(u){var s=this;return _(function*(){var h;return null==(h=s._scripting)?void 0:h.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get mouseState(){return this._mouseState}get destroyPromise(){var u;return(null==(u=this._destroyCapability)?void 0:u.promise)||null}get ready(){return this._ready}get _internalEvents(){return(0,l.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,l.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,l.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,l.shadow)(this,"_visitedPages",new Map)}_updateFromSandbox(u){var s=this;return _(function*(){var v;const h=s._pdfViewer.isInPresentationMode||s._pdfViewer.isChangingPresentationMode,{id:F,siblings:P,command:m,value:t}=u;if(!F){switch(m){case"clear":console.clear();break;case"error":console.error(t);break;case"layout":if(h)return;const b=(0,r.apiPageLayoutToViewerModes)(t);s._pdfViewer.spreadMode=b.spreadMode;break;case"page-num":s._pdfViewer.currentPageNumber=t+1;break;case"print":yield s._pdfViewer.pagesPromise,s._eventBus.dispatch("print",{source:s});break;case"println":console.log(t);break;case"zoom":if(h)return;s._pdfViewer.currentScaleValue=t;break;case"SaveAs":s._eventBus.dispatch("save",{source:s});break;case"FirstPage":s._pdfViewer.currentPageNumber=1;break;case"LastPage":s._pdfViewer.currentPageNumber=s._pdfViewer.pagesCount;break;case"NextPage":s._pdfViewer.nextPage();break;case"PrevPage":s._pdfViewer.previousPage();break;case"ZoomViewIn":if(h)return;s._pdfViewer.increaseScale();break;case"ZoomViewOut":if(h)return;s._pdfViewer.decreaseScale()}return}if(h&&u.focus)return;delete u.id,delete u.siblings;const i=P?[F,...P]:[F];for(const b of i){const A=document.getElementById(b);A?A.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:u})):null==(v=s._pdfDocument)||v.annotationStorage.setValue(b,u)}})()}_dispatchPageOpen(u,s=!1){var h=this;return _(function*(){const F=h._pdfDocument,P=h._visitedPages;if(s&&(h._closeCapability=(0,l.createPromiseCapability)()),!h._closeCapability)return;const m=h._pdfViewer.getPageView(u-1);if((null==m?void 0:m.renderingState)!==r.RenderingStates.FINISHED)return void h._pageOpenPending.add(u);h._pageOpenPending.delete(u);const t=_(function*(){var v,b;const i=yield P.has(u)?null:null==(v=m.pdfPage)?void 0:v.getJSActions();F===h._pdfDocument&&(yield null==(b=h._scripting)?void 0:b.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:u,actions:i}))})();P.set(u,t)})()}_dispatchPageClose(u){var s=this;return _(function*(){var m;const h=s._pdfDocument,F=s._visitedPages;if(!s._closeCapability||s._pageOpenPending.has(u))return;const P=F.get(u);!P||(F.set(u,null),yield P,h===s._pdfDocument&&(yield null==(m=s._scripting)?void 0:m.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:u})))})()}_getDocProperties(){var u=this;return _(function*(){if(u._docPropertiesLookup)return u._docPropertiesLookup(u._pdfDocument);const{docPropertiesLookup:s}=c(24);return s(u._pdfDocument)})()}_createScripting(){if(this._destroyCapability=(0,l.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:u}=c(24);return new u(this._sandboxBundleSrc)}_destroyScripting(){var u=this;return _(function*(){var s,h;if(!u._scripting)return u._pdfDocument=null,void(null==(s=u._destroyCapability)||s.resolve());u._closeCapability&&(yield Promise.race([u._closeCapability.promise,new Promise(F=>{setTimeout(F,1e3)})]).catch(F=>{}),u._closeCapability=null),u._pdfDocument=null;try{yield u._scripting.destroySandbox()}catch(F){}for(const[F,P]of u._internalEvents)u._eventBus._off(F,P);u._internalEvents.clear();for(const[F,P]of u._domEvents)window.removeEventListener(F,P);u._domEvents.clear(),u._pageOpenPending.clear(),u._visitedPages.clear(),u._scripting=null,delete u._mouseState.isDown,u._ready=!1,null==(h=u._destroyCapability)||h.resolve()})()}}},(T,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GenericScripting=void 0,e.docPropertiesLookup=function(u){return f.apply(this,arguments)};var r=c(3);function f(){return(f=_(function*(u){const h="".split("#")[0];let{info:F,metadata:P,contentDispositionFilename:m,contentLength:t}=yield u.getMetadata();if(!t){const{length:i}=yield u.getDownloadInfo();t=i}return $e(Xe({},F),{baseURL:h,filesize:t,filename:m||(0,r.getPdfFilenameFromUrl)(""),metadata:null==P?void 0:P.getRaw(),authors:null==P?void 0:P.get("dc:creator"),numPages:u.numPages,URL:""})})).apply(this,arguments)}e.GenericScripting=class{constructor(s){this._ready=(0,r.loadScript)(s,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(s){var h=this;return _(function*(){(yield h._ready).create(s)})()}dispatchEventInSandbox(s){var h=this;return _(function*(){const F=yield h._ready;setTimeout(()=>F.dispatchEvent(s),0)})()}destroySandbox(){var s=this;return _(function*(){(yield s._ready).nukeSandbox()})()}}}],ne={};function re(T){var e=ne[T];if(void 0!==e)return e.exports;var c=ne[T]={exports:{}};return ae[T](c,c.exports,re),c.exports}var te={};return(()=>{var T=te;Object.defineProperty(T,"__esModule",{value:!0}),Object.defineProperty(T,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return f.AnnotationLayerBuilder}}),Object.defineProperty(T,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return e.DefaultAnnotationLayerFactory}}),Object.defineProperty(T,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return e.DefaultStructTreeLayerFactory}}),Object.defineProperty(T,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return e.DefaultTextLayerFactory}}),Object.defineProperty(T,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return e.DefaultXfaLayerFactory}}),Object.defineProperty(T,"DownloadManager",{enumerable:!0,get:function(){return E.DownloadManager}}),Object.defineProperty(T,"EventBus",{enumerable:!0,get:function(){return u.EventBus}}),Object.defineProperty(T,"GenericL10n",{enumerable:!0,get:function(){return s.GenericL10n}}),Object.defineProperty(T,"LinkTarget",{enumerable:!0,get:function(){return c.LinkTarget}}),Object.defineProperty(T,"NullL10n",{enumerable:!0,get:function(){return h.NullL10n}}),Object.defineProperty(T,"PDFFindController",{enumerable:!0,get:function(){return F.PDFFindController}}),Object.defineProperty(T,"PDFHistory",{enumerable:!0,get:function(){return P.PDFHistory}}),Object.defineProperty(T,"PDFLinkService",{enumerable:!0,get:function(){return c.PDFLinkService}}),Object.defineProperty(T,"PDFPageView",{enumerable:!0,get:function(){return m.PDFPageView}}),Object.defineProperty(T,"PDFScriptingManager",{enumerable:!0,get:function(){return t.PDFScriptingManager}}),Object.defineProperty(T,"PDFSinglePageViewer",{enumerable:!0,get:function(){return l.PDFSinglePageViewer}}),Object.defineProperty(T,"PDFViewer",{enumerable:!0,get:function(){return l.PDFViewer}}),Object.defineProperty(T,"ProgressBar",{enumerable:!0,get:function(){return r.ProgressBar}}),Object.defineProperty(T,"SimpleLinkService",{enumerable:!0,get:function(){return c.SimpleLinkService}}),Object.defineProperty(T,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return i.StructTreeLayerBuilder}}),Object.defineProperty(T,"TextLayerBuilder",{enumerable:!0,get:function(){return v.TextLayerBuilder}}),Object.defineProperty(T,"XfaLayerBuilder",{enumerable:!0,get:function(){return b.XfaLayerBuilder}}),Object.defineProperty(T,"parseQueryString",{enumerable:!0,get:function(){return r.parseQueryString}});var e=re(1),c=re(5),r=re(6),l=re(10),f=re(2),E=re(16),u=re(17),s=re(18),h=re(4),F=re(20),P=re(22),m=re(12),t=re(23),i=re(7),v=re(8),b=re(9)})(),te})()},8926:oe=>{function M(_,ae,ne,re,te,T,e){try{var c=_[T](e),r=c.value}catch(l){return void ne(l)}c.done?ae(r):Promise.resolve(r).then(re,te)}oe.exports=function(_){return function(){var ae=this,ne=arguments;return new Promise(function(re,te){var T=_.apply(ae,ne);function e(r){M(T,re,te,e,c,"next",r)}function c(r){M(T,re,te,e,c,"throw",r)}e(void 0)})}},oe.exports.default=oe.exports,oe.exports.__esModule=!0},3414:()=>{},172:()=>{},2001:()=>{},3779:()=>{},6558:()=>{},2258:()=>{}}]);