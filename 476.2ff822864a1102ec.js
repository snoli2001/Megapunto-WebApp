"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[476],{2312:(w,C,i)=>{i.r(C),i.d(C,{AuthSignUpModule:()=>de,MY_FORMATS:()=>q});var y=i(4521),T=i(7423),b=i(7446),Z=i(7322),x=i(5245),I=i(7531),v=i(773),S=i(6236),F=i(7775),J=i(2927),m=i(3075),h=i(8288),e=i(5e3),s=i(8951),a=i(9808),d=i(2340),c=i(520);let p=(()=>{class t{constructor(o){this._httpClient=o}getDocumentIdSelection(){return this._httpClient.post(`${d.N.API_URL}/Tipo_Doc_Identidad/sel`,{})}getLineOfBusinessSelection(){return this._httpClient.post(`${d.N.API_URL}/Grupo_Giro_Negocio/sel`,{})}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(c.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var _=i(4107),u=i(6856),l=i(508),f=i(2494);function A(t,r){if(1&t&&(e.TgZ(0,"fuse-alert",28),e._uU(1),e.qZA()),2&t){const o=e.oxw();e.Q6J("appearance","outline")("showIcon",!1)("type",o.alert.type)("@shake","error"===o.alert.type),e.xp6(1),e.hij(" ",o.alert.message,"\n")}}function Q(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Ingrese su nombre "),e.qZA())}function E(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Ingrese su correo electr\xf3nico "),e.qZA())}function Y(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Ingrese un correo electr\xf3nico v\xe1lido "),e.qZA())}function D(t,r){1&t&&e._UZ(0,"mat-icon",29),2&t&&e.Q6J("svgIcon","heroicons_solid:eye")}function M(t,r){1&t&&e._UZ(0,"mat-icon",29),2&t&&e.Q6J("svgIcon","heroicons_solid:eye-off")}function O(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Ingrese n\xfamero de celular "),e.qZA())}function B(t,r){if(1&t&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.Q6J("value",o.nu_id_tipo_doc_identidad),e.xp6(1),e.hij(" ",o.vc_desc_tipo_doc_identidad," ")}}function P(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Seleccione el tipo de documento "),e.qZA())}function L(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Ingrese el n\xfamero de documento "),e.qZA())}function k(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Seleccione su fecha de nacimiento "),e.qZA())}function V(t,r){if(1&t&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.Q6J("value",o.nu_id_grupo_giro_negocio),e.xp6(1),e.Oqu(o.vc_desc_grupo_giro_negocio)}}function G(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Seleccione el giro de su negocio "),e.qZA())}function j(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Ingrese el tipo de comprobante "),e.qZA())}function $(t,r){1&t&&(e.TgZ(0,"span"),e._uU(1," Siguiente "),e.qZA())}function R(t,r){1&t&&e._UZ(0,"mat-progress-spinner",31),2&t&&e.Q6J("diameter",24)("mode","indeterminate")}let W=(()=>{class t{constructor(o,n){this.rootFormGroup=o,this._dropdownService=n,this.alert={type:"success",message:""},this.showAlert=!1,this.today=new Date}ngOnInit(){this.personalInformationForm=this.rootFormGroup.control,this.getDocumentIdSelection(),this.getLineOfBusinessSelection()}nextStep(){this.personalInformationForm.controls.personalInformation.valid&&this.personalInformationForm.get("step").setValue(2)}getDocumentIdSelection(){this.documentIdTypes$=this._dropdownService.getDocumentIdSelection()}getLineOfBusinessSelection(){this.lineOfBusinesses$=this._dropdownService.getLineOfBusinessSelection()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(m.sg),e.Y36(p))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-personal-information"]],decls:54,vars:36,consts:[[1,"mt-8","text-2xl","font-extrabold","tracking-tight","leading-tight"],["class","mt-8 -mb-4",3,"appearance","showIcon","type",4,"ngIf"],[1,"mt-8",3,"formGroup"],["formGroupName","personalInformation"],[1,"w-full"],["id","name","matInput","","placeholder","Nombre",3,"formControlName"],[4,"ngIf"],["id","email","matInput","","placeholder","Correo electr\xf3nico",3,"formControlName"],["id","password","matInput","","type","password","placeholder","Contrase\xf1a",3,"formControlName"],["passwordField",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],["id","cellphone","matInput","","placeholder","N\xfamero de celular",3,"formControlName"],["id","telephone","matInput","","placeholder","Tel\xe9fono fijo",3,"formControlName"],[1,"grid","grid-cols-1","md:grid-cols-2"],[1,"md:mr-1"],["id","documentType","placeholder","Documento",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[1,"md:ml-2"],["id","documentNumber","matInput","","placeholder","Nro de documento",3,"formControlName"],["id","birthDate","matInput","","placeholder","Fecha de nacimiento",3,"formControlName","matDatepicker","max"],["matSuffix","",3,"for"],["picker",""],["id","businessLine","placeholder","Giro de tu negocio",3,"formControlName"],["id","billType","placeholder","Tipo de comprobante",3,"formControlName"],[1,"flex","justify-end"],["mat-flat-button","",1,"fuse-mat-button-large","w-full","md:w-1/3","mt-6",3,"color","disabled","click"],[3,"diameter","mode",4,"ngIf"],[1,"mt-8","-mb-4",3,"appearance","showIcon","type"],[1,"icon-size-5",3,"svgIcon"],[3,"value"],[3,"diameter","mode"]],template:function(o,n){if(1&o){const g=e.EpF();e.TgZ(0,"div",0),e._uU(1," Datos para afiliarme\n"),e.qZA(),e.YNc(2,A,2,5,"fuse-alert",1),e.TgZ(3,"form",2),e.TgZ(4,"div",3),e.TgZ(5,"mat-form-field",4),e._UZ(6,"input",5),e.YNc(7,Q,2,0,"mat-error",6),e.qZA(),e.TgZ(8,"mat-form-field",4),e._UZ(9,"input",7),e.YNc(10,E,2,0,"mat-error",6),e.YNc(11,Y,2,0,"mat-error",6),e.qZA(),e.TgZ(12,"mat-form-field",4),e._UZ(13,"input",8,9),e.TgZ(15,"button",10),e.NdJ("click",function(){e.CHM(g);const N=e.MAs(14);return N.type="password"===N.type?"text":"password"}),e.YNc(16,D,1,1,"mat-icon",11),e.YNc(17,M,1,1,"mat-icon",11),e.qZA(),e.TgZ(18,"mat-error"),e._uU(19," Ingrese su contrase\xf1a "),e.qZA(),e.qZA(),e.TgZ(20,"mat-form-field",4),e._UZ(21,"input",12),e.YNc(22,O,2,0,"mat-error",6),e.qZA(),e.TgZ(23,"mat-form-field",4),e._UZ(24,"input",13),e.qZA(),e.TgZ(25,"div",14),e.TgZ(26,"mat-form-field",15),e.TgZ(27,"mat-select",16),e.YNc(28,B,2,2,"mat-option",17),e.ALo(29,"async"),e.qZA(),e.YNc(30,P,2,0,"mat-error",6),e.qZA(),e.TgZ(31,"mat-form-field",18),e._UZ(32,"input",19),e.YNc(33,L,2,0,"mat-error",6),e.qZA(),e.qZA(),e.TgZ(34,"mat-form-field",4),e._UZ(35,"input",20),e._UZ(36,"mat-datepicker-toggle",21),e._UZ(37,"mat-datepicker",null,22),e.YNc(39,k,2,0,"mat-error",6),e.qZA(),e.TgZ(40,"mat-form-field",4),e.TgZ(41,"mat-select",23),e.YNc(42,V,2,2,"mat-option",17),e.ALo(43,"async"),e.qZA(),e.YNc(44,G,2,0,"mat-error",6),e.qZA(),e.TgZ(45,"mat-form-field",4),e.TgZ(46,"mat-select",24),e.TgZ(47,"mat-option"),e._uU(48,"---"),e.qZA(),e.qZA(),e.YNc(49,j,2,0,"mat-error",6),e.qZA(),e.TgZ(50,"div",25),e.TgZ(51,"button",26),e.NdJ("click",function(){return n.nextStep()}),e.YNc(52,$,2,0,"span",6),e.YNc(53,R,1,2,"mat-progress-spinner",27),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const g=e.MAs(14),U=e.MAs(38);e.xp6(2),e.Q6J("ngIf",n.showAlert),e.xp6(1),e.Q6J("formGroup",n.personalInformationForm),e.xp6(3),e.Q6J("formControlName","name"),e.xp6(1),e.Q6J("ngIf",n.personalInformationForm.get("personalInformation").get("name").hasError("required")),e.xp6(2),e.Q6J("formControlName","email"),e.xp6(1),e.Q6J("ngIf",n.personalInformationForm.get("personalInformation").get("email").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.personalInformationForm.get("personalInformation").get("email").hasError("email")),e.xp6(2),e.Q6J("formControlName","password"),e.xp6(3),e.Q6J("ngIf","password"===g.type),e.xp6(1),e.Q6J("ngIf","text"===g.type),e.xp6(4),e.Q6J("formControlName","cellphone"),e.xp6(1),e.Q6J("ngIf",n.personalInformationForm.get("personalInformation").get("cellphone").hasError("required")),e.xp6(2),e.Q6J("formControlName","telephone"),e.xp6(3),e.Q6J("formControlName","documentType"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(29,32,n.documentIdTypes$)),e.xp6(2),e.Q6J("ngIf",n.personalInformationForm.get("personalInformation").get("documentType").hasError("required")),e.xp6(2),e.Q6J("formControlName","documentNumber"),e.xp6(1),e.Q6J("ngIf",n.personalInformationForm.get("personalInformation").get("documentNumber").hasError("required")),e.xp6(2),e.Q6J("formControlName","birthDate")("matDatepicker",U)("max",n.today),e.xp6(1),e.Q6J("for",U),e.xp6(3),e.Q6J("ngIf",n.personalInformationForm.get("personalInformation").get("birthDate").hasError("required")),e.xp6(2),e.Q6J("formControlName","businessLine"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(43,34,n.lineOfBusinesses$)),e.xp6(2),e.Q6J("ngIf",n.personalInformationForm.get("personalInformation").get("businessLine").hasError("required")),e.xp6(2),e.Q6J("formControlName","billType"),e.xp6(3),e.Q6J("ngIf",n.personalInformationForm.get("personalInformation").get("billType").hasError("required")),e.xp6(2),e.Q6J("color","primary")("disabled",n.personalInformationForm.disabled),e.xp6(1),e.Q6J("ngIf",!n.personalInformationForm.disabled),e.xp6(1),e.Q6J("ngIf",n.personalInformationForm.disabled)}},directives:[a.O5,m._Y,m.JL,m.sg,m.x0,Z.KE,I.Nt,m.Fj,m.JJ,m.u,T.lW,Z.R9,Z.TO,_.gD,a.sg,u.hl,u.nW,u.Mq,l.ey,f.W,x.Hw,v.Ou],pipes:[a.Ov],styles:[""]}),t})();function z(t,r){if(1&t&&(e.TgZ(0,"fuse-alert",21),e._uU(1),e.qZA()),2&t){const o=e.oxw();e.Q6J("appearance","outline")("showIcon",!1)("type",o.alert.type)("@shake","error"===o.alert.type),e.xp6(1),e.hij(" ",o.alert.message,"\n")}}function H(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Ingrese su direcci\xf3n "),e.qZA())}function K(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Seleccione el centro poblado "),e.qZA())}function X(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Seleccione el departamento "),e.qZA())}function ee(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Seleccione la provincia "),e.qZA())}function te(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Seleccione el distrito "),e.qZA())}function oe(t,r){1&t&&(e.TgZ(0,"span"),e._uU(1," Anterior "),e.qZA())}function ne(t,r){1&t&&e._UZ(0,"mat-progress-spinner",22),2&t&&e.Q6J("diameter",24)("mode","indeterminate")}function re(t,r){1&t&&(e.TgZ(0,"span"),e._uU(1," Afiliarme "),e.qZA())}function se(t,r){1&t&&e._UZ(0,"mat-progress-spinner",22),2&t&&e.Q6J("diameter",24)("mode","indeterminate")}let ie=(()=>{class t{constructor(o){this.rootFormGroup=o,this.alert={type:"success",message:""},this.showAlert=!1}ngOnInit(){this.businessAddressForm=this.rootFormGroup.control}prevStep(){this.businessAddressForm.get("step").setValue(1)}nextStep(){this.businessAddressForm.controls.businessAddress.valid&&console.log("afilarme")}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(m.sg))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-business-address"]],decls:36,vars:22,consts:[[1,"mt-8","text-2xl","font-extrabold","tracking-tight","leading-tight"],["class","mt-8 -mb-4",3,"appearance","showIcon","type",4,"ngIf"],[1,"mt-8",3,"formGroup"],["formGroupName","businessAddress"],[1,"w-full","mb-2"],[1,"w-full"],["id","address","matInput","","placeholder","Direcci\xf3n",3,"formControlName"],[4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2"],[1,"md:mr-1"],["id","village","matInput","","placeholder","Centro poblado",3,"formControlName"],[1,"md:ml-2"],["id","region","matInput","","placeholder","Departamento",3,"formControlName"],["id","city","matInput","","placeholder","Provincia",3,"formControlName"],["id","district","matInput","","placeholder","Distrito",3,"formControlName"],[1,"inline-flex","items-end","justify-between","w-full","mt-1.5"],[3,"color","formControlName"],[1,"underline"],[1,"flex","justify-between"],["mat-flat-button","",1,"fuse-mat-button-large","w-full","md:w-1/3","mt-6",3,"color","disabled","click"],[3,"diameter","mode",4,"ngIf"],[1,"mt-8","-mb-4",3,"appearance","showIcon","type"],[3,"diameter","mode"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0),e._uU(1," Agregar direcci\xf3n del comercio\n"),e.qZA(),e.YNc(2,z,2,5,"fuse-alert",1),e.TgZ(3,"form",2),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"span"),e._uU(7,"Ubica tu direcci\xf3n en el mapa con el pin"),e.qZA(),e.qZA(),e.TgZ(8,"mat-form-field",5),e._UZ(9,"input",6),e.YNc(10,H,2,0,"mat-error",7),e.qZA(),e.TgZ(11,"div",8),e.TgZ(12,"mat-form-field",9),e._UZ(13,"input",10),e.YNc(14,K,2,0,"mat-error",7),e.qZA(),e.TgZ(15,"mat-form-field",11),e._UZ(16,"input",12),e.YNc(17,X,2,0,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(18,"div",8),e.TgZ(19,"mat-form-field",9),e._UZ(20,"input",13),e.YNc(21,ee,2,0,"mat-error",7),e.qZA(),e.TgZ(22,"mat-form-field",11),e._UZ(23,"input",14),e.YNc(24,te,2,0,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(25,"div",15),e.TgZ(26,"mat-checkbox",16),e.TgZ(27,"a",17),e._uU(28," Acepto los t\xe9rminos y condiciones "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",18),e.TgZ(30,"button",19),e.NdJ("click",function(){return n.prevStep()}),e.YNc(31,oe,2,0,"span",7),e.YNc(32,ne,1,2,"mat-progress-spinner",20),e.qZA(),e.TgZ(33,"button",19),e.NdJ("click",function(){return n.nextStep()}),e.YNc(34,re,2,0,"span",7),e.YNc(35,se,1,2,"mat-progress-spinner",20),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(2),e.Q6J("ngIf",n.showAlert),e.xp6(1),e.Q6J("formGroup",n.businessAddressForm),e.xp6(6),e.Q6J("formControlName","address"),e.xp6(1),e.Q6J("ngIf",n.businessAddressForm.get("businessAddress").get("address").hasError("required")),e.xp6(3),e.Q6J("formControlName","village"),e.xp6(1),e.Q6J("ngIf",n.businessAddressForm.get("businessAddress").get("village").hasError("required")),e.xp6(2),e.Q6J("formControlName","region"),e.xp6(1),e.Q6J("ngIf",n.businessAddressForm.get("businessAddress").get("region").hasError("required")),e.xp6(3),e.Q6J("formControlName","city"),e.xp6(1),e.Q6J("ngIf",n.businessAddressForm.get("businessAddress").get("city").hasError("required")),e.xp6(2),e.Q6J("formControlName","district"),e.xp6(1),e.Q6J("ngIf",n.businessAddressForm.get("businessAddress").get("district").hasError("required")),e.xp6(2),e.Q6J("color","primary")("formControlName","agreements"),e.xp6(4),e.Q6J("color","secondary")("disabled",n.businessAddressForm.disabled),e.xp6(1),e.Q6J("ngIf",!n.businessAddressForm.disabled),e.xp6(1),e.Q6J("ngIf",n.businessAddressForm.disabled),e.xp6(1),e.Q6J("color","primary")("disabled",n.businessAddressForm.disabled),e.xp6(1),e.Q6J("ngIf",!n.businessAddressForm.disabled),e.xp6(1),e.Q6J("ngIf",n.businessAddressForm.disabled))},directives:[a.O5,m._Y,m.JL,m.sg,m.x0,Z.KE,I.Nt,m.Fj,m.JJ,m.u,b.oG,T.lW,f.W,Z.TO,v.Ou],styles:[""]}),t})();const ae=["signUpNgForm"];function me(t,r){1&t&&e._UZ(0,"app-personal-information")}function le(t,r){1&t&&e._UZ(0,"app-business-address")}const pe=[{path:"",component:(()=>{class t{constructor(o,n,g){this._authService=o,this._formBuilder=n,this._router=g,this.alert={type:"success",message:""},this.showAlert=!1}ngOnInit(){this.signUpForm=this._formBuilder.group({personalInformation:this._formBuilder.group({name:[""],email:["",[,m.kI.email]],password:[""],cellphone:[""],telephone:[""],documentType:[""],documentNumber:[""],birthDate:[""],businessLine:[""],billType:[""]}),businessAddress:this._formBuilder.group({address:[""],village:[""],region:[""],city:[""],district:[""],agreements:[""]}),step:[1]})}signUp(){this.signUpForm.invalid||(this.signUpForm.disable(),this.showAlert=!1,this._authService.signUp(this.signUpForm.value).subscribe(o=>{this._router.navigateByUrl("/confirmation-required")},o=>{this.signUpForm.enable(),this.signUpNgForm.resetForm(),this.alert={type:"error",message:"Something went wrong, please try again."},this.showAlert=!0}))}signIn(){this._router.navigate(["sign-in"])}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(s.e),e.Y36(m.qu),e.Y36(y.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["auth-sign-up"]],viewQuery:function(o,n){if(1&o&&e.Gf(ae,5),2&o){let g;e.iGM(g=e.CRH())&&(n.signUpNgForm=g.first)}},decls:16,vars:3,consts:[[1,"bg-card","flex","items-center","justify-center","sm:bg-primary","p-0","sm:py-18","sm:px-9","md:px-36","md:py-20","flex-auto","w-full"],[1,"rounded-2xl","bg-card","items-center","md:items-start","sm:justify-center","md:justify-start","p-4","md:p-14","lg:p-20","w-2/3"],[1,"grid","grid-cols-1","w-full","sm:w-auto"],[1,"block"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","text-primary","cursor-pointer",3,"click"],["svgIcon","heroicons_outline:chevron-left"],[1,"flex","items-center"],["src","assets/images/logo/mipmap-xhdpi/ic_launcher.png",1,"w-12"],[1,"ml-1.5","hidden","sm:inline-block","font-bold","text-xl","tracking-wide"],[1,"max-w-100","sm:w-60","md:w-90","mx-auto","md:items-center","justify-center"],[3,"formGroup"],[4,"ngIf"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"a",5),e.NdJ("click",function(){return n.signIn()}),e._UZ(6,"mat-icon",6),e._uU(7," Ir a inicio de sesi\xf3n "),e.qZA(),e.TgZ(8,"div",7),e._UZ(9,"img",8),e.TgZ(10,"span",9),e._uU(11,"megapunto"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",10),e.TgZ(13,"form",11),e.YNc(14,me,1,0,"app-personal-information",12),e.YNc(15,le,1,0,"app-business-address",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(13),e.Q6J("formGroup",n.signUpForm),e.xp6(1),e.Q6J("ngIf",1===n.signUpForm.get("step").value),e.xp6(1),e.Q6J("ngIf",2===n.signUpForm.get("step").value))},directives:[x.Hw,m._Y,m.JL,m.sg,a.O5,W,ie],encapsulation:2,data:{animation:h.L}}),t})()}];var ce=i(3170);const q={parse:{dateInput:"DD/MM/YYYY"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"MMMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MM YYYY"}};let de=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[{provide:l.sG,useValue:q},{provide:l.Ad,useValue:"es-ES"}],imports:[[y.Bz.forChild(pe),T.ot,b.p9,Z.lN,x.Ps,I.c,_.LD,u.FA,ce.Yd,v.Cq,S.J,F.fC,J.m]]}),t})()},449:(w,C,i)=>{i.d(C,{Ov:()=>S,yy:()=>I,eX:()=>v,k:()=>m,Z9:()=>Z});var y=i(7579),T=i(5e3);function Z(h){return h&&"function"==typeof h.connect}class I{applyChanges(e,s,a,d,c){e.forEachOperation((p,_,u)=>{let l,f;if(null==p.previousIndex){const A=a(p,_,u);l=s.createEmbeddedView(A.templateRef,A.context,A.index),f=1}else null==u?(s.remove(_),f=3):(l=s.get(_),s.move(l,u),f=2);c&&c({context:null==l?void 0:l.context,operation:f,record:p})})}detach(){}}class v{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(e,s,a,d,c){e.forEachOperation((p,_,u)=>{let l,f;null==p.previousIndex?(l=this._insertView(()=>a(p,_,u),u,s,d(p)),f=l?1:0):null==u?(this._detachAndCacheView(_,s),f=3):(l=this._moveView(_,u,s,d(p)),f=2),c&&c({context:null==l?void 0:l.context,operation:f,record:p})})}detach(){for(const e of this._viewCache)e.destroy();this._viewCache=[]}_insertView(e,s,a,d){const c=this._insertViewFromCache(s,a);if(c)return void(c.context.$implicit=d);const p=e();return a.createEmbeddedView(p.templateRef,p.context,p.index)}_detachAndCacheView(e,s){const a=s.detach(e);this._maybeCacheView(a,s)}_moveView(e,s,a,d){const c=a.get(e);return a.move(c,s),c.context.$implicit=d,c}_maybeCacheView(e,s){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(e);else{const a=s.indexOf(e);-1===a?e.destroy():s.remove(a)}}_insertViewFromCache(e,s){const a=this._viewCache.pop();return a&&s.insert(a,e),a||null}}class S{constructor(e=!1,s,a=!0){this._multiple=e,this._emitChanges=a,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new y.x,s&&s.length&&(e?s.forEach(d=>this._markSelected(d)):this._markSelected(s[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(s=>this._markSelected(s)),this._emitChangeEvent()}deselect(...e){this._verifyValueAssignment(e),e.forEach(s=>this._unmarkSelected(s)),this._emitChangeEvent()}toggle(e){this.isSelected(e)?this.deselect(e):this.select(e)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(e){return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}}const m=new T.OlP("_ViewRepeater")}}]);