"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[551],{4551:(G,u,n)=>{n.r(u),n.d(u,{HistoryModule:()=>B,MY_FORMATS:()=>x});var A=n(4521),g=n(7423),p=n(4834),v=n(5245),T=n(2181),D=n(5899),Y=n(4847),b=n(4999),C=n(1244),S=n(2927),F=n(7579),h=n(2722),s=n(3075),M=n(5439),l=n.n(M),t=n(5e3),H=n(9122),N=n(4880),J=n(1816),I=n(2340),U=n(520),j=n(8951);let L=(()=>{class o{constructor(e,i){this._httpClient=e,this._authService=i}getHistoryInfo(e,i){const a=(0,J.Z)(this._authService.user);return this._httpClient.post(`${I.N.API_URL}/Transacciones_App/sel_comercio`,{nu_id_comercio:a.nu_id_comercio,nu_id_comercio_app:a.nu_id_comercio_app,dt_fec_inicio:e,dt_fec_final:i})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(U.eN),t.LFG(j.e))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var c=n(7322),m=n(6856),f=n(9808);function E(o,r){if(1&o&&(t.TgZ(0,"div",24),t.TgZ(1,"div",25),t.TgZ(2,"div",26),t.TgZ(3,"div",27),t.TgZ(4,"span",28),t._uU(5),t.qZA(),t.TgZ(6,"span"),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"div",29),t.TgZ(9,"span"),t._uU(10),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",30),t.TgZ(12,"div"),t.TgZ(13,"span",31),t._uU(14,"Comisi\xf3n:"),t.qZA(),t.TgZ(15,"span",32),t._uU(16),t.ALo(17,"number"),t.qZA(),t.qZA(),t.TgZ(18,"span",33),t._uU(19),t.ALo(20,"number"),t.qZA(),t.qZA(),t._UZ(21,"mat-divider"),t.qZA(),t.qZA()),2&o){const e=r.$implicit;t.xp6(5),t.hij(" N\xb0 Operaci\xf3n: ",e.nu_id_trx_app," "),t.xp6(2),t.hij(" ",e.vc_desc_grupo_producto," "),t.xp6(3),t.Oqu(e.dt_fecha),t.xp6(6),t.hij(" S/ ",t.xi3(17,5,e.nu_valor_comision,".2-2")," "),t.xp6(3),t.hij(" S/ ",t.xi3(20,8,e.nu_precio,".2-2")," ")}}function O(o,r){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,E,22,11,"div",23),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.transactions)}}function R(o,r){1&o&&(t.TgZ(0,"div",34),t.TgZ(1,"span",35),t._uU(2," No se encontraron registros para la fecha indicada "),t.qZA(),t.qZA())}const q=[{path:"",component:(()=>{class o{constructor(e,i,a){this._fuseNavigationService=e,this._fuseMediaWatcherService=i,this.historyService=a,this.range=new s.cw({trxStartDate:new s.NI,trxEndDate:new s.NI}),this.transactions=[],this._unsubscribeAll=new F.x,this.myFilter=d=>(d||l()())<l()()}ngOnInit(){this._fuseMediaWatcherService.onMediaChange$.pipe((0,h.R)(this._unsubscribeAll)).subscribe(({matchingAliases:e})=>{this.isScreenSmall=!e.includes("md")}),this.resetDates()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}trackByFn(e,i){return i.id||e}toggleNavigation(e){const i=this._fuseNavigationService.getComponent(e);i&&this.isScreenSmall&&i.toggle()}getTransactions(){this.historyService.getHistoryInfo(this.formatDate(this.range.get("trxStartDate").value),this.formatDate(this.range.get("trxEndDate").value)).pipe((0,h.R)(this._unsubscribeAll)).subscribe(e=>this.transactions=e)}selectFirstDate(e){const i=l()(e).add(7,"days");this.maxDate=i}selectEndDate(){this.range.get("trxEndDate").value&&this.getTransactions()}formatDate(e){return l()(e).format("YYYY-MM-DD")}resetDates(){this.range.get("trxStartDate").setValue(l()()),this.range.get("trxEndDate").setValue(l()()),this.maxDate=l()(new Date),this.getTransactions()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(H.Jf),t.Y36(N.T),t.Y36(L))},o.\u0275cmp=t.Xpm({type:o,selectors:[["history"]],decls:26,vars:8,consts:[[1,"flex","flex-col","flex-auto","w-full",2,"background-color","#7c66f7"],[1,"flex-col","flex-auto","bg-card","relative","p-5","md:p-10",2,"border-top-left-radius","3rem !important","border-bottom-left-radius","3rem !important"],[1,"p-5","md:p-0"],["mat-icon-button","",1,"absolute","md:hidden","top-8","left-8",3,"click"],[3,"svgIcon"],[1,"ml-10","-mt-1.5","md:ml-0","md:mt-0","text-3xl","font-bold"],[1,"grid","grid-cols-1","md:grid-cols-2","my-4"],[1,"min-h-40"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-bold","mr-1"],[1,"flex","items-center","border-2","border-[#7c66f7]","p-1","w-full","sm:w-80","md:w-full","lg:w-80"],[1,"custom","w-full"],[3,"formGroup","rangePicker","dateFilter","max"],["matStartDate","","formControlName","trxStartDate","placeholder","Fecha Inicio",3,"dateChange"],["matEndDate","","formControlName","trxEndDate","placeholder","Fecha Final",3,"dateChange"],["matSuffix","",3,"for"],["maxRange","7"],["picker",""],[1,"mb-4","flex","justify-center"],["mat-raised-button","","color","primary",1,"mt-2","w-full","sm:w-60","sm:ml-4","md:w-60","md:ml-0",3,"click"],[1,"border-2","rounded-lg","p-2.5","sm:p-5"],[4,"ngIf"],["class","flex justify-center",4,"ngIf"],["class","my-4",4,"ngFor","ngForOf"],[1,"my-4"],[1,"mb-4"],[1,"flex","justify-between","mb-1"],[1,"flex","flex-col"],[1,"font-semibold","text-[#7c66f7]"],[1,"text-sm"],[1,"flex","justify-between","mb-4"],[1,"mr-1"],[1,"font-semibold"],[1,"font-semibold","text-xl"],[1,"flex","justify-center"],[1,"font-semibold","text-lg"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"button",3),t.NdJ("click",function(){return i.toggleNavigation("mainNavigation")}),t._UZ(4,"mat-icon",4),t.qZA(),t.TgZ(5,"div",5),t._uU(6," Historial "),t.qZA(),t.TgZ(7,"div",6),t.TgZ(8,"div",7),t.TgZ(9,"div",8),t.TgZ(10,"span",9),t._uU(11,"Operaciones de mis clientes"),t.qZA(),t.TgZ(12,"div",10),t.TgZ(13,"mat-form-field",11),t.TgZ(14,"mat-date-range-input",12),t.TgZ(15,"input",13),t.NdJ("dateChange",function(d){return i.selectFirstDate(d.value)}),t.qZA(),t.TgZ(16,"input",14),t.NdJ("dateChange",function(){return i.selectEndDate()}),t.qZA(),t.qZA(),t._UZ(17,"mat-datepicker-toggle",15),t._UZ(18,"mat-date-range-picker",16,17),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"div",18),t.TgZ(21,"button",19),t.NdJ("click",function(){return i.resetDates()}),t._uU(22," Reiniciar Fechas "),t.qZA(),t.qZA(),t.TgZ(23,"div",20),t.YNc(24,O,2,1,"div",21),t.YNc(25,R,3,0,"div",22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const a=t.MAs(19);t.xp6(4),t.Q6J("svgIcon","heroicons_outline:menu"),t.xp6(10),t.Q6J("formGroup",i.range)("rangePicker",a)("dateFilter",i.myFilter)("max",i.maxDate),t.xp6(3),t.Q6J("for",a),t.xp6(7),t.Q6J("ngIf",i.transactions.length>0),t.xp6(1),t.Q6J("ngIf",i.transactions.length<1)}},directives:[g.lW,v.Hw,c.KE,m.wx,s.JL,s.sg,m.zY,s.Fj,s.JJ,s.u,m.By,m.nW,c.R9,m._g,f.O5,f.sg,p.d],pipes:[f.JJ],styles:[".custom.mat-form-field.mat-form-field-appearance-fill .mat-form-field-wrapper{margin-bottom:0!important}.custom.mat-form-field.mat-form-field-appearance-fill .mat-form-field-wrapper .mat-form-field-flex{background-color:#fcfbff!important;border-width:0!important}\n"],encapsulation:2,changeDetection:0}),o})()}];var Q=n(3170),Z=n(508);const x={parse:{dateInput:"DD/MM/YYYY"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"MMMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MM YYYY"}};let B=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[{provide:Z.sG,useValue:x},{provide:Z.Ad,useValue:"es-ES"}],imports:[[A.Bz.forChild(q),S.m,g.ot,p.t,v.Ps,T.Tx,D.Cv,Y.JX,b.p0,C.X,c.lN,m.FA,Q.Yd]]}),o})()}}]);