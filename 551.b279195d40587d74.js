"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[551],{4551:(B,f,n)=>{n.r(f),n.d(f,{HistoryModule:()=>Q,MY_FORMATS:()=>y});var T=n(4521),g=n(7423),p=n(4834),v=n(5245),x=n(2181),D=n(5899),b=n(4847),Y=n(4999),C=n(1244),S=n(2927),H=n(7579),h=n(2722),s=n(3075),F=n(5439),l=n.n(F),t=n(5e3),M=n(9122),N=n(4880),J=n(1816),U=n(2340),I=n(520),j=n(8951);let E=(()=>{class o{constructor(e,i){this._httpClient=e,this._authService=i}getHistoryInfo(e,i){const a=(0,J.Z)(this._authService.user);return this._httpClient.post(`${U.N.API_URL}/Transacciones_App/sel_comercio`,{nu_id_comercio:a.nu_id_comercio,nu_id_comercio_app:a.nu_id_comercio_app,dt_fec_inicio:e,dt_fec_final:i})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(I.eN),t.LFG(j.e))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var d=n(7322),m=n(6856),u=n(9808);function L(o,r){if(1&o&&(t.TgZ(0,"div",26),t.TgZ(1,"div",27),t.TgZ(2,"div",28),t.TgZ(3,"div",29),t.TgZ(4,"span",30),t._uU(5),t.qZA(),t.TgZ(6,"span"),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"div",31),t.TgZ(9,"span"),t._uU(10),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",32),t.TgZ(12,"div"),t.TgZ(13,"span",33),t._uU(14,"Comisi\xf3n:"),t.qZA(),t.TgZ(15,"span",34),t._uU(16),t.ALo(17,"number"),t.qZA(),t.qZA(),t.TgZ(18,"span",35),t._uU(19),t.ALo(20,"number"),t.qZA(),t.qZA(),t._UZ(21,"mat-divider"),t.qZA(),t.qZA()),2&o){const e=r.$implicit;t.xp6(5),t.hij(" N\xb0 Operaci\xf3n: ",e.nu_id_trx_app," "),t.xp6(2),t.hij(" ",e.vc_desc_grupo_producto," "),t.xp6(3),t.Oqu(e.dt_fecha),t.xp6(6),t.hij(" S/ ",t.xi3(17,5,e.nu_valor_comision,".2-2")," "),t.xp6(3),t.hij(" S/ ",t.xi3(20,8,e.nu_precio,".2-2")," ")}}function q(o,r){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,L,22,11,"div",25),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.transactions)}}function O(o,r){1&o&&(t.TgZ(0,"div",36),t.TgZ(1,"span",37),t._uU(2," No se encontraron registros para la fecha indicada "),t.qZA(),t.qZA())}const R=[{path:"",component:(()=>{class o{constructor(e,i,a){this._fuseNavigationService=e,this._fuseMediaWatcherService=i,this.historyService=a,this.range=new s.cw({trxStartDate:new s.NI,trxEndDate:new s.NI}),this.transactions=[],this._unsubscribeAll=new H.x,this.myFilter=c=>(c||l()())<l()()}ngOnInit(){this._fuseMediaWatcherService.onMediaChange$.pipe((0,h.R)(this._unsubscribeAll)).subscribe(({matchingAliases:e})=>{this.isScreenSmall=!e.includes("md")}),this.changeDates(0)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}trackByFn(e,i){return i.id||e}toggleNavigation(e){const i=this._fuseNavigationService.getComponent(e);i&&this.isScreenSmall&&i.toggle()}getTransactions(){this.historyService.getHistoryInfo(this.formatDate(this.range.get("trxStartDate").value),this.formatDate(this.range.get("trxEndDate").value)).pipe((0,h.R)(this._unsubscribeAll)).subscribe(e=>this.transactions=e)}selectFirstDate(e){const i=l()(e).add(7,"days");this.maxDate=i}selectEndDate(){this.range.get("trxEndDate").value&&this.getTransactions()}formatDate(e){return l()(e).format("YYYY-MM-DD")}changeDates(e){this.range.get("trxStartDate").setValue(l()().subtract(e,"days")),this.range.get("trxEndDate").setValue(l()()),this.maxDate=l()(new Date),this.getTransactions()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(M.Jf),t.Y36(N.T),t.Y36(E))},o.\u0275cmp=t.Xpm({type:o,selectors:[["history"]],decls:33,vars:8,consts:[[1,"flex","flex-col","flex-auto","w-full",2,"background-color","#7c66f7"],[1,"flex-col","flex-auto","bg-card","relative","p-5","md:p-10",2,"border-top-left-radius","3rem !important","border-bottom-left-radius","3rem !important"],[1,"p-5","md:p-0"],["mat-icon-button","",1,"absolute","md:hidden","top-8","left-8",3,"click"],[3,"svgIcon"],[1,"ml-10","-mt-1.5","md:ml-0","md:mt-0","text-3xl","font-bold"],[1,"grid","grid-cols-1","md:grid-cols-2","my-4"],[1,"min-h-40"],[1,"mb-4","flex","justify-between"],["mat-raised-button","","color","primary",1,"w-full","sm:w-60","sm:ml-4","md:w-60","md:mx-1",3,"click"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-bold","mr-1"],[1,"flex","items-center","border-2","border-[#7c66f7]","p-1","w-full","sm:w-80","md:w-full","lg:w-80"],[1,"custom","w-full"],[3,"formGroup","rangePicker","dateFilter","max"],["matStartDate","","formControlName","trxStartDate","placeholder","Fecha Inicio",3,"dateChange"],["matEndDate","","formControlName","trxEndDate","placeholder","Fecha Final",3,"dateChange"],["matSuffix","",3,"for"],["maxRange","7"],["picker",""],[1,"mb-4","flex","justify-center"],["mat-raised-button","","color","primary",1,"mt-2","w-full","sm:w-60","sm:ml-4","md:w-60","md:ml-0",3,"click"],[1,"border-2","rounded-lg","p-2.5","sm:p-5"],[4,"ngIf"],["class","flex justify-center",4,"ngIf"],["class","my-4",4,"ngFor","ngForOf"],[1,"my-4"],[1,"mb-4"],[1,"flex","justify-between","mb-1"],[1,"flex","flex-col"],[1,"font-semibold","text-[#7c66f7]"],[1,"text-sm"],[1,"flex","justify-between","mb-4"],[1,"mr-1"],[1,"font-semibold"],[1,"font-semibold","text-xl"],[1,"flex","justify-center"],[1,"font-semibold","text-lg"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"button",3),t.NdJ("click",function(){return i.toggleNavigation("mainNavigation")}),t._UZ(4,"mat-icon",4),t.qZA(),t.TgZ(5,"div",5),t._uU(6," Historial "),t.qZA(),t.TgZ(7,"div",6),t.TgZ(8,"div",7),t.TgZ(9,"div",8),t.TgZ(10,"button",9),t.NdJ("click",function(){return i.changeDates(7)}),t._uU(11," \xdaltima semana "),t.qZA(),t.TgZ(12,"button",9),t.NdJ("click",function(){return i.changeDates(3)}),t._uU(13," \xdaltimos 3 d\xedas "),t.qZA(),t.TgZ(14,"button",9),t.NdJ("click",function(){return i.changeDates(0)}),t._uU(15," Hoy "),t.qZA(),t.qZA(),t.TgZ(16,"div",10),t.TgZ(17,"span",11),t._uU(18,"Operaciones de mis clientes"),t.qZA(),t.TgZ(19,"div",12),t.TgZ(20,"mat-form-field",13),t.TgZ(21,"mat-date-range-input",14),t.TgZ(22,"input",15),t.NdJ("dateChange",function(c){return i.selectFirstDate(c.value)}),t.qZA(),t.TgZ(23,"input",16),t.NdJ("dateChange",function(){return i.selectEndDate()}),t.qZA(),t.qZA(),t._UZ(24,"mat-datepicker-toggle",17),t._UZ(25,"mat-date-range-picker",18,19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",20),t.TgZ(28,"button",21),t.NdJ("click",function(){return i.changeDates(0)}),t._uU(29," Reiniciar Fechas "),t.qZA(),t.qZA(),t.TgZ(30,"div",22),t.YNc(31,q,2,1,"div",23),t.YNc(32,O,3,0,"div",24),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const a=t.MAs(26);t.xp6(4),t.Q6J("svgIcon","heroicons_outline:menu"),t.xp6(17),t.Q6J("formGroup",i.range)("rangePicker",a)("dateFilter",i.myFilter)("max",i.maxDate),t.xp6(3),t.Q6J("for",a),t.xp6(7),t.Q6J("ngIf",i.transactions.length>0),t.xp6(1),t.Q6J("ngIf",i.transactions.length<1)}},directives:[g.lW,v.Hw,d.KE,m.wx,s.JL,s.sg,m.zY,s.Fj,s.JJ,s.u,m.By,m.nW,d.R9,m._g,u.O5,u.sg,p.d],pipes:[u.JJ],styles:[".custom.mat-form-field.mat-form-field-appearance-fill .mat-form-field-wrapper{margin-bottom:0!important}.custom.mat-form-field.mat-form-field-appearance-fill .mat-form-field-wrapper .mat-form-field-flex{background-color:#fcfbff!important;border-width:0!important}\n"],encapsulation:2,changeDetection:0}),o})()}];var w=n(3170),Z=n(508);const y={parse:{dateInput:"DD/MM/YYYY"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"MMMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MM YYYY"}};let Q=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[{provide:Z.sG,useValue:y},{provide:Z.Ad,useValue:"es-ES"}],imports:[[T.Bz.forChild(R),S.m,g.ot,p.t,v.Ps,x.Tx,D.Cv,b.JX,Y.p0,C.X,d.lN,m.FA,w.Yd]]}),o})()}}]);